<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0a1f1f">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Noor">
<meta name="description" content="AI-Powered Quranic Guidance">
<title>Noor â€” Ù†ÙˆØ±</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --gold:#c9a84c;--gold2:#a8722a;--gold-soft:rgba(201,168,76,0.15);
  --bg:#071818;--bg2:#0a2020;--bg3:#0d2828;
  --text:rgba(253,246,227,0.9);--text2:rgba(253,246,227,0.55);--text3:rgba(253,246,227,0.25);
  --border:rgba(201,168,76,0.2);--border2:rgba(201,168,76,0.1);
  --card:rgba(255,255,255,0.04);--radius:16px;
}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overscroll-behavior:none}
#root{min-height:100vh;min-height:-webkit-fill-available}
::-webkit-scrollbar{width:0}
button{-webkit-appearance:none;cursor:pointer}
input,textarea{-webkit-appearance:none;font-family:'Inter',sans-serif;outline:none}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{transform:scale(1);box-shadow:0 4px 20px rgba(201,168,76,0.4)}50%{transform:scale(1.07);box-shadow:0 8px 30px rgba(201,168,76,0.7)}}
@keyframes shimmer{0%{opacity:0.4}50%{opacity:1}100%{opacity:0.4}}
@keyframes slideIn{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}
.fade{animation:fadeUp 0.4s ease both}
.spin{animation:spin 1s linear infinite}

/* â”€â”€ Onboarding â”€â”€ */
#onboarding{
  position:fixed;inset:0;background:linear-gradient(160deg,#060f0f,#0a2020,#061515);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:32px 24px;z-index:1000;
}
.ob-slide{text-align:center;max-width:360px;animation:slideIn 0.4s ease both}
.ob-icon{font-size:5rem;margin-bottom:16px;filter:drop-shadow(0 0 28px rgba(201,168,76,0.8))}
.ob-title{font-family:'Amiri',serif;font-size:2rem;color:var(--gold);margin-bottom:6px}
.ob-arabic{font-family:'Amiri',serif;font-size:1.3rem;color:rgba(201,168,76,0.4);margin-bottom:20px}
.ob-desc{font-size:0.95rem;color:var(--text2);line-height:1.8;margin-bottom:36px}
.ob-dots{display:flex;justify-content:center;gap:8px;margin-bottom:32px}
.ob-dot{height:8px;border-radius:4px;background:rgba(201,168,76,0.25);transition:all 0.3s}
.ob-dot.active{background:var(--gold);width:28px!important}
.ob-dot:not(.active){width:8px}
.ob-btn{width:100%;background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;border-radius:14px;padding:15px;color:#1a1208;font-weight:700;font-size:1rem;letter-spacing:0.3px}
.ob-back{background:none;border:none;color:rgba(201,168,76,0.35);font-size:0.85rem;margin-top:12px;padding:8px}
.ob-skip{background:none;border:none;color:var(--text3);font-size:0.75rem;margin-top:6px;padding:6px}

/* â”€â”€ App Layout â”€â”€ */
#app{display:none;flex-direction:column;min-height:100vh}
#app.show{display:flex}
.header{
  text-align:center;
  padding:max(20px,env(safe-area-inset-top)) 16px 14px;
  background:rgba(7,24,24,0.85);backdrop-filter:blur(14px);
  border-bottom:1px solid var(--border2);
  position:sticky;top:0;z-index:100;
}
.header-inner{display:flex;align-items:center;justify-content:center;gap:10px;position:relative}
.header-logo{display:flex;align-items:center;gap:10px}
.header-moon{font-size:1.6rem;filter:drop-shadow(0 0 12px rgba(201,168,76,0.7))}
.header-name{font-family:'Amiri',serif;font-size:1.9rem;color:var(--gold);letter-spacing:3px;font-style:italic}
.header-arabic{font-family:'Amiri',serif;font-size:1.3rem;color:rgba(201,168,76,0.4)}
.header-sub{font-size:0.58rem;color:var(--text3);letter-spacing:3px;text-transform:uppercase;margin-top:3px}
.key-btn{position:absolute;right:0;background:var(--gold-soft);border:1px solid var(--border);border-radius:8px;padding:5px 10px;color:rgba(201,168,76,0.5);font-size:0.68rem}

.content{flex:1;overflow-y:auto;padding:16px 14px 80px;max-width:760px;margin:0 auto;width:100%}

/* â”€â”€ Bottom Nav â”€â”€ */
.nav{
  position:fixed;bottom:0;left:0;right:0;
  background:rgba(5,18,18,0.97);border-top:1px solid var(--border2);
  backdrop-filter:blur(16px);
  display:flex;justify-content:space-around;
  padding:8px 0 max(12px,env(safe-area-inset-bottom));
  z-index:100;
}
.nav-btn{background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:2px;padding:4px 8px;min-width:48px}
.nav-icon{font-size:1.25rem;transition:filter 0.2s}
.nav-btn.active .nav-icon{filter:drop-shadow(0 0 8px rgba(201,168,76,0.9))}
.nav-label{font-size:0.58rem;color:var(--text3);transition:color 0.2s}
.nav-btn.active .nav-label{color:var(--gold)}
.nav-dot{width:4px;height:4px;border-radius:50%;background:transparent;transition:background 0.2s}
.nav-btn.active .nav-dot{background:var(--gold)}

/* â”€â”€ Cards â”€â”€ */
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:18px;margin-bottom:14px}
.card-header{background:linear-gradient(135deg,rgba(201,168,76,0.12),transparent);border-bottom:1px solid var(--border2);padding:11px 16px;margin:-18px -18px 16px;border-radius:var(--radius) var(--radius) 0 0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
.section-label{font-size:0.63rem;text-transform:uppercase;letter-spacing:2.5px;color:var(--gold);font-weight:700}

/* â”€â”€ Search â”€â”€ */
.emotion-grid{display:flex;flex-wrap:wrap;gap:7px;margin-bottom:14px;justify-content:center}
.emotion-btn{background:var(--gold-soft);border:1.5px solid var(--border);color:var(--text2);padding:6px 13px;border-radius:50px;font-size:0.78rem;transition:all 0.2s}
.emotion-btn.active{background:rgba(201,168,76,0.22);border-color:var(--gold);color:var(--gold)}
textarea,input[type=text]{background:rgba(255,255,255,0.05);border:1.5px solid rgba(201,168,76,0.25);border-radius:12px;padding:11px 14px;color:var(--text);width:100%;font-size:0.93rem;transition:border-color 0.2s}
textarea:focus,input[type=text]:focus{border-color:var(--gold)}
.search-btn{width:100%;background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;border-radius:12px;padding:13px;color:#1a1208;font-weight:700;font-size:0.9rem;margin-top:10px;letter-spacing:0.3px}
.search-btn:disabled{background:var(--gold-soft);color:rgba(201,168,76,0.4);cursor:not-allowed}

/* â”€â”€ Ayat Card â”€â”€ */
.ayat-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:16px}
.ayat-meta{background:linear-gradient(135deg,rgba(201,168,76,0.13),transparent);border-bottom:1px solid var(--border2);padding:11px 16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
.ayat-ref{font-size:0.83rem;color:#e8c97a;font-weight:600}
.ayat-actions{display:flex;gap:5px}
.action-btn{background:var(--gold-soft);border:1px solid var(--border);border-radius:7px;padding:4px 10px;color:rgba(201,168,76,0.7);font-size:0.73rem}
.action-btn.active{background:rgba(201,168,76,0.25);color:#e8c97a}
.ayat-arabic{font-family:'Amiri',serif;font-size:1.8rem;line-height:2;text-align:right;direction:rtl;padding:18px 16px 12px;border-bottom:1px solid var(--border2);background:rgba(201,168,76,0.02)}
.ayat-ref-small{font-size:0.65rem;direction:ltr;text-align:left;margin-top:6px;color:rgba(201,168,76,0.35);font-family:'Inter',sans-serif}
.ayat-translations{padding:14px 16px;display:grid;gap:12px}
.trans-row{display:flex;gap:10px;align-items:flex-start}
.lang-badge{min-width:32px;height:32px;background:var(--gold-soft);border:1px solid var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:0.6rem;font-weight:800;color:var(--gold);flex-shrink:0}
.trans-label{font-size:0.58rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.45);margin-bottom:3px;font-weight:700}
.trans-urdu{font-family:'Amiri',serif;direction:rtl;text-align:right;font-size:1rem;line-height:2;color:var(--text2)}
.trans-english{font-size:0.92rem;line-height:1.7;color:var(--text2)}
.ayat-tafseer{background:rgba(10,28,28,0.5);border-top:1px solid var(--border2);padding:14px 16px}
.tafseer-text{font-size:0.87rem;line-height:1.78;color:var(--text2)}
.relevance-box{margin-top:10px;padding:9px 13px;background:var(--gold-soft);border-radius:8px;border-left:3px solid var(--gold);font-size:0.82rem;color:rgba(201,168,76,0.8);font-style:italic}

/* â”€â”€ Hadith Card â”€â”€ */
.hadith-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:16px}
.grade-badge{background:rgba(50,180,80,0.13);border:1px solid rgba(50,180,80,0.28);border-radius:50px;padding:3px 10px;font-size:0.64rem;color:#6fdf8f;font-weight:700}
.hadith-arabic{font-family:'Amiri',serif;font-size:1.5rem;line-height:1.9;text-align:right;direction:rtl;padding:16px;border-bottom:1px solid var(--border2)}
.hadith-body{padding:14px 16px;display:grid;gap:11px}
.hadith-explanation{background:rgba(10,28,28,0.5);border-top:1px solid var(--border2);padding:13px 16px}

/* â”€â”€ Topic pills â”€â”€ */
.topics{display:flex;flex-wrap:wrap;gap:6px;margin-top:11px}
.topic-pill{background:var(--gold-soft);border:1px solid var(--border);border-radius:50px;padding:5px 13px;color:rgba(201,168,76,0.7);font-size:0.72rem;cursor:pointer;transition:all 0.2s}
.topic-pill:hover{background:rgba(201,168,76,0.2);color:var(--gold)}

/* â”€â”€ Names â”€â”€ */
.names-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:8px;margin-top:14px}
.name-card{background:var(--card);border:1px solid var(--border);border-radius:13px;padding:12px 10px;text-align:center;cursor:pointer;transition:border-color 0.2s}
.name-card:hover{border-color:var(--gold)}
.name-num{font-size:0.58rem;color:var(--text3);margin-bottom:3px}
.name-arabic{font-family:'Amiri',serif;font-size:1.4rem;color:#e8c97a;margin-bottom:4px}
.name-tr{font-size:0.67rem;color:var(--gold);font-weight:600}
.name-en{font-size:0.61rem;color:var(--text3);margin-top:2px}
.name-detail{background:rgba(201,168,76,0.07);border:1px solid var(--gold);border-radius:var(--radius);padding:22px;text-align:center;margin-bottom:14px}

/* â”€â”€ Prayer â”€â”€ */
.time-display{font-size:2rem;font-weight:700;color:#e8c97a;text-align:center;letter-spacing:2px}
.date-display{font-size:0.77rem;color:var(--text3);text-align:center;margin-top:4px}
.prayer-row{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-radius:10px;margin-bottom:6px}
.prayer-row.next{background:rgba(201,168,76,0.1);border:1px solid var(--border)}
.prayer-row:not(.next){background:rgba(255,255,255,0.02);border:1px solid var(--border2)}
.next-badge{background:var(--gold-soft);border:1px solid var(--border);border-radius:9px;padding:11px;text-align:center;margin-bottom:14px}

/* â”€â”€ Dhikr â”€â”€ */
.dhikr-list{display:grid;gap:7px;margin-bottom:16px}
.dhikr-item{background:var(--card);border:1.5px solid var(--border2);border-radius:11px;padding:9px 13px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all 0.2s}
.dhikr-item.active{background:rgba(201,168,76,0.1);border-color:var(--gold)}
.dhikr-counter{background:rgba(201,168,76,0.05);border:1px solid var(--border);border-radius:var(--radius);padding:22px;text-align:center}
.dhikr-tap{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,var(--gold),#8a5e20);border:4px solid rgba(201,168,76,0.4);box-shadow:0 8px 28px rgba(201,168,76,0.35);font-size:2rem;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;transition:transform 0.1s}
.dhikr-tap:active{transform:scale(0.92)}

/* â”€â”€ Bookmarks â”€â”€ */
.empty-state{text-align:center;padding:60px 20px;color:var(--text3)}
.empty-icon{font-size:3.5rem;margin-bottom:14px}

/* â”€â”€ Loading â”€â”€ */
.loader{text-align:center;padding:44px 20px}
.spinner{width:44px;height:44px;border:3px solid var(--border2);border-top:3px solid var(--gold);border-radius:50%;margin:0 auto 14px}
.loader-text{color:var(--text3);font-size:0.85rem}
.loader-arabic{font-family:'Amiri',serif;font-size:1.4rem;color:rgba(201,168,76,0.3);margin-top:8px;animation:shimmer 2s ease infinite}

/* â”€â”€ Error â”€â”€ */
.error-box{background:rgba(180,50,50,0.1);border:1px solid rgba(180,50,50,0.3);border-radius:12px;padding:14px 18px;color:rgba(255,180,180,0.8);font-size:0.88rem;text-align:center}

/* â”€â”€ Daily Float â”€â”€ */
.daily-float{position:fixed;bottom:82px;right:16px;z-index:200;display:flex;flex-direction:column;align-items:center;gap:3px}
.daily-btn{width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--gold2));border:2px solid rgba(201,168,76,0.5);box-shadow:0 4px 20px rgba(201,168,76,0.5);font-size:1.3rem;display:flex;align-items:center;justify-content:center;animation:pulse 2.5s ease-in-out infinite}
.daily-label{font-size:0.5rem;color:rgba(201,168,76,0.55)}

/* â”€â”€ Modal â”€â”€ */
.modal-overlay{position:fixed;inset:0;background:rgba(4,14,14,0.92);z-index:300;display:flex;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(10px)}
.modal-box{background:linear-gradient(160deg,#0d2424,#0a3030);border:1px solid rgba(201,168,76,0.3);border-radius:22px;padding:20px;max-width:580px;width:100%;max-height:85vh;overflow-y:auto}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.modal-close{background:var(--gold-soft);border:1px solid var(--border);border-radius:8px;padding:4px 12px;color:rgba(201,168,76,0.6);font-size:0.78rem}

/* â”€â”€ Ad Banner â”€â”€ */
.ad-banner{border:1px solid var(--border);border-radius:13px;padding:12px 14px;margin-bottom:14px;display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
.ad-cta{background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;border-radius:8px;padding:7px 14px;color:#1a1208;font-weight:700;font-size:0.78rem;white-space:nowrap}

/* â”€â”€ Search History â”€â”€ */
.history-dropdown{background:#0d2424;border:1px solid var(--border);border-radius:10px;margin-top:4px;overflow:hidden}
.history-item{padding:9px 13px;font-size:0.85rem;color:var(--text2);cursor:pointer;border-top:1px solid var(--border2);display:flex;align-items:center;gap:8px}
.history-item:first-child{border-top:none}
</style>
</head>
<body>

<!-- â”€â”€ ONBOARDING â”€â”€ -->
<div id="onboarding">
  <div class="ob-slide" id="ob-slide">
    <div class="ob-icon" id="ob-icon">ğŸŒ™</div>
    <div class="ob-title" id="ob-title">Welcome to Noor</div>
    <div class="ob-arabic" id="ob-arabic">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†ÙˆØ±</div>
    <div class="ob-desc" id="ob-desc">Your personal AI-powered Islamic companion. Find guidance from the Quran and Sunnah, tailored to your heart and emotions.</div>
    <div class="ob-dots" id="ob-dots"></div>
    <button class="ob-btn" id="ob-next">Next â†’</button>
    <div><button class="ob-back" id="ob-back" style="display:none">â† Back</button></div>
    <div><button class="ob-skip" id="ob-skip">Skip intro</button></div>
  </div>
</div>

<!-- â”€â”€ MAIN APP â”€â”€ -->
<div id="app">
  <!-- Header -->
  <div class="header">
    <div class="header-inner">
      <div class="header-logo">
        <span class="header-moon">ğŸŒ™</span>
        <span class="header-name">Noor</span>
        <span class="header-arabic">Ù†ÙˆØ±</span>
      </div>
      <button class="key-btn" onclick="changeKey()">ğŸ”‘ API</button>
    </div>
    <div class="header-sub">AI-Powered Quranic Guidance</div>
  </div>

  <!-- Content -->
  <div class="content" id="content"></div>

  <!-- Bottom Nav -->
  <div class="nav" id="nav"></div>

  <!-- Daily Float -->
  <div class="daily-float">
    <button class="daily-btn" onclick="openDaily()">ğŸŒ…</button>
    <span class="daily-label">Daily</span>
  </div>

  <!-- Daily Modal -->
  <div class="modal-overlay" id="dailyModal" style="display:none" onclick="closeDaily()">
    <div class="modal-box" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="section-label">ğŸŒ… Today's Ayat</span>
        <button class="modal-close" onclick="closeDaily()">âœ• Close</button>
      </div>
      <div id="dailyContent"><div class="loader"><div class="spinner spin"></div><div class="loader-text">Loading...</div></div></div>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ONBOARD_SLIDES = [
  {icon:'ğŸŒ™',title:'Welcome to Noor',arabic:'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†ÙˆØ±',desc:'Your personal AI-powered Islamic companion. Find guidance from the Quran and Sunnah, tailored to your heart.'},
  {icon:'ğŸ”',title:'Search by Emotion',arabic:'Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù…Ø´Ø§Ø¹Ø±',desc:'Feeling sad, anxious, or lost? Select your emotion and Noor finds the perfect Ayat to comfort your soul.'},
  {icon:'ğŸ“œ',title:'Hadith & 99 Names',arabic:'Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰',desc:'Search authentic Hadith by topic, explore all 99 Beautiful Names of Allah with benefits, and track your daily Dhikr.'},
  {icon:'ğŸ•Œ',title:'Complete Islamic App',arabic:'ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø³Ù„Ø§Ù…ÙŠ Ù…ØªÙƒØ§Ù…Ù„',desc:'Prayer times for any city, Dhikr counter, bookmarks, and beautiful Daily Ayat â€” everything you need for your deen.'},
];

const EMOTIONS = [
  {e:'ğŸ˜¢',l:'Sad',k:'sad'},{e:'ğŸ˜°',l:'Anxious',k:'anxious'},
  {e:'ğŸ¤²',l:'Grateful',k:'grateful'},{e:'ğŸŒ«ï¸',l:'Lost',k:'lost'},
  {e:'ğŸŒ…',l:'Hopeful',k:'hopeful'},{e:'ğŸ˜Ÿ',l:'Afraid',k:'afraid'},
  {e:'â˜®ï¸',l:'Peaceful',k:'peaceful'},{e:'ğŸ˜ ',l:'Angry',k:'angry'},
  {e:'ğŸ’”',l:'Heartbroken',k:'heartbroken'},{e:'ğŸ”',l:'Seeking Guidance',k:'seeking guidance'},
];

const AYAT = {
  sad:[
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:286,ar:'Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§',ur:'Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§',en:'Allah does not burden a soul beyond that it can bear.',tf:'This verse is a mercy from Allah, assuring us every hardship is within our capacity to endure.',rl:'When sadness overwhelms you, remember Allah never gives you more than you can handle.'},
    {sn:'Ash-Sharh',sa:'Ø§Ù„Ø´ÙÙ‘Ø±Ù’Ø­',s:94,a:6,ar:'Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§',ur:'Ø¨Û’ Ø´Ú© ØªÚ©Ù„ÛŒÙ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’',en:'Indeed, with hardship will be ease.',tf:'Allah repeats this promise twice in Surah Ash-Sharh. The ease is not after hardship â€” it is WITH it, right now.',rl:'Your sadness carries within it the seed of relief. This is Allah\'s promise.'},
    {sn:'Az-Zumar',sa:'Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±',s:39,a:53,ar:'Ù„ÙØ§ ØªÙÙ‚Ù’Ù†ÙØ·ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘Ø­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',ur:'Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù…Øª ÛÙˆ',en:'Do not despair of the mercy of Allah.',tf:'Allah directly addresses those in despair. No matter how great your sins or sorrows, His mercy is greater.',rl:'Your sadness does not separate you from Allah\'s mercy â€” it can bring you closer.'},
    {sn:'Al-Imran',sa:'Ø¢Ù„ Ø¹ÙÙ…Ù’Ø±ÙØ§Ù†',s:3,a:139,ar:'ÙˆÙÙ„ÙØ§ ØªÙÙ‡ÙÙ†ÙÙˆØ§ ÙˆÙÙ„ÙØ§ ØªÙØ­Ù’Ø²ÙÙ†ÙÙˆØ§ ÙˆÙØ£ÙÙ†ØªÙÙ…Ù Ø§Ù„Ù’Ø£ÙØ¹Ù’Ù„ÙÙˆÙ’Ù†Ù',ur:'Ú©Ù…Ø²ÙˆØ±ÛŒ Ù…Øª Ø¯Ú©Ú¾Ø§Ø¤ Ø§ÙˆØ± ØºÙ… Ù†Û Ú©Ø±ÙˆØŒ ØªÙ… ÛÛŒ ØºØ§Ù„Ø¨ ÛÙˆ',en:'Do not weaken and do not grieve, for you will be superior if you are believers.',tf:'Grief is natural but should not lead to weakness. Your strength as a believer is permanent.',rl:'Your sadness is temporary â€” your strength as a believer is eternal.'},
  ],
  anxious:[
    {sn:'Ar-Ra\'d',sa:'Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯',s:13,a:28,ar:'Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù',ur:'Ø³Ù† Ù„ÙˆØŒ Ø§Ù„Ù„Û Ú©Û’ Ø°Ú©Ø± Ø³Û’ ÛÛŒ Ø¯Ù„ÙˆÚº Ú©Ùˆ Ø³Ú©ÙˆÙ† Ù…Ù„ØªØ§ ÛÛ’',en:'Verily, in the remembrance of Allah do hearts find rest.',tf:'The prescription for a restless heart is dhikr. No medicine can replace the peace that comes from remembering Allah.',rl:'The cure for your anxiety is already given: remember Allah.'},
    {sn:'At-Talaq',sa:'Ø§Ù„Ø·ÙÙ‘Ù„ÙØ§Ù‚',s:65,a:3,ar:'ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ‡ÙÙˆÙ Ø­ÙØ³Ù’Ø¨ÙÙ‡Ù',ur:'Ø§ÙˆØ± Ø¬Ùˆ Ø§Ù„Ù„Û Ù¾Ø± Ø¨Ú¾Ø±ÙˆØ³Û Ú©Ø±Û’ ØªÙˆ ÙˆÛ Ø§Ø³ Ú©Û’ Ù„ÛŒÛ’ Ú©Ø§ÙÛŒ ÛÛ’',en:'And whoever relies upon Allah â€” then He is sufficient for him.',tf:'Tawakkul â€” complete trust in Allah â€” is the antidote to anxiety. When you hand your affairs to Allah, worry loses its power.',rl:'Place your anxiety in Allah\'s hands. He is sufficient for you.'},
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:286,ar:'Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§',ur:'Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§',en:'Allah does not burden a soul beyond that it can bear.',tf:'Whatever you fear, know that Allah already measured your capacity. You are strong enough for what lies ahead.',rl:'The thing you are anxious about is within your power to face â€” Allah guaranteed it.'},
  ],
  grateful:[
    {sn:'Ibrahim',sa:'Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…',s:14,a:7,ar:'Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†ÙÙ‘ÙƒÙÙ…Ù’',ur:'Ø§Ú¯Ø± ØªÙ… Ø´Ú©Ø± Ú©Ø±Ùˆ Ú¯Û’ ØªÙˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº Ø§ÙˆØ± Ø²ÛŒØ§Ø¯Û Ø¯ÙˆÚº Ú¯Ø§',en:'If you are grateful, I will surely increase you in favor.',tf:'Gratitude is a key that unlocks more blessings. Shukr is not just words but a state of the heart that acknowledges Allah\'s gifts.',rl:'Your gratitude today plants the seeds of tomorrow\'s blessings.'},
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:152,ar:'ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’ ÙˆÙØ§Ø´Ù’ÙƒÙØ±ÙÙˆØ§ Ù„ÙÙŠ',ur:'Ù¾Ø³ Ù…Ø¬Ú¾Û’ ÛŒØ§Ø¯ Ú©Ø±Ùˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº ÛŒØ§Ø¯ Ú©Ø±ÙˆÚº Ú¯Ø§ Ø§ÙˆØ± Ù…ÛŒØ±Ø§ Ø´Ú©Ø± Ø§Ø¯Ø§ Ú©Ø±Ùˆ',en:'Remember Me, and I will remember you. Be grateful to Me.',tf:'When you remember Allah with gratitude, He remembers you in His divine presence. This is the most beautiful exchange.',rl:'Your gratitude is a conversation with Allah â€” and He responds.'},
  ],
  lost:[
    {sn:'Al-Fatihah',sa:'Ø§Ù„Ù’ÙÙØ§ØªÙØ­ÙØ©',s:1,a:6,ar:'Ø§Ù‡Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù…ÙØ³ØªÙÙ‚ÙÙŠÙ…Ù',ur:'ÛÙ…ÛŒÚº Ø³ÛŒØ¯Ú¾Û’ Ø±Ø§Ø³ØªÛ’ Ù¾Ø± Ú†Ù„Ø§',en:'Guide us to the straight path.',tf:'This is the master dua for guidance, taught by Allah Himself and repeated 17 times daily in prayer.',rl:'You recite this dua 17 times a day â€” Allah is already answering.'},
    {sn:'Ad-Duha',sa:'Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰',s:93,a:7,ar:'ÙˆÙÙˆÙØ¬ÙØ¯ÙÙƒÙ Ø¶ÙØ§Ù„Ù‹Ù‘Ø§ ÙÙÙ‡ÙØ¯ÙÙ‰Ù°',ur:'Ø§ÙˆØ± Ø§Ø³ Ù†Û’ ØªÙ…ÛÛŒÚº Ø¨Ú¾Ù¹Ú©Ø§ ÛÙˆØ§ Ù¾Ø§ÛŒØ§ ØªÙˆ Ø±Ø§Û Ø¯Ú©Ú¾Ø§Ø¦ÛŒ',en:'And He found you lost and guided you.',tf:'Allah guided the Prophet from confusion to clarity. Feeling lost is not failure â€” it is the starting point of divine guidance.',rl:'Feeling lost means you are at the exact point where Allah\'s guidance begins.'},
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:257,ar:'Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙÙŠÙÙ‘ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙŠÙØ®Ù’Ø±ÙØ¬ÙÙ‡ÙÙ… Ù…ÙÙ‘Ù†Ù Ø§Ù„Ø¸ÙÙ‘Ù„ÙÙ…ÙØ§ØªÙ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù†ÙÙ‘ÙˆØ±Ù',ur:'Ø§Ù„Ù„Û Ø§ÛŒÙ…Ø§Ù† ÙˆØ§Ù„ÙˆÚº Ú©Ø§ Ø¯ÙˆØ³Øª ÛÛ’ Ø§Ù†ÛÛŒÚº Ø§Ù†Ø¯Ú¾ÛŒØ±ÙˆÚº Ø³Û’ Ø±ÙˆØ´Ù†ÛŒ Ù…ÛŒÚº Ù„Ø§ØªØ§ ÛÛ’',en:'Allah is the ally of those who believe. He brings them out from darknesses into the light.',tf:'Allah personally guides believers from darkness to light. You are not alone in feeling lost.',rl:'Allah is already leading you from darkness to light.'},
  ],
  hopeful:[
    {sn:'Yusuf',sa:'ÙŠÙÙˆØ³ÙÙ',s:12,a:87,ar:'Ù„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',ur:'Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù†Û ÛÙˆ',en:'Do not despair of relief from Allah.',tf:'Prophet Yaqub said this after years of separation. His hope was ultimately rewarded â€” yours will be too.',rl:'Your hope is well-placed. Allah rewards those who never stop believing.'},
    {sn:'Az-Zumar',sa:'Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±',s:39,a:10,ar:'Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ ÙŠÙÙˆÙÙÙÙ‘Ù‰ Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙˆÙ†Ù Ø£ÙØ¬Ù’Ø±ÙÙ‡ÙÙ… Ø¨ÙØºÙÙŠÙ’Ø±Ù Ø­ÙØ³ÙØ§Ø¨Ù',ur:'ØµØ¨Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Ùˆ Ø§Ù† Ú©Ø§ Ø§Ø¬Ø± Ø¨Û’ Ø­Ø³Ø§Ø¨ Ø¯ÛŒØ§ Ø¬Ø§Ø¦Û’ Ú¯Ø§',en:'Indeed, the patient will be given their reward without account.',tf:'The reward for patience and hope is so vast it cannot be measured. Allah rewards the hopeful without limit.',rl:'Your hope and patience are building a reward beyond calculation.'},
  ],
  afraid:[
    {sn:'Al-Anfal',sa:'Ø§Ù„Ù’Ø£ÙÙ†ÙÙØ§Ù„',s:8,a:40,ar:'ÙˆÙØ§Ø¹Ù’Ù„ÙÙ…ÙÙˆØ§ Ø£ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙˆÙ’Ù„ÙØ§ÙƒÙÙ…Ù’ Ù†ÙØ¹Ù’Ù…Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’Ù„ÙÙ‰Ù°',ur:'Ø§ÙˆØ± Ø¬Ø§Ù† Ù„Ùˆ Ú©Û Ø§Ù„Ù„Û ØªÙ…ÛØ§Ø±Ø§ Ù…Ø¯Ø¯Ú¯Ø§Ø± ÛÛ’ØŒ ÙˆÛ Ú©ÛŒØ§ Ø§Ú†Ú¾Ø§ Ù…ÙˆÙ„Ø§ ÛÛ’',en:'Know that Allah is your protector â€” excellent is the protector and excellent is the helper.',tf:'Fear diminishes when we truly internalize that Allah is our protector. He is not just any guardian â€” He is the best.',rl:'You have the best protector in existence â€” what is there truly to fear?'},
    {sn:'At-Tawbah',sa:'Ø§Ù„ØªÙÙ‘ÙˆÙ’Ø¨ÙØ©',s:9,a:51,ar:'Ù„ÙÙ‘Ù† ÙŠÙØµÙÙŠØ¨ÙÙ†ÙØ§ Ø¥ÙÙ„ÙÙ‘Ø§ Ù…ÙØ§ ÙƒÙØªÙØ¨Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙ†ÙØ§',ur:'ÛÙ…ÛŒÚº ÙˆÛÛŒ Ù¾ÛÙ†Ú†Û’ Ú¯Ø§ Ø¬Ùˆ Ø§Ù„Ù„Û Ù†Û’ ÛÙ…Ø§Ø±Û’ Ù„ÛŒÛ’ Ù„Ú©Ú¾ Ø¯ÛŒØ§ ÛÛ’',en:'Nothing will befall us except what Allah has decreed for us.',tf:'Everything is in Allah\'s hands. What you fear cannot reach you unless Allah wills it â€” and if He wills it, there is wisdom in it.',rl:'Your fear loses power when you remember nothing happens outside Allah\'s decree.'},
  ],
  peaceful:[
    {sn:'Al-Fajr',sa:'Ø§Ù„Ù’ÙÙØ¬Ù’Ø±',s:89,a:27,ar:'ÙŠÙØ§ Ø£ÙÙŠÙÙ‘ØªÙÙ‡ÙØ§ Ø§Ù„Ù†ÙÙ‘ÙÙ’Ø³Ù Ø§Ù„Ù’Ù…ÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘Ø©Ù',ur:'Ø§Û’ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† ÙˆØ§Ù„ÛŒ Ø±ÙˆØ­',en:'O tranquil soul.',tf:'This is Allah calling out to the peaceful soul â€” the highest state a believer can reach in this life.',rl:'The peace you feel is Allah\'s gift â€” nurture it through dhikr and gratitude.'},
    {sn:'Al-Fath',sa:'Ø§Ù„Ù’ÙÙØªÙ’Ø­',s:48,a:4,ar:'Ù‡ÙÙˆÙ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙÙ†Ø²ÙÙ„Ù Ø§Ù„Ø³ÙÙ‘ÙƒÙÙŠÙ†ÙØ©Ù ÙÙÙŠ Ù‚ÙÙ„ÙÙˆØ¨Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù',ur:'ÙˆÛÛŒ ÛÛ’ Ø¬Ø³ Ù†Û’ Ù…ÙˆÙ…Ù†ÙˆÚº Ú©Û’ Ø¯Ù„ÙˆÚº Ù…ÛŒÚº Ø³Ú©ÙˆÙ† Ù†Ø§Ø²Ù„ ÙØ±Ù…Ø§ÛŒØ§',en:'It is He who sent down tranquility into the hearts of the believers.',tf:'Sakinah â€” divine tranquility â€” is a gift directly sent by Allah into believing hearts. It comes through faith.',rl:'The peace in your heart right now is a direct gift from Allah.'},
  ],
  angry:[
    {sn:'Al-Imran',sa:'Ø¢Ù„ Ø¹ÙÙ…Ù’Ø±ÙØ§Ù†',s:3,a:134,ar:'ÙˆÙØ§Ù„Ù’ÙƒÙØ§Ø¸ÙÙ…ÙÙŠÙ†Ù Ø§Ù„Ù’ØºÙÙŠÙ’Ø¸Ù ÙˆÙØ§Ù„Ù’Ø¹ÙØ§ÙÙÙŠÙ†Ù Ø¹ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù',ur:'Ø§ÙˆØ± ØºØµÛ Ù¾ÛŒÙ†Û’ ÙˆØ§Ù„Û’ Ø§ÙˆØ± Ù„ÙˆÚ¯ÙˆÚº Ú©Ùˆ Ù…Ø¹Ø§Ù Ú©Ø±Ù†Û’ ÙˆØ§Ù„Û’',en:'Those who suppress anger and pardon the people â€” Allah loves the doers of good.',tf:'Suppressing anger is among the qualities of people of Paradise. It is not weakness â€” it is the highest form of strength.',rl:'Controlling your anger right now is an act that Allah Himself loves.'},
    {sn:'Al-Araf',sa:'Ø§Ù„Ù’Ø£ÙØ¹Ù’Ø±ÙØ§Ù',s:7,a:199,ar:'Ø®ÙØ°Ù Ø§Ù„Ù’Ø¹ÙÙÙ’ÙˆÙ ÙˆÙØ£Ù’Ù…ÙØ±Ù’ Ø¨ÙØ§Ù„Ù’Ø¹ÙØ±Ù’ÙÙ ÙˆÙØ£ÙØ¹Ù’Ø±ÙØ¶ Ø¹ÙÙ†Ù Ø§Ù„Ù’Ø¬ÙØ§Ù‡ÙÙ„ÙÙŠÙ†Ù',ur:'Ù…Ø¹Ø§ÙÛŒ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±Ùˆ Ø§ÙˆØ± Ù†ÛŒÚ©ÛŒ Ú©Ø§ Ø­Ú©Ù… Ø¯Ùˆ Ø§ÙˆØ± Ø¬Ø§ÛÙ„ÙˆÚº Ø³Û’ Ù…Ù†Û Ù¾Ú¾ÛŒØ± Ù„Ùˆ',en:'Show forgiveness, enjoin good, and turn away from the ignorant.',tf:'The divine formula for anger: forgive, promote good, and disengage from those who provoke.',rl:'Turn away from what angers you â€” not as weakness, but as divine wisdom.'},
  ],
  heartbroken:[
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:216,ar:'ÙˆÙØ¹ÙØ³ÙÙ‰Ù° Ø£ÙÙ† ØªÙÙƒÙ’Ø±ÙÙ‡ÙÙˆØ§ Ø´ÙÙŠÙ’Ø¦Ù‹Ø§ ÙˆÙÙ‡ÙÙˆÙ Ø®ÙÙŠÙ’Ø±ÙŒ Ù„ÙÙ‘ÙƒÙÙ…Ù’',ur:'Ù…Ù…Ú©Ù† ÛÛ’ Ú©Û ØªÙ… Ú©Ø³ÛŒ Ú†ÛŒØ² Ú©Ùˆ Ù†Ø§Ù¾Ø³Ù†Ø¯ Ú©Ø±Ùˆ Ø§ÙˆØ± ÙˆÛ ØªÙ…ÛØ§Ø±Û’ Ù„ÛŒÛ’ Ø¨ÛØªØ± ÛÙˆ',en:'Perhaps you dislike a thing and it is good for you.',tf:'Allah sees what we cannot see. What breaks our heart may be the very thing that saves our soul.',rl:'The heartbreak you feel may be Allah redirecting you to something better.'},
    {sn:'Ad-Duha',sa:'Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰',s:93,a:5,ar:'ÙˆÙÙ„ÙØ³ÙÙˆÙ’ÙÙ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙ Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØªÙØ±Ù’Ø¶ÙÙ‰Ù°',ur:'Ø§ÙˆØ± Ø¨Û’ Ø´Ú© ØªÙ…ÛØ§Ø±Ø§ Ø±Ø¨ ØªÙ…ÛÛŒÚº Ø§ØªÙ†Ø§ Ø¯Û’ Ú¯Ø§ Ú©Û ØªÙ… Ø±Ø§Ø¶ÛŒ ÛÙˆ Ø¬Ø§Ø¤ Ú¯Û’',en:'And your Lord is going to give you, and you will be satisfied.',tf:'This was promised to the Prophet in his darkest moments. Allah gives so much that you become fully content.',rl:'Allah has something prepared for you that will make you forget this pain.'},
  ],
  'seeking guidance':[
    {sn:'Al-Fatihah',sa:'Ø§Ù„Ù’ÙÙØ§ØªÙØ­ÙØ©',s:1,a:6,ar:'Ø§Ù‡Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù…ÙØ³ØªÙÙ‚ÙÙŠÙ…Ù',ur:'ÛÙ…ÛŒÚº Ø³ÛŒØ¯Ú¾Û’ Ø±Ø§Ø³ØªÛ’ Ù¾Ø± Ú†Ù„Ø§',en:'Guide us to the straight path.',tf:'The master dua for guidance, taught by Allah and recited 17 times daily. Allah answers every sincere call.',rl:'Seeking guidance is already the first step on the straight path.'},
    {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:2,ar:'Ø°ÙÙ°Ù„ÙÙƒÙ Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù Ù„ÙØ§ Ø±ÙÙŠÙ’Ø¨Ù ÙÙÙŠÙ‡Ù Ù‡ÙØ¯Ù‹Ù‰ Ù„ÙÙ‘Ù„Ù’Ù…ÙØªÙÙ‘Ù‚ÙÙŠÙ†Ù',ur:'ÛŒÛ ÙˆÛ Ú©ØªØ§Ø¨ ÛÛ’ Ø¬Ø³ Ù…ÛŒÚº Ú©ÙˆØ¦ÛŒ Ø´Ú© Ù†ÛÛŒÚºØŒ Ù…ØªÙ‚ÛŒÙ† Ú©Û’ Ù„ÛŒÛ’ ÛØ¯Ø§ÛŒØª ÛÛ’',en:'This is the Book in which there is no doubt, a guidance for those mindful of Allah.',tf:'The Quran is described as guidance from its second verse. Every answer you seek is within these pages.',rl:'The guidance you seek is in the very Book you are reading right now.'},
  ],
};

const HADITH = [
  {n:'Umar (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'1',t:'intention niyyah action deed sincerity',ar:'Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø§Ù„Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù Ø¨ÙØ§Ù„Ù†ÙÙ‘ÙŠÙÙ‘Ø§ØªÙ',en:'Actions are judged by intentions. Every person gets the reward according to what he has intended.',ur:'Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§ Ø¯Ø§Ø±ÙˆÙ…Ø¯Ø§Ø± Ù†ÛŒØªÙˆÚº Ù¾Ø± ÛÛ’',ex:'The value of any deed depends on the intention behind it. A small deed done sincerely outweighs a large deed done for show.',g:'Sahih'},
  {n:'Anas (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'13',t:'brotherhood love faith believe Muslim',ar:'Ù„ÙØ§ ÙŠÙØ¤Ù’Ù…ÙÙ†Ù Ø£ÙØ­ÙØ¯ÙÙƒÙÙ…Ù’ Ø­ÙØªÙÙ‘Ù‰ ÙŠÙØ­ÙØ¨ÙÙ‘ Ù„ÙØ£ÙØ®ÙÙŠÙ‡Ù Ù…ÙØ§ ÙŠÙØ­ÙØ¨ÙÙ‘ Ù„ÙÙ†ÙÙÙ’Ø³ÙÙ‡Ù',en:'None of you truly believes until he loves for his brother what he loves for himself.',ur:'ØªÙ… Ù…ÛŒÚº Ø³Û’ Ú©ÙˆØ¦ÛŒ Ù…ÙˆÙ…Ù† Ù†ÛÛŒÚº Ø¬Ø¨ ØªÚ© Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ù„ÛŒÛ’ ÙˆÛÛŒ Ù†Û Ú†Ø§ÛÛ’ Ø¬Ùˆ Ø®ÙˆØ¯ Ú©Û’ Ù„ÛŒÛ’ Ú†Ø§ÛØªØ§ ÛÛ’',ex:'True faith requires transcending selfishness. Genuine concern for others is a condition of complete iman.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'6114',t:'anger angry control self patience strong',ar:'Ù„ÙÙŠÙ’Ø³Ù Ø§Ù„Ø´ÙÙ‘Ø¯ÙÙŠØ¯Ù Ø¨ÙØ§Ù„ØµÙÙ‘Ø±ÙØ¹ÙØ©Ù Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø§Ù„Ø´ÙÙ‘Ø¯ÙÙŠØ¯Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙÙ…Ù’Ù„ÙÙƒÙ Ù†ÙÙÙ’Ø³ÙÙ‡Ù Ø¹ÙÙ†Ù’Ø¯Ù Ø§Ù„Ù’ØºÙØ¶ÙØ¨Ù',en:'The strong person is not the one who wrestles someone down. The strong one controls himself when angry.',ur:'Ø·Ø§Ù‚ØªÙˆØ± ÙˆÛ Ù†ÛÛŒÚº Ø¬Ùˆ Ù¾ÛÙ„ÙˆØ§Ù†ÛŒ Ù…ÛŒÚº ØºØ§Ù„Ø¨ Ø¢Ø¦Û’ØŒ Ø·Ø§Ù‚ØªÙˆØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ ØºØµÛ’ Ù…ÛŒÚº Ø®ÙˆØ¯ Ú©Ùˆ Ù‚Ø§Ø¨Ùˆ Ù…ÛŒÚº Ø±Ú©Ú¾Û’',ex:'True strength in Islam is internal mastery, not physical dominance. Self-control during anger is beloved to Allah.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Muslim',ba:'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…',num:'2699',t:'knowledge learn study seek education wisdom quran',ar:'Ù…ÙÙ†Ù’ Ø³ÙÙ„ÙÙƒÙ Ø·ÙØ±ÙÙŠÙ‚Ù‹Ø§ ÙŠÙÙ„Ù’ØªÙÙ…ÙØ³Ù ÙÙÙŠÙ‡Ù Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ø³ÙÙ‡ÙÙ‘Ù„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙ‡Ù Ø·ÙØ±ÙÙŠÙ‚Ù‹Ø§ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù',en:'Whoever travels a path seeking knowledge, Allah will make easy for him a path to Paradise.',ur:'Ø¬Ùˆ Ø¹Ù„Ù… Ú©ÛŒ ØªÙ„Ø§Ø´ Ù…ÛŒÚº Ø±Ø§Ø³ØªÛ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±Û’ØŒ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ù„ÛŒÛ’ Ø¬Ù†Øª Ú©Ø§ Ø±Ø§Ø³ØªÛ Ø¢Ø³Ø§Ù† Ú©Ø±ØªØ§ ÛÛ’',ex:'Seeking Islamic knowledge is worship that paves the path to Paradise. Every step toward learning is a step toward Allah.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Muslim',ba:'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…',num:'2319',t:'kindness mercy compassion gentle soft character',ar:'Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø±ÙÙÙÙŠÙ‚ÙŒ ÙŠÙØ­ÙØ¨ÙÙ‘ Ø§Ù„Ø±ÙÙ‘ÙÙ’Ù‚Ù ÙÙÙŠ Ø§Ù„Ø£ÙÙ…Ù’Ø±Ù ÙƒÙÙ„ÙÙ‘Ù‡Ù',en:'Allah is gentle and loves gentleness in all matters.',ur:'Ø§Ù„Ù„Û Ù†Ø±Ù… ÛÛ’ Ø§ÙˆØ± ÛØ± Ù…Ø¹Ø§Ù…Ù„Û’ Ù…ÛŒÚº Ù†Ø±Ù…ÛŒ Ú©Ùˆ Ù¾Ø³Ù†Ø¯ Ú©Ø±ØªØ§ ÛÛ’',ex:'Gentleness is a divine attribute. Harshness drives people away while gentleness draws them to goodness and to Islam.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'527',t:'prayer salah namaz worship fajr dhuhr asr maghrib isha',ar:'Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù Ø¹ÙÙ„ÙÙ‰ ÙˆÙÙ‚Ù’ØªÙÙ‡ÙØ§ Ø£ÙÙÙ’Ø¶ÙÙ„Ù Ø§Ù„Ù’Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù',en:'Prayer at its proper time is the best of deeds.',ur:'ÙˆÙ‚Øª Ù¾Ø± Ù†Ù…Ø§Ø² Ù¾Ú‘Ú¾Ù†Ø§ Ø³Ø¨ Ø³Û’ Ø§ÙØ¶Ù„ Ø¹Ù…Ù„ ÛÛ’',ex:'Among all good deeds, praying on time holds the highest rank. It declares that Allah\'s call takes priority over worldly affairs.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Muslim',ba:'ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…',num:'2588',t:'charity sadaqah give spend money poor help others',ar:'Ù…ÙØ§ Ù†ÙÙ‚ÙØµÙØªÙ’ ØµÙØ¯ÙÙ‚ÙØ©ÙŒ Ù…ÙÙ†Ù’ Ù…ÙØ§Ù„Ù',en:'Charity does not decrease wealth.',ur:'ØµØ¯Ù‚Û Ù…Ø§Ù„ Ú©Ùˆ Ú©Ù… Ù†ÛÛŒÚº Ú©Ø±ØªØ§',ex:'Giving does not reduce wealth â€” it increases barakah, brings protection and divine compensation in mysterious ways.',g:'Sahih'},
  {n:'Abu Hurairah (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'5971',t:'parents mother father family respect obey love',ar:'Ø±ÙØºÙÙ…Ù Ø£ÙÙ†Ù’ÙÙÙ‡Ù Ù…ÙÙ†Ù’ Ø£ÙØ¯Ù’Ø±ÙÙƒÙ ÙˆÙØ§Ù„ÙØ¯ÙÙŠÙ’Ù‡Ù Ø¹ÙÙ†Ù’Ø¯Ù Ø§Ù„Ù’ÙƒÙØ¨ÙØ±Ù ÙÙÙ„ÙÙ…Ù’ ÙŠÙØ¯Ù’Ø®ÙÙ„Ù Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù',en:'Humiliated is the one who finds his parents in old age yet does not enter Paradise through serving them.',ur:'ÙˆÛ Ø°Ù„ÛŒÙ„ ÛÙˆ Ø¬Ø³ Ù†Û’ ÙˆØ§Ù„Ø¯ÛŒÙ† Ú©Ùˆ Ø¨Ú‘Ú¾Ø§Ù¾Û’ Ù…ÛŒÚº Ù¾Ø§ÛŒØ§ Ø§ÙˆØ± Ù¾Ú¾Ø± Ø¨Ú¾ÛŒ Ø¬Ù†Øª Ù…ÛŒÚº Ø¯Ø§Ø®Ù„ Ù†Û ÛÙˆØ§',ex:'Parents in old age are the greatest opportunity for Paradise. Serving them with patience is a direct path to Allah\'s pleasure.',g:'Sahih'},
  {n:'Abu Said (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'5641',t:'patience hardship trial test difficulty suffering pain sad hurt',ar:'Ù…ÙØ§ ÙŠÙØµÙÙŠØ¨Ù Ø§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…Ù Ù…ÙÙ†Ù’ Ù†ÙØµÙØ¨Ù ÙˆÙÙ„ÙØ§ ÙˆÙØµÙØ¨Ù ÙˆÙÙ„ÙØ§ Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ„ÙÙ‘Ø§ ÙƒÙÙÙÙ‘Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø¨ÙÙ‡Ù',en:'No fatigue, illness, anxiety or sorrow afflicts a Muslim except that Allah expiates his sins through it.',ur:'Ù…Ø³Ù„Ù…Ø§Ù† Ú©Ùˆ Ø¬Ùˆ Ø¨Ú¾ÛŒ ØªÚ©Ù„ÛŒÙ ÛŒØ§ ØºÙ… Ù¾ÛÙ†Ú†Û’ØŒ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø§Ø³ Ú©Û’ Ú¯Ù†Ø§Û Ù…Ø¹Ø§Ù ÙØ±Ù…Ø§ØªØ§ ÛÛ’',ex:'Every hardship becomes a means of purification and reward. Nothing is wasted in Allah\'s plan â€” even pain becomes mercy.',g:'Sahih'},
  {n:'Anas (RA)',b:'Sunan Tirmidhi',ba:'Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ',num:'3540',t:'forgiveness repentance tawbah sin mercy Allah',ar:'ÙƒÙÙ„ÙÙ‘ Ø¨ÙÙ†ÙÙŠ Ø¢Ø¯ÙÙ…Ù Ø®ÙØ·ÙÙ‘Ø§Ø¡ÙŒ ÙˆÙØ®ÙÙŠÙ’Ø±Ù Ø§Ù„Ù’Ø®ÙØ·ÙÙ‘Ø§Ø¦ÙÙŠÙ†Ù Ø§Ù„ØªÙÙ‘ÙˆÙÙ‘Ø§Ø¨ÙÙˆÙ†Ù',en:'Every son of Adam sins, and the best of those who sin are those who repent.',ur:'ÛØ± Ø§Ù†Ø³Ø§Ù† Ú¯Ù†Ø§ÛÚ¯Ø§Ø± ÛÛ’ Ø§ÙˆØ± Ø¨ÛØªØ±ÛŒÙ† Ú¯Ù†Ø§ÛÚ¯Ø§Ø± ÙˆÛ ÛÛŒÚº Ø¬Ùˆ ØªÙˆØ¨Û Ú©Ø±ÛŒÚº',ex:'Sinning is human but repentance is divine. Turning back to Allah after a sin is itself a noble act.',g:'Hasan'},
  {n:'Uthman (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'5027',t:'quran recite read learn teach best',ar:'Ø®ÙÙŠÙ’Ø±ÙÙƒÙÙ…Ù’ Ù…ÙÙ†Ù’ ØªÙØ¹ÙÙ„ÙÙ‘Ù…Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙˆÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙ‡Ù',en:'The best of you are those who learn the Quran and teach it.',ur:'ØªÙ… Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ Ù‚Ø±Ø¢Ù† Ø³ÛŒÚ©Ú¾Û’ Ø§ÙˆØ± Ø³Ú©Ú¾Ø§Ø¦Û’',ex:'The Quran holds the highest status in Islam. Those who dedicate themselves to it occupy the highest rank among believers.',g:'Sahih'},
  {n:'Abu Dhar (RA)',b:'Sunan Tirmidhi',ba:'Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ',num:'1956',t:'smile happy joy face brother charity kind',ar:'ØªÙØ¨ÙØ³ÙÙ‘Ù…ÙÙƒÙ ÙÙÙŠ ÙˆÙØ¬Ù’Ù‡Ù Ø£ÙØ®ÙÙŠÙƒÙ Ù„ÙÙƒÙ ØµÙØ¯ÙÙ‚ÙØ©ÙŒ',en:'Your smile in the face of your brother is an act of charity.',ur:'Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ú†ÛØ±Û’ Ú©ÛŒ Ø·Ø±Ù Ù…Ø³Ú©Ø±Ø§Ù†Ø§ ØµØ¯Ù‚Û ÛÛ’',ex:'Islam makes even a smile an act of worship. Spreading joy to others is a form of charity that earns divine reward.',g:'Sahih'},
  {n:'Ibn Umar (RA)',b:'Sunan Tirmidhi',ba:'Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ',num:'2459',t:'death hereafter akhirah dunya world life prepare',ar:'ÙƒÙÙ†Ù’ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ ÙƒÙØ£ÙÙ†ÙÙ‘ÙƒÙ ØºÙØ±ÙÙŠØ¨ÙŒ Ø£ÙÙˆÙ’ Ø¹ÙØ§Ø¨ÙØ±Ù Ø³ÙØ¨ÙÙŠÙ„Ù',en:'Be in this world as if you are a stranger or a traveler passing through.',ur:'Ø¯Ù†ÛŒØ§ Ù…ÛŒÚº Ø§ÛŒØ³Û’ Ø±ÛÙˆ Ø¬ÛŒØ³Û’ ØªÙ… Ø§Ø¬Ù†Ø¨ÛŒ ÛŒØ§ Ø±Ø§ÛÚ¯ÛŒØ± ÛÙˆ',ex:'We are travelers â€” our real home is the akhirah. This mindset frees us from worldly attachment and anxiety.',g:'Sahih'},
  {n:'Abdullah (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'6094',t:'honesty truth truthful lies trust trustworthy character',ar:'Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ Ø¨ÙØ§Ù„ØµÙÙ‘Ø¯Ù’Ù‚Ù ÙÙØ¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘Ø¯Ù’Ù‚Ù ÙŠÙÙ‡Ù’Ø¯ÙÙŠ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¨ÙØ±ÙÙ‘',en:'Hold fast to truthfulness, for truthfulness leads to righteousness and righteousness leads to Paradise.',ur:'Ø³Ú†Ø§Ø¦ÛŒ Ú©Ùˆ Ù„Ø§Ø²Ù… Ù¾Ú©Ú‘Ùˆ Ú©ÛŒÙˆÙ†Ú©Û Ø³Ú†Ø§Ø¦ÛŒ Ù†ÛŒÚ©ÛŒ Ú©ÛŒ Ø·Ø±Ù Ù„Û’ Ø¬Ø§ØªÛŒ ÛÛ’ Ø§ÙˆØ± Ù†ÛŒÚ©ÛŒ Ø¬Ù†Øª Ú©ÛŒ Ø·Ø±Ù',ex:'Truthfulness is a chain: truth leads to righteousness which leads to Paradise. Lying leads to wickedness and punishment.',g:'Sahih'},
  {n:'Ibn Abbas (RA)',b:'Sahih Bukhari',ba:'ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',num:'6412',t:'health body blessing time youth free use',ar:'Ù†ÙØ¹Ù’Ù…ÙØªÙØ§Ù†Ù Ù…ÙØºÙ’Ø¨ÙÙˆÙ†ÙŒ ÙÙÙŠÙ‡ÙÙ…ÙØ§ ÙƒÙØ«ÙÙŠØ±ÙŒ Ù…ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Ø§Ù„ØµÙÙ‘Ø­ÙÙ‘Ø©Ù ÙˆÙØ§Ù„Ù’ÙÙØ±ÙØ§ØºÙ',en:'Two blessings are taken for granted by many people â€” good health and free time.',ur:'Ø¯Ùˆ Ù†Ø¹Ù…ØªÛŒÚº ÛÛŒÚº Ø¬Ù† Ù…ÛŒÚº Ø¨ÛØª Ø³Û’ Ù„ÙˆÚ¯ Ø®Ø³Ø§Ø±Û’ Ù…ÛŒÚº ÛÛŒÚº: ØµØ­Øª Ø§ÙˆØ± ÙØ±Ø§ØºØª',ex:'We value health and time only when we lose them. Use these blessings actively in worship before they are taken away.',g:'Sahih'},
];

const DAILY_POOL = [
  {sn:'Al-Baqarah',sa:'Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©',s:2,a:286,ar:'Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§',ur:'Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§',en:'Allah does not burden a soul beyond that it can bear.',tf:'This beautiful verse assures us every challenge is within our capacity. Allah knows our limits and never exceeds them.'},
  {sn:'Ash-Sharh',sa:'Ø§Ù„Ø´ÙÙ‘Ø±Ù’Ø­',s:94,a:6,ar:'Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§',ur:'Ø¨Û’ Ø´Ú© Ù…Ø´Ú©Ù„ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’',en:'Indeed, with hardship will be ease.',tf:'Ease travels alongside every hardship. This is not a future promise â€” ease is WITH the difficulty, right now.'},
  {sn:'Ar-Ra\'d',sa:'Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯',s:13,a:28,ar:'Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù',ur:'Ø³Ù† Ù„Ùˆ Ø§Ù„Ù„Û Ú©Û’ Ø°Ú©Ø± Ø³Û’ Ø¯Ù„ÙˆÚº Ú©Ùˆ Ø³Ú©ÙˆÙ† Ù…Ù„ØªØ§ ÛÛ’',en:'Verily, in the remembrance of Allah do hearts find rest.',tf:'The prescription for every restless heart is dhikr. No anxiety can survive in a heart that truly remembers Allah.'},
  {sn:'Az-Zumar',sa:'Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±',s:39,a:53,ar:'Ù„ÙØ§ ØªÙÙ‚Ù’Ù†ÙØ·ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘Ø­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',ur:'Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù…Øª ÛÙˆ',en:'Do not despair of the mercy of Allah.',tf:'Allah commands us never to lose hope. No matter how far we feel, His mercy is always greater and always closer.'},
  {sn:'Ad-Duha',sa:'Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰',s:93,a:5,ar:'ÙˆÙÙ„ÙØ³ÙÙˆÙ’ÙÙ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙ Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØªÙØ±Ù’Ø¶ÙÙ‰Ù°',ur:'Ø¨Û’ Ø´Ú© ØªÙ…ÛØ§Ø±Ø§ Ø±Ø¨ ØªÙ…ÛÛŒÚº Ø§ØªÙ†Ø§ Ø¯Û’ Ú¯Ø§ Ú©Û ØªÙ… Ø±Ø§Ø¶ÛŒ ÛÙˆ Ø¬Ø§Ø¤ Ú¯Û’',en:'And your Lord is going to give you, and you will be satisfied.',tf:'This divine promise was given to the Prophet in his darkest hour. Allah gives so much that complete satisfaction fills your heart.'},
  {sn:'Ibrahim',sa:'Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…',s:14,a:7,ar:'Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†ÙÙ‘ÙƒÙÙ…Ù’',ur:'Ø§Ú¯Ø± ØªÙ… Ø´Ú©Ø± Ú©Ø±Ùˆ Ú¯Û’ ØªÙˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº Ø§ÙˆØ± Ø²ÛŒØ§Ø¯Û Ø¯ÙˆÚº Ú¯Ø§',en:'If you are grateful, I will surely increase you in favor.',tf:'Gratitude unlocks more blessings. This is Allah\'s direct promise â€” be thankful and receive more.'},
  {sn:'Yusuf',sa:'ÙŠÙÙˆØ³ÙÙ',s:12,a:87,ar:'Ù„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',ur:'Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù†Û ÛÙˆ',en:'Do not despair of relief from Allah.',tf:'Prophet Yaqub said this after years of separation. His hope was rewarded â€” and so will yours.'},
];

const NAMES = [
  {n:1,ar:'Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù',tr:'Ar-Rahman',en:'The Most Gracious',b:'Recite for mercy and compassion in life.'},
  {n:2,ar:'Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù',tr:'Ar-Raheem',en:'The Most Merciful',b:'Recite for forgiveness and endless mercy.'},
  {n:3,ar:'Ø§Ù„Ù’Ù…ÙÙ„ÙÙƒÙ',tr:'Al-Malik',en:'The King',b:'Recite for authority and leadership.'},
  {n:4,ar:'Ø§Ù„Ù’Ù‚ÙØ¯ÙÙ‘ÙˆØ³Ù',tr:'Al-Quddus',en:'The Most Holy',b:'Recite to purify your heart and soul.'},
  {n:5,ar:'Ø§Ù„Ø³ÙÙ‘Ù„Ø§ÙÙ…Ù',tr:'As-Salam',en:'The Source of Peace',b:'Recite for inner peace and safety.'},
  {n:6,ar:'Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†Ù',tr:'Al-Mu\'min',en:'The Guardian of Faith',b:'Recite for protection and security.'},
  {n:7,ar:'Ø§Ù„Ù’Ø¹ÙØ²ÙÙŠØ²Ù',tr:'Al-Aziz',en:'The Almighty',b:'Recite for strength and dignity.'},
  {n:8,ar:'Ø§Ù„Ù’Ø¬ÙØ¨ÙÙ‘Ø§Ø±Ù',tr:'Al-Jabbar',en:'The Compeller',b:'Recite to mend what is broken.'},
  {n:9,ar:'Ø§Ù„Ù’Ø®ÙØ§Ù„ÙÙ‚Ù',tr:'Al-Khaliq',en:'The Creator',b:'Recite when seeking new beginnings.'},
  {n:10,ar:'Ø§Ù„Ù’ØºÙÙÙÙ‘Ø§Ø±Ù',tr:'Al-Ghaffar',en:'The Forgiving',b:'Recite abundantly for forgiveness.'},
  {n:11,ar:'Ø§Ù„Ø±ÙÙ‘Ø²ÙÙ‘Ø§Ù‚Ù',tr:'Ar-Razzaq',en:'The Provider',b:'Recite for sustenance and rizq.'},
  {n:12,ar:'Ø§Ù„Ù’ÙÙØªÙÙ‘Ø§Ø­Ù',tr:'Al-Fattah',en:'The Opener',b:'Recite when doors seem closed.'},
  {n:13,ar:'Ø§ÙÙ„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù',tr:'Al-Alim',en:'The All-Knowing',b:'Recite for knowledge and wisdom.'},
  {n:14,ar:'Ø§Ù„Ù„ÙÙ‘Ø·ÙÙŠÙÙ',tr:'Al-Latif',en:'The Subtle One',b:'Recite for hidden blessings.'},
  {n:15,ar:'Ø§Ù„Ù’Ø­ÙÙƒÙÙŠÙ…Ù',tr:'Al-Hakim',en:'The Wise',b:'Recite for wisdom in decisions.'},
  {n:16,ar:'Ø§Ù„Ù’ÙˆÙØ¯ÙÙˆØ¯Ù',tr:'Al-Wadud',en:'The Loving',b:'Recite for love and harmony.'},
  {n:17,ar:'Ø§Ù„Ø´ÙÙ‘ÙƒÙÙˆØ±Ù',tr:'Ash-Shakur',en:'The Appreciative',b:'Recite to increase blessings.'},
  {n:18,ar:'Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù',tr:'As-Samad',en:'The Eternal',b:'Recite when only Allah can help.'},
  {n:19,ar:'Ø§Ù„Ù†ÙÙ‘ÙˆØ±Ù',tr:'An-Nur',en:'The Light',b:'Recite for guidance and enlightenment.'},
  {n:20,ar:'Ø§Ù„Ù’Ù‡ÙØ§Ø¯ÙÙŠ',tr:'Al-Hadi',en:'The Guide',b:'Recite when you feel lost.'},
  {n:21,ar:'Ø§Ù„ØªÙÙ‘ÙˆÙÙ‘Ø§Ø¨Ù',tr:'At-Tawwab',en:'The Acceptor of Repentance',b:'Recite abundantly when making tawbah.'},
  {n:22,ar:'Ø§Ù„Ø¹ÙÙÙÙˆÙÙ‘',tr:'Al-Afuww',en:'The Pardoner',b:'Recite especially in Laylatul Qadr.'},
  {n:23,ar:'Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘',tr:'Al-Hayy',en:'The Ever-Living',b:'Recite for life, energy and health.'},
  {n:24,ar:'Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù',tr:'Al-Qayyum',en:'The Self-Subsisting',b:'Recite for complete reliance on Allah.'},
  {n:25,ar:'Ø§Ù„Ù’ØºÙÙ†ÙÙŠÙÙ‘',tr:'Al-Ghani',en:'The Self-Sufficient',b:'Recite to remove dependency on others.'},
  {n:26,ar:'Ø§Ù„ØµÙÙ‘Ø¨ÙÙˆØ±Ù',tr:'As-Sabur',en:'The Patient',b:'Recite for patience during hardship.'},
  {n:27,ar:'Ø§Ù„Ù’Ù…ÙØ¬ÙÙŠØ¨Ù',tr:'Al-Mujib',en:'The Responsive',b:'Recite when making dua.'},
  {n:28,ar:'Ø§Ù„Ù’ÙˆÙØ§Ø³ÙØ¹Ù',tr:'Al-Wasi',en:'The All-Encompassing',b:'Recite to remember Allah\'s boundless mercy.'},
  {n:29,ar:'Ø§Ù„Ù’ÙƒÙØ±ÙÙŠÙ…Ù',tr:'Al-Karim',en:'The Most Generous',b:'Recite for generosity and abundance.'},
  {n:30,ar:'Ø§Ù„Ø±ÙÙ‘Ù‚ÙÙŠØ¨Ù',tr:'Ar-Raqib',en:'The Ever-Watchful',b:'Recite to feel Allah\'s presence always.'},
  {n:31,ar:'Ø§Ù„Ù’Ù‚ÙØ±ÙÙŠØ¨Ù',tr:'Al-Qarib',en:'The Near',b:'Recite to feel closeness to Allah.'},
  {n:32,ar:'Ø§Ù„Ù’ÙˆÙÙ„ÙÙŠÙÙ‘',tr:'Al-Wali',en:'The Protecting Friend',b:'Recite for divine friendship and support.'},
  {n:33,ar:'Ø§Ù„Ù’Ù…ÙÙ‚ÙÙŠØªÙ',tr:'Al-Muqit',en:'The Sustainer',b:'Recite for provision and nourishment.'},
];

const DHIKR_LIST = [
  {ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',tr:'SubhanAllah',meaning:'Glory be to Allah',count:33,reward:'Plants a tree in Jannah'},
  {ar:'Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù',tr:'Alhamdulillah',meaning:'All praise be to Allah',count:33,reward:'Fills the scales of good deeds'},
  {ar:'Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù',tr:'Allahu Akbar',meaning:'Allah is the Greatest',count:33,reward:'Beloved to Allah'},
  {ar:'Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù',tr:'La ilaha illallah',meaning:'No god but Allah',count:100,reward:'Best of all dhikr'},
  {ar:'Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',tr:'Astaghfirullah',meaning:'I seek forgiveness',count:100,reward:'Opens doors of mercy'},
  {ar:'Ù„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù',tr:'La hawla wala quwwata',meaning:'No power except Allah',count:100,reward:'Treasure of Jannah'},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const S = {
  tab: 'home',
  home: { query:'', emotion:'', loading:false, results:null, error:'', showHistory:false },
  hadith: { query:'', loading:false, results:null, error:'' },
  names: { search:'', selected:null },
  prayer: { input:'', loading:false, times:null, city:'', error:'', now:new Date() },
  dhikr: { idx:0, count:0, sessions: JSON.parse(localStorage.getItem('noor_dhikr')||'{}') },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STORAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const BM = {
  all: () => JSON.parse(localStorage.getItem('noor_bm')||'[]'),
  has: (s,a) => BM.all().some(b => b.s===s && b.a===a),
  add: x => { const l=BM.all(); if(!BM.has(x.s,x.a)){l.unshift({...x,ts:Date.now()}); localStorage.setItem('noor_bm',JSON.stringify(l)); return true;} return false; },
  rem: (s,a) => localStorage.setItem('noor_bm', JSON.stringify(BM.all().filter(b=>!(b.s===s&&b.a===a)))),
};
const HIST = {
  all: () => JSON.parse(localStorage.getItem('noor_hist')||'[]'),
  add: q => { const h=HIST.all().filter(x=>x!==q).slice(0,7); localStorage.setItem('noor_hist',JSON.stringify([q,...h])); },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GEMINI_MODELS = ['gemini-2.0-flash-lite','gemini-1.5-flash-8b','gemini-1.5-flash','gemini-2.0-flash'];
let lastApiCall = 0;

function getKey() { return localStorage.getItem('noor_gemini_key')||''; }

async function callGemini(key, model, prompt, retry=0) {
  const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`;
  const r = await fetch(url, {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ contents:[{parts:[{text:prompt}]}], generationConfig:{temperature:0.7,maxOutputTokens:2000} })
  });
  if (r.status===429) {
    if (retry<2) { await wait((retry+1)*8000); return callGemini(key,model,prompt,retry+1); }
    throw new Error('RATE_LIMIT');
  }
  if (r.status===401||r.status===403) throw new Error('INVALID_KEY');
  if (r.status===404||r.status===400) throw new Error('MODEL_NOT_FOUND');
  if (!r.ok) throw new Error('ERR_'+r.status);
  const d = await r.json();
  const txt = d.candidates?.[0]?.content?.parts?.[0]?.text;
  if (!txt) throw new Error('NO_TEXT');
  return txt;
}

async function ai(system, msg) {
  if (!navigator.onLine) throw new Error('You are offline');
  const gap = Date.now()-lastApiCall;
  if (gap<3000) await wait(3000-gap);
  lastApiCall = Date.now();
  let key = getKey();
  if (!key) {
    const k = prompt('Enter FREE Gemini API key:\n\nGet it at: aistudio.google.com\n1. Sign in with Google\n2. Click "Get API Key"\n3. Paste here');
    if (k && k.length>10) { localStorage.setItem('noor_gemini_key',k.trim()); key=k.trim(); }
    else throw new Error('API key needed. Get free key at aistudio.google.com');
  }
  const full = system+'\n\nRequest: '+msg;
  for (const model of GEMINI_MODELS) {
    try { return await callGemini(key,model,full); }
    catch(e) { if (e.message==='INVALID_KEY') throw new Error('Invalid API key. Get free key at aistudio.google.com'); continue; }
  }
  throw new Error('AI unavailable right now');
}

function safeJSON(raw, type) {
  const t = raw.replace(/```json\s*/gi,'').replace(/```\s*/g,'').trim();
  const [o,c] = type==='obj' ? ['{','}'] : ['[',']'];
  const s=t.indexOf(o), e=t.lastIndexOf(c);
  if (s===-1||e<=s) throw new Error('No JSON found');
  try { return JSON.parse(t.slice(s,e+1)); }
  catch { return JSON.parse(t.slice(s,e+1).replace(/,\s*[}\]]/g,m=>m[m.length-1])); }
}

function wait(ms) { return new Promise(r=>setTimeout(r,ms)); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OFFLINE SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const KW = {
  sad:['sad','cry','crying','tears','depressed','grief','sorrow','unhappy','pain','lonely','alone','miserable','darkness'],
  anxious:['anxious','anxiety','worry','worried','stress','stressed','nervous','panic','scared','tension','overwhelmed'],
  grateful:['grateful','gratitude','thankful','thanks','blessing','blessed','happy','joy','alhamdulillah','appreciate'],
  lost:['lost','confused','direction','purpose','meaning','path','guide','guidance','decision','unsure','searching'],
  hopeful:['hope','hopeful','future','dream','better','success','positive','waiting','trust'],
  afraid:['afraid','fear','scared','terrified','danger','unsafe','death','sick','illness','dread'],
  peaceful:['peace','peaceful','calm','serene','tranquil','quiet','content','relax','rest','harmony'],
  angry:['angry','anger','rage','furious','mad','frustrated','irritated','betrayed','injustice','unfair'],
  heartbroken:['heartbroken','heartbreak','breakup','rejection','abandoned','unloved','betrayal','devastated'],
  'seeking guidance':['guidance','guide','help','confused','direction','decision','right','wrong','halal','haram','faith'],
};

function detectEmotion(txt) {
  const low = txt.toLowerCase();
  let best=null, top=0;
  for (const [k,ws] of Object.entries(KW)) {
    const c=ws.filter(w=>low.includes(w)).length;
    if (c>top){top=c;best=k;}
  }
  return best;
}

function getAyat(emotion, query) {
  const key = emotion || (query ? detectEmotion(query) : null);
  const pool = (key && AYAT[key]) ? [...AYAT[key]] : Object.values(AYAT).flat();
  return pool.sort(()=>Math.random()-0.5).slice(0,2);
}

function searchHadith(q) {
  if (!q||!q.trim()) return [...HADITH].sort(()=>Math.random()-0.5).slice(0,2);
  const low = q.toLowerCase();
  const words = low.split(/\s+/).filter(w=>w.length>2);
  const scored = HADITH.map(h => {
    const txt = (h.en+' '+h.ex+' '+(h.t||'')).toLowerCase();
    let score = 0;
    if (txt.includes(low)) score+=10;
    words.forEach(w=>{ if(txt.includes(w)) score+=2; if((h.t||'').includes(w)) score+=2; });
    return {...h,score};
  }).filter(h=>h.score>0).sort((a,b)=>b.score-a.score);
  if (scored.length>=1) return scored.slice(0,2);
  return [...HADITH].sort(()=>Math.random()-0.5).slice(0,2);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHARE CARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function shareCard(ayat) {
  const cv=document.createElement('canvas'); cv.width=1080; cv.height=1080;
  const ctx=cv.getContext('2d');
  const bg=ctx.createLinearGradient(0,0,1080,1080);
  bg.addColorStop(0,'#0a2020'); bg.addColorStop(1,'#0d3535');
  ctx.fillStyle=bg; ctx.fillRect(0,0,1080,1080);
  ctx.strokeStyle='rgba(201,168,76,0.4)'; ctx.lineWidth=8; ctx.strokeRect(30,30,1020,1020);
  ctx.font='72px serif'; ctx.textAlign='center'; ctx.fillText('ğŸŒ™',540,140);
  ctx.fillStyle='#e8c97a'; ctx.font='italic 50px Georgia'; ctx.fillText('Noor â€” Ù†ÙˆØ±',540,210);
  ctx.strokeStyle='rgba(201,168,76,0.25)'; ctx.lineWidth=1;
  ctx.beginPath(); ctx.moveTo(150,240); ctx.lineTo(930,240); ctx.stroke();
  ctx.fillStyle='rgba(201,168,76,0.6)'; ctx.font='26px sans-serif';
  ctx.fillText((ayat.sa||'')+'  '+ayat.sn+' '+ayat.s+':'+ayat.a,540,290);
  ctx.fillStyle='#fdf6e3'; ctx.font='36px serif';
  const words=ayat.ar.split(' '); let ln='',y=400,lines=[];
  for (let w of words){const t=ln+w+' ';if(ctx.measureText(t).width>900&&ln){lines.push(ln.trim());ln=w+' ';}else ln=t;}
  lines.push(ln.trim()); lines.forEach(l=>{ctx.fillText(l,540,y);y+=54;});
  ctx.strokeStyle='rgba(201,168,76,0.18)'; ctx.beginPath(); ctx.moveTo(150,y+20); ctx.lineTo(930,y+20); ctx.stroke();
  ctx.fillStyle='rgba(253,246,227,0.65)'; ctx.font='25px sans-serif';
  const ew=ayat.en.split(' '); let el='',ey=y+68,els=[];
  for (let w of ew){const t=el+w+' ';if(ctx.measureText(t).width>860&&el){els.push(el.trim());el=w+' ';}else el=t;}
  els.push(el.trim()); els.forEach(l=>{ctx.fillText(l,540,ey);ey+=40;});
  ctx.fillStyle='rgba(201,168,76,0.3)'; ctx.font='19px sans-serif';
  ctx.fillText('Noor App â€” AI Quranic Guidance',540,980);
  return cv.toDataURL('image/png');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ONBOARDING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let obStep = 0;

function showObSlide(i) {
  const sl = ONBOARD_SLIDES[i];
  document.getElementById('ob-icon').textContent = sl.icon;
  document.getElementById('ob-title').textContent = sl.title;
  document.getElementById('ob-arabic').textContent = sl.arabic;
  document.getElementById('ob-desc').textContent = sl.desc;
  // Dots
  const dots = document.getElementById('ob-dots');
  dots.innerHTML = ONBOARD_SLIDES.map((_,j)=>
    `<div class="ob-dot${j===i?' active':''}" style="width:${j===i?28:8}px"></div>`
  ).join('');
  // Buttons
  const next = document.getElementById('ob-next');
  const back = document.getElementById('ob-back');
  back.style.display = i>0 ? 'inline-block' : 'none';
  if (i < ONBOARD_SLIDES.length-1) { next.textContent='Next â†’'; next.onclick=()=>goOb(i+1); }
  else { next.textContent='ğŸŒ™ Begin Your Journey'; next.onclick=finishOb; }
}

function goOb(i) { obStep=i; showObSlide(i); }

function finishOb() {
  localStorage.setItem('noor_onboarded','1');
  document.getElementById('onboarding').style.display='none';
  document.getElementById('app').classList.add('show');
  initApp();
}

document.getElementById('ob-back').onclick = () => goOb(Math.max(0,obStep-1));
document.getElementById('ob-skip').onclick = finishOb;

// Init onboarding or app
if (localStorage.getItem('noor_onboarded')) {
  document.getElementById('onboarding').style.display='none';
  document.getElementById('app').classList.add('show');
  initApp();
} else {
  showObSlide(0);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function adBanner() {
  const ads = [
    {bg:'#1a3a2a',title:'ğŸ“š Islamic Books',desc:'Authentic books. 10% off with code NOOR',cta:'Shop Now'},
    {bg:'#1a2a3a',title:'âœˆï¸ Umrah Packages',desc:'All-inclusive from Pakistan â€” best price',cta:'Get Quote'},
    {bg:'#2a1a3a',title:'ğŸ“ Learn Quran Online',desc:'1-on-1 certified teachers. First class FREE',cta:'Start Free'},
  ];
  const ad=ads[Math.floor(Math.random()*ads.length)];
  return `<div class="ad-banner" style="background:${ad.bg}">
    <div style="flex:1">
      <div style="font-size:0.55rem;letter-spacing:2px;color:rgba(201,168,76,0.35);font-weight:700;margin-bottom:2px">SPONSORED Â· HALAL AD</div>
      <div style="font-size:0.9rem;font-weight:700;color:#e8c97a;margin-bottom:2px">${ad.title}</div>
      <div style="font-size:0.73rem;color:rgba(253,246,227,0.45)">${ad.desc}</div>
    </div>
    <button class="ad-cta">${ad.cta} â†’</button>
  </div>`;
}

function ayatCard(a) {
  const bm = BM.has(a.s,a.a);
  const id = `bm_${a.s}_${a.a}`;
  return `<div class="ayat-card fade">
    <div class="ayat-meta">
      <div class="ayat-ref"><span style="font-family:'Amiri',serif;font-size:1rem">${a.sa||''}</span> Â· ${a.sn} ${a.s}:${a.a}</div>
      <div class="ayat-actions">
        <button class="action-btn" onclick="playAudio(${a.s},${a.a},this)">â–¶ Play</button>
        <button class="action-btn ${bm?'active':''}" id="${id}" onclick="toggleBM(${JSON.stringify(a).replace(/"/g,'&quot;')})">${bm?'ğŸ”– Saved':'ğŸ”– Save'}</button>
        <button class="action-btn" onclick="shareAyat(${JSON.stringify(a).replace(/"/g,'&quot;')})">ğŸ“¤</button>
      </div>
    </div>
    <div class="ayat-arabic">${a.ar}<div class="ayat-ref-small">[${a.sn} ${a.s}:${a.a}]</div></div>
    <div class="ayat-translations">
      <div class="trans-row">
        <div class="lang-badge">UR</div>
        <div style="flex:1"><div class="trans-label">Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û</div><div class="trans-urdu">${a.ur}</div></div>
      </div>
      <div class="trans-row">
        <div class="lang-badge">EN</div>
        <div style="flex:1"><div class="trans-label">English</div><div class="trans-english">${a.en}</div></div>
      </div>
    </div>
    ${a.tf?`<div class="ayat-tafseer">
      <div class="section-label" style="margin-bottom:8px">Tafseer & Reflection</div>
      <div class="tafseer-text">${a.tf}</div>
      ${a.rl?`<div class="relevance-box">${a.rl}</div>`:''}
    </div>`:''}
  </div>`;
}

function hadithCard(h) {
  return `<div class="hadith-card fade">
    <div class="card-header">
      <div class="ayat-ref"><span style="font-family:'Amiri',serif">${h.ba}</span> Â· ${h.b} #${h.num}</div>
      <div class="grade-badge">${h.g}</div>
    </div>
    <div class="hadith-arabic">${h.ar}</div>
    <div class="hadith-body">
      <div class="trans-row">
        <div class="lang-badge">UR</div>
        <div style="flex:1"><div class="trans-label">Ø§Ø±Ø¯Ùˆ</div><div class="trans-urdu">${h.ur}</div></div>
      </div>
      <div class="trans-row">
        <div class="lang-badge">EN</div>
        <div style="flex:1"><div class="trans-label">English</div><div class="trans-english">${h.en}</div></div>
      </div>
    </div>
    <div class="hadith-explanation">
      <div class="section-label" style="margin-bottom:7px">Explanation</div>
      <div style="font-size:0.87rem;line-height:1.75;color:rgba(253,246,227,0.6)">${h.ex}</div>
    </div>
  </div>`;
}

function loader(text) {
  return `<div class="loader"><div class="spinner spin"></div><div class="loader-text">${text}</div><div class="loader-arabic">Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù</div></div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TABS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TABS = [
  {id:'home',icon:'ğŸ ',label:'Home'},
  {id:'hadith',icon:'ğŸ“œ',label:'Hadith'},
  {id:'names',icon:'âœ¨',label:'Names'},
  {id:'prayer',icon:'ğŸ•Œ',label:'Prayer'},
  {id:'dhikr',icon:'ğŸ“¿',label:'Dhikr'},
  {id:'bookmarks',icon:'ğŸ”–',label:'Saved'},
];

function renderNav() {
  document.getElementById('nav').innerHTML = TABS.map(t=>
    `<button class="nav-btn${S.tab===t.id?' active':''}" onclick="switchTab('${t.id}')">
      <span class="nav-icon">${t.icon}</span>
      <span class="nav-label">${t.label}</span>
      <div class="nav-dot"></div>
    </button>`
  ).join('');
}

function renderContent() {
  const el = document.getElementById('content');
  switch(S.tab) {
    case 'home': el.innerHTML = renderHome(); bindHome(); break;
    case 'hadith': el.innerHTML = renderHadith(); bindHadith(); break;
    case 'names': el.innerHTML = renderNames(); bindNames(); break;
    case 'prayer': el.innerHTML = renderPrayer(); bindPrayer(); break;
    case 'dhikr': el.innerHTML = renderDhikr(); break;
    case 'bookmarks': el.innerHTML = renderBookmarks(); break;
  }
}

function render() { renderNav(); renderContent(); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HOME TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderHome() {
  const h = S.home;
  const hist = HIST.all();
  return `
    <div class="card">
      <div class="section-label" style="margin-bottom:14px">ğŸ” Find Ayat by Emotion or Topic</div>
      <div class="emotion-grid">
        ${EMOTIONS.map(e=>`<button class="emotion-btn${h.emotion===e.k?' active':''}" onclick="toggleEmotion('${e.k}')">${e.e} ${e.l}</button>`).join('')}
      </div>
      <textarea id="searchInput" rows="2" placeholder="Type what you are going throughâ€¦" style="resize:none;display:block">${h.query}</textarea>
      ${h.showHistory&&hist.length?`
        <div class="history-dropdown">
          <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.4);padding:7px 13px 3px;font-weight:700">Recent</div>
          ${hist.map((q,i)=>`<div class="history-item" onclick="useHist(${i})">ğŸ• ${q}</div>`).join('')}
        </div>` : ''}
      <button class="search-btn" onclick="doSearch()">âœ¨ Find Ayat</button>
    </div>

    ${h.loading ? loader('Searching the Holy Quranâ€¦') : ''}
    ${h.error ? `<div class="error-box">âš ï¸ ${h.error}</div>` : ''}
    ${!h.loading&&h.results ? `
      <div style="text-align:center;font-size:0.63rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.4);margin-bottom:14px">
        ${h.emotion&&h.query?`Feeling ${h.emotion} Â· "${h.query}"`:h.emotion?`Feeling ${h.emotion}`:`"${h.query}"`}
      </div>
      ${adBanner()}
      ${h.results.map(a=>ayatCard(a)).join('')}
    ` : ''}
    ${!h.loading&&!h.results&&!h.error ? `
      <div class="empty-state">
        <div class="empty-icon">ğŸ“–</div>
        <div style="font-size:0.95rem">Select an emotion or type a topic above</div>
        <div style="font-family:'Amiri',serif;font-size:1.5rem;color:rgba(201,168,76,0.22);margin-top:10px">Ø§ÙÙ‚Ù’Ø±ÙØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ</div>
      </div>` : ''}
  `;
}

function bindHome() {
  const si = document.getElementById('searchInput');
  if (!si) return;
  si.addEventListener('input', e => {
    S.home.query = e.target.value;
    const should = !e.target.value && HIST.all().length>0;
    if (should !== S.home.showHistory) { S.home.showHistory=should; const c=si.selectionStart; render(); document.getElementById('searchInput')?.focus(); }
  });
  si.addEventListener('focus', () => {
    if (!S.home.query && HIST.all().length>0 && !S.home.showHistory) {
      S.home.showHistory=true; render(); document.getElementById('searchInput')?.focus();
    }
  });
  si.addEventListener('blur', () => setTimeout(()=>{ if(S.home.showHistory){S.home.showHistory=false; render();} },200));
  si.addEventListener('keydown', e => { if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();doSearch();} });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HADITH TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const HADITH_TOPICS = ['patience','prayer','kindness','anger','honesty','parents','charity','knowledge','forgiveness','brotherhood','smile','death','quran','health'];

function renderHadith() {
  const h = S.hadith;
  return `
    <div class="card">
      <div class="section-label" style="margin-bottom:14px">ğŸ“œ Hadith Search</div>
      <div style="display:flex;gap:10px">
        <input type="text" id="hadithInput" value="${h.query}" placeholder="e.g. patience, prayer, kindnessâ€¦">
        <button onclick="doHadith()" style="background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;border-radius:12px;padding:11px 16px;color:#1a1208;font-weight:700;font-size:0.9rem;white-space:nowrap">${h.loading?'â³':'ğŸ” Search'}</button>
      </div>
      <div class="topics">
        ${HADITH_TOPICS.map(t=>`<button class="topic-pill" onclick="quickHadith('${t}')">${t}</button>`).join('')}
      </div>
    </div>

    ${h.loading ? loader('Searching hadith collectionsâ€¦') : ''}
    ${h.error ? `<div class="error-box">âš ï¸ ${h.error}</div>` : ''}
    ${!h.loading&&h.results ? h.results.map(x=>hadithCard(x)).join('')+adBanner() : ''}
    ${!h.loading&&!h.results&&!h.error ? `
      <div class="empty-state">
        <div class="empty-icon">ğŸ“œ</div>
        <div>Search or tap a topic above</div>
      </div>` : ''}
  `;
}

function bindHadith() {
  const hi = document.getElementById('hadithInput');
  if (!hi) return;
  hi.addEventListener('input', e => { S.hadith.query=e.target.value; });
  hi.addEventListener('keydown', e => { if(e.key==='Enter') doHadith(); });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAMES TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderNames() {
  const n = S.names;
  const filtered = NAMES.filter(x =>
    x.tr.toLowerCase().includes(n.search.toLowerCase()) ||
    x.en.toLowerCase().includes(n.search.toLowerCase()) ||
    x.ar.includes(n.search)
  );
  return `
    <div class="card">
      <div class="section-label" style="margin-bottom:14px">âœ¨ 99 Names of Allah â€” Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰</div>
      <input type="text" id="namesSearch" value="${n.search}" placeholder="Search by name or meaningâ€¦">
    </div>
    ${n.selected ? `
      <div class="name-detail">
        <div style="font-family:'Amiri',serif;font-size:3.5rem;color:#e8c97a;margin-bottom:10px">${n.selected.ar}</div>
        <div style="font-size:1.3rem;color:#e8c97a;font-weight:700">${n.selected.tr}</div>
        <div style="font-size:0.9rem;color:rgba(253,246,227,0.5);margin-top:4px">${n.selected.en}</div>
        <div style="font-size:0.85rem;color:rgba(201,168,76,0.75);margin-top:16px;font-style:italic;line-height:1.7">${n.selected.b}</div>
        <button onclick="S.names.selected=null;render()" style="margin-top:14px;background:var(--gold-soft);border:1px solid var(--border);border-radius:8px;padding:6px 16px;color:var(--gold);font-size:0.8rem">âœ• Close</button>
      </div>` : ''}
    <div class="names-grid">
      ${filtered.map(x=>`
        <div class="name-card" onclick="S.names.selected=NAMES.find(n=>n.n===${x.n});render()">
          <div class="name-num">${x.n}</div>
          <div class="name-arabic">${x.ar}</div>
          <div class="name-tr">${x.tr}</div>
          <div class="name-en">${x.en}</div>
        </div>`).join('')}
    </div>
  `;
}

function bindNames() {
  const ns = document.getElementById('namesSearch');
  if (!ns) return;
  ns.addEventListener('input', e => { S.names.search=e.target.value; const c=ns.selectionStart; render(); const n=document.getElementById('namesSearch'); if(n){n.focus();n.setSelectionRange(c,c);} });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRAYER TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPrayer() {
  const p = S.prayer;
  const now = S.prayer.now;
  const nm = now.getHours()*60+now.getMinutes();
  const icons = {Fajr:'ğŸŒ„',Sunrise:'ğŸŒ…',Dhuhr:'â˜€ï¸',Asr:'ğŸŒ¤ï¸',Maghrib:'ğŸŒ‡',Isha:'ğŸŒ™'};
  const next = p.times ? Object.entries(p.times).find(([,t])=>{const[hh,mm]=t.split(':').map(Number);return hh*60+mm>nm;})?.[0]||'Fajr' : null;
  return `
    <div class="card">
      <div class="section-label" style="margin-bottom:14px">ğŸ•Œ Prayer Times</div>
      <div class="time-display" id="clock">${now.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit'})}</div>
      <div class="date-display">${now.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})}</div>
      <div style="display:flex;gap:10px;margin-top:16px">
        <input type="text" id="cityInput" value="${p.input}" placeholder="Enter city â€” e.g. Karachi">
        <button onclick="fetchPrayer()" style="background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;border-radius:12px;padding:11px 14px;color:#1a1208;font-weight:700;font-size:0.82rem;white-space:nowrap">${p.loading?'â³':'Get Times'}</button>
      </div>
      ${p.error?`<div style="color:rgba(255,180,180,0.75);font-size:0.8rem;margin-top:8px">âš ï¸ ${p.error}</div>`:''}
    </div>
    ${p.times ? `
      <div class="card">
        <div style="text-align:center;font-weight:600;color:#e8c97a;margin-bottom:14px">ğŸ“ ${p.city}</div>
        ${next?`<div class="next-badge">
          <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.5);margin-bottom:4px">Next Prayer</div>
          <div style="font-size:1.1rem;color:#e8c97a;font-weight:700">${icons[next]||'ğŸ•Œ'} ${next} â€” ${p.times[next]}</div>
        </div>`:''}
        ${Object.entries(p.times).map(([name,time])=>`
          <div class="prayer-row${next===name?' next':''}">
            <div style="font-size:0.93rem;color:${next===name?'#e8c97a':'var(--text2)'}">${icons[name]||'ğŸ•Œ'} ${name}</div>
            <div style="font-weight:700;font-size:0.95rem;color:${next===name?'#e8c97a':'var(--text2)'}">${time}</div>
          </div>`).join('')}
      </div>` :
      `<div class="empty-state"><div class="empty-icon">ğŸ•Œ</div><div>Enter your city for prayer times</div></div>`
    }
  `;
}

function bindPrayer() {
  const ci = document.getElementById('cityInput');
  if (!ci) return;
  ci.addEventListener('input', e => { S.prayer.input=e.target.value; });
  ci.addEventListener('keydown', e => { if(e.key==='Enter') fetchPrayer(); });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DHIKR TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDhikr() {
  const d = S.dhikr;
  const sel = DHIKR_LIST[d.idx];
  const pct = Math.min((d.count/sel.count)*100,100);
  const r=62, circ=2*Math.PI*r;
  const today = new Date().toDateString();
  const todayStats = DHIKR_LIST.filter(dk => (d.sessions[`${today}_${dk.tr}`]||0)>0);
  return `
    <div class="card dhikr-list">
      <div class="section-label" style="margin-bottom:12px">ğŸ“¿ Choose Dhikr</div>
      ${DHIKR_LIST.map((dk,i)=>`
        <div class="dhikr-item${d.idx===i?' active':''}" onclick="S.dhikr.idx=${i};S.dhikr.count=0;render()">
          <div>
            <div style="font-family:'Amiri',serif;font-size:1.1rem;color:${d.idx===i?'#e8c97a':'var(--text2)'}">${dk.ar}</div>
            <div style="font-size:0.7rem;color:rgba(201,168,76,0.5);margin-top:2px">${dk.tr} Â· ${dk.meaning}</div>
          </div>
          <div style="font-size:0.68rem;color:rgba(201,168,76,0.4)">Ã—${dk.count}</div>
        </div>`).join('')}
    </div>

    <div class="dhikr-counter">
      <div style="font-family:'Amiri',serif;font-size:2rem;color:#e8c97a;margin-bottom:4px">${sel.ar}</div>
      <div style="font-size:0.82rem;color:rgba(201,168,76,0.55);margin-bottom:20px">${sel.meaning}</div>
      <div style="position:relative;width:150px;height:150px;margin:0 auto 18px">
        <svg width="150" height="150" style="transform:rotate(-90deg)">
          <circle cx="75" cy="75" r="${r}" fill="none" stroke="rgba(201,168,76,0.12)" stroke-width="9"/>
          <circle cx="75" cy="75" r="${r}" fill="none" stroke="#c9a84c" stroke-width="9" stroke-linecap="round"
            stroke-dasharray="${circ}" stroke-dashoffset="${circ*(1-pct/100)}" style="transition:stroke-dashoffset 0.3s"/>
        </svg>
        <div style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center">
          <div style="font-size:2.8rem;font-weight:800;color:#e8c97a;line-height:1">${d.count}</div>
          <div style="font-size:0.68rem;color:rgba(201,168,76,0.45);margin-top:3px">of ${sel.count}</div>
        </div>
      </div>
      <button class="dhikr-tap" onclick="tapDhikr()">ğŸ“¿</button>
      <div style="font-size:0.78rem;color:rgba(201,168,76,0.6);font-style:italic;margin-bottom:14px">${sel.reward}</div>
      <button onclick="S.dhikr.count=0;render()" style="background:var(--card);border:1px solid var(--border);border-radius:8px;padding:6px 18px;color:var(--text3);font-size:0.8rem">â†º Reset</button>
      ${todayStats.length?`
        <div style="margin-top:18px;border-top:1px solid var(--border2);padding-top:14px">
          <div class="section-label" style="margin-bottom:10px">Today's Progress</div>
          <div style="display:flex;justify-content:center;gap:16px;flex-wrap:wrap">
            ${todayStats.map(dk=>{const c=d.sessions[`${today}_${dk.tr}`]||0;return`<div style="text-align:center"><div style="font-size:0.75rem;color:var(--gold);font-weight:700">${c}</div><div style="font-size:0.6rem;color:var(--text3)">${dk.tr}</div></div>`;}).join('')}
          </div>
        </div>` : ''}
    </div>
  `;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BOOKMARKS TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderBookmarks() {
  const bm = BM.all();
  if (!bm.length) return `<div class="empty-state"><div class="empty-icon">ğŸ”–</div><div>No saved Ayat yet</div><div style="font-size:0.8rem;margin-top:8px;color:var(--text3)">Tap ğŸ”– Save on any Ayat</div></div>`;
  return `
    <div class="section-label" style="margin-bottom:16px">ğŸ”– Saved Ayat (${bm.length})</div>
    ${bm.map(a=>`${ayatCard(a)}<button onclick="BM.rem(${a.s},${a.a});render()" style="display:block;margin:-8px auto 16px;background:rgba(180,50,50,0.12);border:1px solid rgba(180,50,50,0.25);border-radius:8px;padding:5px 13px;color:rgba(255,140,140,0.65);font-size:0.76rem">ğŸ—‘ Remove</button>`).join('')}
  `;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchTab(t) { S.tab=t; S.home.showHistory=false; render(); window.scrollTo(0,0); }
function toggleEmotion(k) { S.home.emotion=S.home.emotion===k?'':k; render(); }
function useHist(i) { S.home.query=HIST.all()[i]; S.home.showHistory=false; doSearch(); }
function quickHadith(t) { S.hadith.query=t; render(); doHadith(); }

function tapDhikr() {
  const d=S.dhikr; const sel=DHIKR_LIST[d.idx];
  d.count++;
  if (d.count===sel.count) setTimeout(()=>alert(`MashaAllah! ğŸ‰\n${sel.count} Ã— ${sel.tr} completed!\n\n${sel.reward}`),100);
  const today=new Date().toDateString(); const key=`${today}_${sel.tr}`;
  d.sessions[key]=(d.sessions[key]||0)+1;
  localStorage.setItem('noor_dhikr',JSON.stringify(d.sessions));
  render();
}

function toggleBM(a) {
  if (BM.has(a.s,a.a)) BM.rem(a.s,a.a); else BM.add(a);
  render();
}

let currentAudio = null;
function playAudio(s,a,btn) {
  if (currentAudio) { currentAudio.pause(); currentAudio=null; document.querySelectorAll('.audio-playing').forEach(b=>{b.textContent='â–¶ Play';b.classList.remove('audio-playing');}); }
  const url=`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${String(s).padStart(3,'0')}${String(a).padStart(3,'0')}.mp3`;
  currentAudio=new Audio(url);
  btn.textContent='â¹ Stop'; btn.classList.add('audio-playing');
  currentAudio.onended=()=>{btn.textContent='â–¶ Play';btn.classList.remove('audio-playing');currentAudio=null;};
  currentAudio.onerror=()=>{btn.textContent='â–¶ Play';btn.classList.remove('audio-playing');currentAudio=null;};
  currentAudio.play().catch(()=>{btn.textContent='â–¶ Play';});
}

function shareAyat(a) {
  const url=shareCard(a);
  const link=document.createElement('a'); link.href=url; link.download=`noor-${a.s}-${a.a}.png`; link.click();
}

function changeKey() {
  const cur=localStorage.getItem('noor_gemini_key');
  const k=prompt(`Gemini API Key\n\nGet FREE key at: aistudio.google.com\n\nCurrent: ${cur?'****'+cur.slice(-4):'Not set'}\n\nPaste new key:`);
  if (k&&k.length>10) { localStorage.setItem('noor_gemini_key',k.trim()); alert('âœ… Key saved!'); }
}

// Daily Ayat
let dailyLoaded = false;
function openDaily() {
  document.getElementById('dailyModal').style.display='flex';
  if (!dailyLoaded) loadDaily();
}
function closeDaily() { document.getElementById('dailyModal').style.display='none'; }

async function loadDaily() {
  const today=new Date().toDateString();
  try { const c=JSON.parse(localStorage.getItem('noor_daily')||'null'); if(c&&c.date===today){showDaily(c.ayat);return;} } catch{}
  // Offline: pick by day
  const dy=Math.floor((new Date()-(new Date(new Date().getFullYear(),0,0)))/86400000);
  const off=DAILY_POOL[dy%DAILY_POOL.length];
  showDaily(off); localStorage.setItem('noor_daily',JSON.stringify({date:today,ayat:off}));
  dailyLoaded=true;
  // Try AI silently
  if (getKey()) {
    try {
      const raw=await ai('Return ONLY a JSON object with keys: sn (surah name), sa (Arabic surah name), s (surah number int), a (ayat number int), ar (Arabic text), ur (Urdu translation), en (English translation), tf (2 sentence tafseer). No markdown.','Give one uplifting Quran verse for today.');
      const p=safeJSON(raw,'obj');
      if(p&&p.ar){localStorage.setItem('noor_daily',JSON.stringify({date:today,ayat:p}));showDaily(p);}
    } catch {}
  }
}

function showDaily(a) {
  dailyLoaded=true;
  document.getElementById('dailyContent').innerHTML = a ? ayatCard(a) : '<div class="error-box">Could not load. Try again.</div>';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// API ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function doSearch() {
  const h=S.home;
  if (!h.query.trim()&&!h.emotion) return;
  h.loading=true; h.error=''; h.results=null; h.showHistory=false;
  if (h.query.trim()) HIST.add(h.query.trim());
  // Show offline results instantly
  h.results=getAyat(h.emotion,h.query);
  h.loading=false;
  render();
  // Try AI silently
  if (getKey()) {
    try {
      const prompt=h.emotion&&h.query?`Feeling ${h.emotion}, asking: "${h.query}"`:h.emotion?`Feeling ${h.emotion}`:`Topic: "${h.query}"`;
      const raw=await ai('Return ONLY a JSON array of exactly 2 objects. Each has: sn (surah name string), sa (Arabic surah name string), s (surah number int), a (ayat number int), ar (Arabic text), ur (Urdu translation), en (English translation), tf (2 sentence tafseer), rl (1 sentence relevance). No markdown, no extra text.',prompt);
      const p=safeJSON(raw,'arr');
      if(p&&p.length){S.home.results=p;render();}
    } catch(e){console.log('AI search failed:',e.message);}
  }
}

async function doHadith() {
  const h=S.hadith;
  h.loading=true; h.error=''; h.results=null;
  h.results=searchHadith(h.query);
  h.loading=false;
  render();
  if (getKey()&&h.query) {
    try {
      const raw=await ai('Return ONLY a JSON array of exactly 2 hadith objects. Each has: n (narrator string), b (book string), ba (Arabic book name), num (hadith number string), ar (Arabic text), en (English translation), ur (Urdu translation), ex (2 sentence explanation), g (grade: Sahih/Hasan). No markdown.',`Find Hadith about: "${h.query}"`);
      const p=safeJSON(raw,'arr');
      if(p&&p.length){S.hadith.results=p;render();}
    } catch(e){console.log('Hadith AI failed:',e.message);}
  }
}

async function fetchPrayer() {
  const p=S.prayer;
  if (!p.input.trim()) return;
  p.loading=true; p.error=''; render();
  try {
    const d=new Date();
    const r=await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(p.input)}&country=PK&method=1&date=${d.getDate()}-${d.getMonth()+1}-${d.getFullYear()}`);
    const data=await r.json();
    if(data.code!==200) throw new Error('City not found');
    const t=data.data.timings;
    p.times={Fajr:t.Fajr,Sunrise:t.Sunrise,Dhuhr:t.Dhuhr,Asr:t.Asr,Maghrib:t.Maghrib,Isha:t.Isha};
    p.city=p.input;
  } catch { p.error='City not found. Try: Karachi, Lahore, Islamabad'; }
  p.loading=false; render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLOCK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
setInterval(()=>{
  S.prayer.now=new Date();
  if(S.tab==='prayer'){
    const cl=document.getElementById('clock');
    if(cl) cl.textContent=S.prayer.now.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
  }
},1000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initApp() { render(); }
</script>
</body>
</html>
