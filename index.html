<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0d3535">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Noor">
<meta name="description" content="AI-Powered Quranic Guidance - Find Ayat by emotion, search Hadith, 99 Names, Prayer Times & Dhikr">
<title>Noor â€” Ù†ÙˆØ± | AI Quranic Guidance</title>

<!-- Apple touch icons -->
<link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAFnElEQVR4nO3cy3HbQBBF0WeXt14rBgWgDJSR4lBGykMxKAp7NWVKpkh85tPd7561yyaJvpgBCPrH76enPwJM/Vz9AoCVCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWfq1+AdW9vTw87vnzz68f76NeC/5HAJ3sHfRLDP06BHDQmYGXGPooCGCjswPfMPixEMANDH19BHAFg++DAC70GnyJ4c+CAMTgO7MOgMGHZQA9B19i+DOzCqD34Et6f3796PxXYiaLADoP/rskMfg1lA+g0/B/2uIw/HWUDqDD8P+3t2f4aykZwMnB//aCluGvp1wAJ4b/5p0chr+mUgGMGH4Gv7YSAXDWx1HpAzg4/HxxBUnJfxM8cvg5+3tIGwDDjx5SboEODP/mLQ/D7yXdCsDwo6dUATD86C1NACOHH75SBDB6+Dn7+0p5EXzD7rM+w+8t/Aqw4+zP8GO30AEM+AUX8EnYAHYOP2d/HBI2gB2424PDQgYwct8vcfbHP+ECYPgxU6gARg8/8FWoAEbj7I+vwgTA2R8rhAlgI4YfXYUIYOPZ/9Tws/3BNSECAFZZHgBnf6y0PABgpaUBzDj7A7dEXwFODz/bH9yyLAAedUYEkVcAtj4YbkkAs87+bH9wT+QVABhuegDc+UEkrACwFjGALmd/9v/YYmoA3PpENBFXAGCaaAFw8YupogUATDUtAPb/iCjSCtBt+8MdIGwVKQBgOgKAtSkBsP9HVFFWAG5/YokoAQBLEACsEQCsEQCsDQ+AO0CILMIKwB0gLBMhAGAZAoA1AoA1AoC1kgG8vTysfglIomQAwFYEAGsEAGsEAGsEAGtlA+BOELYoGwCwBQHAGgHAWoQAhv1egOsA3DM8gOfXD573R1gRVgBgmfIBsA3CLeUDAG4hAFiLEsDQ/zmCbRC+MyUA7gQhqigrwHCsArjGJgDgmkgB8D/IYbppAUS4DmAbhK8irQDAdNECGL4NYhXApWgBTEEEaKYGEOE6ALgUcQWYcjeIVQBSzACAaaYHsHEbxCqAKexXACLwtiSAaBfDROAr8grAoxEYblkArAKIIPIKIE1eBYjAz9IAIt0RaojAS/QVYAki8LE8gIirgEQELpYHAKwUIgBWAawSIoAdlkRACHWFCWDH9wJLviAjgprCBJABEdQTKoDoq4BEBNWECkAiAsz14/fT05/VL+Kat5eHrQO+9Jmi59ePlf88Tgq3Ahyw9KlRVoNtdpzQpgobwM6nRYkgsLeXh8doT/82YbdATZatUMOW6J927KIOv5QgAClfBJJ3CJfHK/LwS4G3QAc9KsgvyVy3RVH3+t9JsQJIhz7YMGceh9Xg2vGJfvaXEgUg5Y6gqRTDreORYfilZAFINSKQcodw7xhkGX4pYQBSnQiaDDFs/cwzDb+UNADp8MVW+IMTKYa9n3G24ZcSByDVjeDSzCAu7lzt/lwzDr+UPADJI4JrzoRx5xatzfBLBQKQTt17TnvgBjj0GWYefqlIAA0hHGI5+E2pb4JPHJRU3152ZD38UrEApNMRuIRw+L1WGn6p2Bboqw7PpVQ62Kc+i2qD35RbAS51OGgVVoXT76Hq8EvFV4Cm8xOKGYah2/utPPySSQDNgEd1Iw1H1/dWffAbqwCagc+szxyaIe/BZfAbywCaiT/eODNUU16j2+A31gE02X7F1JPr4DcEcMEpBPfBbwjgisohMPifEcANlUJg8K8jgI0yxsDQ30cAB0UMgoHfjwA6WREEA38eAQzWIwwGfRwCgLXST4MC9xAArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArP0FHT28/yVDStkAAAAASUVORK5CYII=">
<link rel="apple-touch-icon" sizes="152x152" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAACYCAYAAAAYwiAhAAAEbklEQVR4nO3dzVFjMRBF4csUW9bEQABkQEbEQUbkQQxEwWxGlIfxwPvRVXdL51tTxUM+tMSzjW/uHh8/BJj8ir4AzI3AYEVgsCIwWBEYrAgMVgQGKwKDFYHBisBgRWCwIjBYERisCAxWBAYrAoMVgcGKwGB1G30BGb0+3z9s/dqnl/c357VUt3xge2JqiGq75QI7EpREVEctEdjRqCTCOmvawM5EJRFWL9MFRli5TBMYYeVUPrCzYUnE5VQ6MKZWfiUD6zC13p5e3rtcC75XLrATcX1OK+Iap0xghFVTicAOxvXX+Yq4YqQP7EBc/xzciStO6sB2xnX1L0LiipUysB5TSyKuDNIF1mNqScSVRapXtPaKC3mkCaxnXEyvPNJtkT/4cWoRVy4pJtjG6UVcBYUH1isu5BQaWM+4mF45hQVGXGsI3yK/wbY4gZDAerwKtWF65TY8MA71a8m4RW6Oi+mV39DANkwvJtdkhgXW89wlMb2qyLRFMr0mNCSw3lsj06uOTBMME7IHxsF+beUmGNtjLdbAmF4oN8FQS2Rgu6cX22M9tsB631hFTVETjLPXIjiDwcoSGNsjmogJdmh75IBfE1skrAgMVt0D++H8xV+Pi2GCwYrAYEVgsCIwWHUNjAM+vmKCwYrAYEVgsCIwWBEYrAgMVmUCe32+j74EHFAmMNREYLAiMFgRGKxKBcZBv55SgaEeAoNV18CeXt6/e0lOl/dKsk3WwgSDFYHBqmRgbJN1lAwMdXQPbMRBX2KKVcEEg1XpwJhi+UUExv8OW4glsB/OYV0xxXIrvUUiv6jAum6TTLG8bIGN3CYlIssqcovksL+Aqc5gTLF8rIFt2Ca7TzEiy2WqCdYQWR72wCKmGPKYcoJJTLEshgQWNcWILF6mCUZkExoW2Ogbr5eILM7QCRZ54CeyGJm2yMYa2eqhjf6oxeGBbdwqrYuwamSvz/cPo48qIRMs8jzWrBZZRFySdDv6G+7wIPOHN7TIZv6w0+hPHw47g2XYKptZp9llXFG7xs3d4+NHxDduNv6GDVucGabZ1zWNPJKEBybli0yqGdq1dYw+76YITMoZmVQjtP+tXXRcUu5D/jVtIYe/ayljaNEH+C3STDBp94KF/XZGxrZ1jTJMLylZYFKdyJoRsf2ZopvXJUtcUsLApEOjP82CSueiu3LLZNdaZIpLShpYU22aGZScWpcyPtn9aeeiPWiel1/v+lmyxiUlD0w6tHiVQ9t97ZnjkgoEJh1exEqhHbrW7HFJyc9g15y495PxwTj0s1QIqykXmNTlBmPkA3Tq2ivFJRUNrOl0J3vEA3b6OquF1ZQOTLI9XXLmwex+PVXjkiYIrKnwvNxelcNqpgmsmSG0GcJqpgusqRjaTGE10wZ2KXNsM0Z1aYnALmWIbfaoLi0X2FcjglspqK+WD+yaM9GtHNM1BAarEk92oy4CgxWBwYrAYEVgsCIwWBEYrAgMVgQGKwKDFYHBisBgRWCwIjBYERisCAxWBAar38Yca/OxkObCAAAAAElFTkSuQmCC">
<link rel="apple-touch-icon" sizes="144x144" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAEGUlEQVR4nO3dzVHjUBBF4cvUbFkTAwE4AzIiDjIiD2IgCtiMqjQqgyX1e/3n821ZjNCc6teyXfjh8XL5EnDSn+gLQG0EBBMCggkBwYSAYEJAMCEgmBAQTAgIJgQEEwKCCQHBhIBgQkAwISCYEBBMCAgmf6MvIIP316fn337+8vb54XUt1dxdQLdiWSOc29oHdCQYiWiOahnQ0WgkwjmrVUCE469FQGfCkYhnhNIBEU68kgGdDUcintFKBWQI50OSXt4+B14NpEIBnYyHcCYrEdDBeP47oohnrtQBWcKRiMdD2oAOxHN1KSYeHynfjSeeOtJNoJ3x/PgoTjy+Uk0g4qknTUDWeBAjxRG2I56b4TB9YoRPIOKpLTQg4qkvLKAR8SBeSECj4mH6xAvfga4gnkLcA7oxfTi2inENyPJBsDWmTx5uAbE095RlB9odD9MnF5eA2Hv6yjKBUNT0gEZOH46vfCInEEdXA1MDGvXYLjF9soqaQEyfJqYFNHL6IK+ICcT0aWRKQKOnD/tPXrwOBBPvgDi+mhkeEMvzffGcQEyfhtLvQCzQuaUPCLkNDYj95/54TSD2n6Y4wmBCQDAhIJgMC4gF+j55TCAW6MY4wmBCQDAhIJgQEEzSB/T++hR9CfhF+oCQGwHBhIBgQkAwKREQi3ReJQJCXgQEE4+AeJe+sWEBzf46bfagnDjCYFIqIKZQPqUCQj5eAbFINzU0oNmLtMQxlg1HGExKBsQUysMzIPaghoYH5LEHSUyhLLyPsKFTiIjildyBkMeUgLyOMYkpFC1iAg1fpokozrSAPKeQRERRonYgHumbmBoQU6i/yKewKVOIiHxND+jGFCKi4tq+DkREPlwCiphCEhF5yDKBiKioh8fL5cvrH9vxhzinPrXxvRvjuU4g78f6LabReO5HWNQ+tCCisbLsQGsuEXUL6f316Tnib3WHBLTjKHO5EV0iWsKJWBFcl+it6KV6reKCvb5/UftlaEBSroikGiFt71nkw0l4QFK+iBaZYvrpHkU/2aYISNr9ZS13F9Jv9yU6HilRQFLuiNZmBvVvsb95HzLEIyULSKoT0daZqH54CiwTj5QwIOnQd4+luZED7PqdM8Uj5Xwh8chN6vLR2JLxSEkDkg5HVDWk3deeMR4p6RG2dfAl+pQ3emP375M1nEWJgKTT38ma6eYfvv7s8UiJj7Ctkzczw/F26hoqxCMVmkBrA951nvmfY7q2KuEsSga0GPzxhbMTbohq4SxKB7So/J31VcNZtAhoUSmk6uEsWgW0yBxSl3AWLQNayxBTt2jW2ge05RFU52C27i6gayxR3VMs1xAQTMq8Eo2cCAgmBAQTAoIJAcGEgGBCQDAhIJgQEEwICCYEBBMCggkBwYSAYEJAMCEgmHwDFH1Q9nQCFZoAAAAASUVORK5CYII=">

<!-- Manifest inline via JS -->
<script>
  const manifestData = {
    name: "Noor â€” AI Quranic Guidance",
    short_name: "Noor Ù†ÙˆØ±",
    description: "Find the perfect Ayat for your emotions. AI-powered Quran, Hadith, 99 Names, Prayer Times & Dhikr.",
    start_url: "./",
    display: "standalone",
    background_color: "#071e1e",
    theme_color: "#0d3535",
    orientation: "portrait-primary",
    categories: ["lifestyle", "religion", "education"],
    icons: [
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAACEUlEQVR4nO2bzXGDMBCFnzO55kwNLsAduCPqcEf04RpcRXKJMgoDfot2VyCx39EHkL95qz+ky9ft9o1glY+9G3B0QhAhBBFCECEEEUIQIQQRQhDhc8+XT+Nwnf92f7yee7RljeqClqQAxxOTqCJoTQpwXDEJV0HvxADHlwM4Cnoj53l/vLxea465oHdiAKAlOYCxoBU5f2XUmhzAcB7UoxzAKEELcv51vq3KAQwSxOS0jkqQRE7L6QEUgs4gB7DrpLsqq5wiQWyGDPSRHqBAUO+d8hxtiS3K6SU9wEZBktLqDU2Cui6tRGy5EsSCZuW1mp6e+h8gEkQJQQSRoDOOXomSBJ1i9EpEiRFCECEEEUIQwVzQNA7Wj9yVSBAhBBFCEKFEEJ1V99QPiQS1cArDC7cS6yVF0QcRxIJmZSZa3feQIvcEtS5JI+gUe0SbBJWOZi2nSFti4hS1KmmzoIUUdS2pKEGaiWNrkqxGsU0d9jQO1UWVfngoFqQptUQtSdM4XEtTf9HeerY6DuPxRTa1TdMlqAXlDckobpCFqLw92oW2iSCAn5MuRSLst1RdrlaZCQL8JAlwu3dmuhZbadQVfsuSxWdb7l+ZJiiHXWpRUu1SnpsgQDz3kPwpyalal1J2FZTwPB3ivR1cRVCOhayae+TVBeVskbXXh4NdBbVAbNoTQhAhBBFCECEEEUIQIQQRfgBN6q5TqAyaqQAAAABJRU5ErkJggg==", "sizes": "72x72", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAClUlEQVR4nO2dwVXDMBBEJzyunKmBAtJBOkod6Sh9pAaqgANPxBDb8Uq7O0o0/8iB2PO1K0fCYve2339B0HhhX8DoSAAZCSAjAWQkgIwEkJEAMhJARgLISAAZCSDzyr4AC+fj+8fczw+nz0v2tXjRrYClsAuPHPqUrgTcCx14nuALXQgYMfgCVcCW4IHnDR8gCVDwV9IFbAj/AgCH02fC1fBJFXAn/N/RPkr4QJKArcEDY4UPJHwTVvjrhFbASvg3k+uI4QOBFaDwtxEiQOFvx12AJXyRtxw9G/7oox9wFrAw+hX+Cm4CLOGLKy4CrOFr9F/RliSZZgEa/W1EVID6voEmAVvX9cUy3hWwOvrVfm6pFqDR74NnBaj3V6DHUDJVAmraj/r/PF4VoPZTiVoQGQkgIwFkzAJmJmD1/wZUAWQkgIwEkJEAMhJAJk3A+fie9VEPhSqAjASQkQAyqQI0D9xiFjDz4py2JhtQCyKTLkBt6C+qADJeAkzzgKrgSpWAEd5gz4LWglQFP3gKMD+OSkKDALUhH7xbkKrASJMAryoYWULEJFy1NDGqhGYBC1UgCRvp7pvwaBJcBHhWATCWBLcKkIQ6XFtQhITeRHi/mpU1BzRddC8SIt6L20X8H7HII2sYb9pM78d7BSBEABB/blCGiP/3ELH8EiYAyDu8yVNG9gntoQIA26mJXliETOaXxeuMXHgMFwBwJBihhA8kCSh0KIIWfCF1KeLOTX0g72+MVj8rc68jtQIKhudpzyC6PLGdIqBQ8cXGEo7pd7N2+KgCCsyTV9hbq10IKGSKYAdf6ErAlAgZvYQ+pVsBc1ik9Bj2HA8l4BnpbktyNCSAjASQkQAyEkBGAshIABkJICMBZCSAzDdvwODhmaQEPgAAAABJRU5ErkJggg==", "sizes": "96x96", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAADrklEQVR4nO2dy1HsMBBFG4ota2KYACYDMiIOMiIPYiAK3kqvzNR8ZEn9c5+zpmpk36Mr2bjsp9fz+VegLM/eAwBfEKA4CFAcBCgOAhQHAYqDAMVBgOIgQHEQoDgIUBwEKA4CFAcBioMAxXnxHoAVXx9vp0d/8/75820xlkgcUoCesBsVQ99yCAH2BN6oHnwjtQAEP086AUZCFyH4W6QRgOB1CC/AaPAihN9DaAGY9fqEFGAw+G8RkffPn8WjOTbhBBgI//9sJ/z9hBJgZ/h/ap7wxwghwEzwIoQ/g7sAO8K/urEj/Dlc/xtI+P64NUBn+Dcv5wh/DS4NQPhxMBeA8GNhKsBs+LCeaI+E3Q2f2b8eMwE6Zj/hO2AiwGz4oIe6ACvCZ/br4b0HYOY7oyrAg9nfFT6zXxc1AWae5AE7vJYAZn8QVARYUf1gg/cm8CbMfhuWC8Dsz0XYBgAbLAXonv3Uvx1LBeDSLx9WDcDaH5RlAjD7c2LRAMz+wIS7CmADaEs4AcCWJQLcWf+p/+DQAMVBgOIgQHEQoDjTArABzA0NUBwEKA4CFAcBioMAxQknwNfHm/cQShFOALAFAYqDAMVBgOKEFICNoB0hBQA7pgW4825+nhJOQNgGYBmwIawAYENoAWgBfUILAPosEUBzI0gL6EIDFCeFALSAHhYCcD8gMMsE0P5YIy2gg9USsKQFkGA9SwXgk635sNwE0gIBSXEVcAkSrGO5AA+WgWVXBEiwhpQN0ECCeVQEsGoBESSYxasBkCAIagJYXxIiwRiqDWC5FIggwQjem0AkeID2G1ifXs/nX80fEPH7bmDml062c6a9lJo0QMdBqFietQ2swhcxaoCG5xdEM7TB9vxYbaJfLH5kBydRkqC1QUQRPN+0btoAInE+IR9BhFvnwvIS2lwAkTgSiPiIcO/4re+fuAggEkuChqYMPcfr8TyFmwAiu9Y+twdNRqS4uProOkavh2lcBRDJIcEEocMX8b8TuOfgT5LnCePusXo/RufeAFt2Xg5FbITu8XsH33BvgC07T0qkRtg1lijhiwQTQGTo5HiKsPu3I4UvEmwJuGTiDpnmSR4aU7TgG6EFEFl6m3QkgCW/HTV8kQQCNDJ+mTRy8I00AjQyiJAh+EY6AbZEkiFT6FtSC9DwFCFr8I1DCHCJphDZA7/kkAJcY0SKo4V9jTICwHXC3QkEWxCgOAhQHAQoDgIUBwGKgwDFQYDiIEBxEKA4CFAcBCgOAhQHAYrzD/uQMv0JX86hAAAAAElFTkSuQmCC", "sizes": "128x128", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAEGUlEQVR4nO3dzVHjUBBF4cvUbFkTAwE4AzIiDjIiD2IgCtiMqjQqgyX1e/3n821ZjNCc6teyXfjh8XL5EnDSn+gLQG0EBBMCggkBwYSAYEJAMCEgmBAQTAgIJgQEEwKCCQHBhIBgQkAwISCYEBBMCAgmf6MvIIP316fn337+8vb54XUt1dxdQLdiWSOc29oHdCQYiWiOahnQ0WgkwjmrVUCE469FQGfCkYhnhNIBEU68kgGdDUcintFKBWQI50OSXt4+B14NpEIBnYyHcCYrEdDBeP47oohnrtQBWcKRiMdD2oAOxHN1KSYeHynfjSeeOtJNoJ3x/PgoTjy+Uk0g4qknTUDWeBAjxRG2I56b4TB9YoRPIOKpLTQg4qkvLKAR8SBeSECj4mH6xAvfga4gnkLcA7oxfTi2inENyPJBsDWmTx5uAbE095RlB9odD9MnF5eA2Hv6yjKBUNT0gEZOH46vfCInEEdXA1MDGvXYLjF9soqaQEyfJqYFNHL6IK+ICcT0aWRKQKOnD/tPXrwOBBPvgDi+mhkeEMvzffGcQEyfhtLvQCzQuaUPCLkNDYj95/54TSD2n6Y4wmBCQDAhIJgMC4gF+j55TCAW6MY4wmBCQDAhIJgQEEzSB/T++hR9CfhF+oCQGwHBhIBgQkAwKREQi3ReJQJCXgQEE4+AeJe+sWEBzf46bfagnDjCYFIqIKZQPqUCQj5eAbFINzU0oNmLtMQxlg1HGExKBsQUysMzIPaghoYH5LEHSUyhLLyPsKFTiIjildyBkMeUgLyOMYkpFC1iAg1fpokozrSAPKeQRERRonYgHumbmBoQU6i/yKewKVOIiHxND+jGFCKi4tq+DkREPlwCiphCEhF5yDKBiKioh8fL5cvrH9vxhzinPrXxvRvjuU4g78f6LabReO5HWNQ+tCCisbLsQGsuEXUL6f316Tnib3WHBLTjKHO5EV0iWsKJWBFcl+it6KV6reKCvb5/UftlaEBSroikGiFt71nkw0l4QFK+iBaZYvrpHkU/2aYISNr9ZS13F9Jv9yU6HilRQFLuiNZmBvVvsb95HzLEIyULSKoT0daZqH54CiwTj5QwIOnQd4+luZED7PqdM8Uj5Xwh8chN6vLR2JLxSEkDkg5HVDWk3deeMR4p6RG2dfAl+pQ3emP375M1nEWJgKTT38ma6eYfvv7s8UiJj7Ctkzczw/F26hoqxCMVmkBrA951nvmfY7q2KuEsSga0GPzxhbMTbohq4SxKB7So/J31VcNZtAhoUSmk6uEsWgW0yBxSl3AWLQNayxBTt2jW2ge05RFU52C27i6gayxR3VMs1xAQTMq8Eo2cCAgmBAQTAoIJAcGEgGBCQDAhIJgQEEwICCYEBBMCggkBwYSAYEJAMCEgmHwDFH1Q9nQCFZoAAAAASUVORK5CYII=", "sizes": "144x144", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAACYCAYAAAAYwiAhAAAEbklEQVR4nO3dzVFjMRBF4csUW9bEQABkQEbEQUbkQQxEwWxGlIfxwPvRVXdL51tTxUM+tMSzjW/uHh8/BJj8ir4AzI3AYEVgsCIwWBEYrAgMVgQGKwKDFYHBisBgRWCwIjBYERisCAxWBAYrAoMVgcGKwGB1G30BGb0+3z9s/dqnl/c357VUt3xge2JqiGq75QI7EpREVEctEdjRqCTCOmvawM5EJRFWL9MFRli5TBMYYeVUPrCzYUnE5VQ6MKZWfiUD6zC13p5e3rtcC75XLrATcX1OK+Iap0xghFVTicAOxvXX+Yq4YqQP7EBc/xzciStO6sB2xnX1L0LiipUysB5TSyKuDNIF1mNqScSVRapXtPaKC3mkCaxnXEyvPNJtkT/4cWoRVy4pJtjG6UVcBYUH1isu5BQaWM+4mF45hQVGXGsI3yK/wbY4gZDAerwKtWF65TY8MA71a8m4RW6Oi+mV39DANkwvJtdkhgXW89wlMb2qyLRFMr0mNCSw3lsj06uOTBMME7IHxsF+beUmGNtjLdbAmF4oN8FQS2Rgu6cX22M9tsB631hFTVETjLPXIjiDwcoSGNsjmogJdmh75IBfE1skrAgMVt0D++H8xV+Pi2GCwYrAYEVgsCIwWHUNjAM+vmKCwYrAYEVgsCIwWBEYrAgMVmUCe32+j74EHFAmMNREYLAiMFgRGKxKBcZBv55SgaEeAoNV18CeXt6/e0lOl/dKsk3WwgSDFYHBqmRgbJN1lAwMdXQPbMRBX2KKVcEEg1XpwJhi+UUExv8OW4glsB/OYV0xxXIrvUUiv6jAum6TTLG8bIGN3CYlIssqcovksL+Aqc5gTLF8rIFt2Ca7TzEiy2WqCdYQWR72wCKmGPKYcoJJTLEshgQWNcWILF6mCUZkExoW2Ogbr5eILM7QCRZ54CeyGJm2yMYa2eqhjf6oxeGBbdwqrYuwamSvz/cPo48qIRMs8jzWrBZZRFySdDv6G+7wIPOHN7TIZv6w0+hPHw47g2XYKptZp9llXFG7xs3d4+NHxDduNv6GDVucGabZ1zWNPJKEBybli0yqGdq1dYw+76YITMoZmVQjtP+tXXRcUu5D/jVtIYe/ayljaNEH+C3STDBp94KF/XZGxrZ1jTJMLylZYFKdyJoRsf2ZopvXJUtcUsLApEOjP82CSueiu3LLZNdaZIpLShpYU22aGZScWpcyPtn9aeeiPWiel1/v+lmyxiUlD0w6tHiVQ9t97ZnjkgoEJh1exEqhHbrW7HFJyc9g15y495PxwTj0s1QIqykXmNTlBmPkA3Tq2ivFJRUNrOl0J3vEA3b6OquF1ZQOTLI9XXLmwex+PVXjkiYIrKnwvNxelcNqpgmsmSG0GcJqpgusqRjaTGE10wZ2KXNsM0Z1aYnALmWIbfaoLi0X2FcjglspqK+WD+yaM9GtHNM1BAarEk92oy4CgxWBwYrAYEVgsCIwWBEYrAgMVgQGKwKDFYHBisBgRWCwIjBYERisCAxWBAar38Yca/OxkObCAAAAAElFTkSuQmCC", "sizes": "152x152", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAFnElEQVR4nO3cy3HbQBBF0WeXt14rBgWgDJSR4lBGykMxKAp7NWVKpkh85tPd7561yyaJvpgBCPrH76enPwJM/Vz9AoCVCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWCADWfq1+AdW9vTw87vnzz68f76NeC/5HAJ3sHfRLDP06BHDQmYGXGPooCGCjswPfMPixEMANDH19BHAFg++DAC70GnyJ4c+CAMTgO7MOgMGHZQA9B19i+DOzCqD34Et6f3796PxXYiaLADoP/rskMfg1lA+g0/B/2uIw/HWUDqDD8P+3t2f4aykZwMnB//aCluGvp1wAJ4b/5p0chr+mUgGMGH4Gv7YSAXDWx1HpAzg4/HxxBUnJfxM8cvg5+3tIGwDDjx5SboEODP/mLQ/D7yXdCsDwo6dUATD86C1NACOHH75SBDB6+Dn7+0p5EXzD7rM+w+8t/Aqw4+zP8GO30AEM+AUX8EnYAHYOP2d/HBI2gB2424PDQgYwct8vcfbHP+ECYPgxU6gARg8/8FWoAEbj7I+vwgTA2R8rhAlgI4YfXYUIYOPZ/9Tws/3BNSECAFZZHgBnf6y0PABgpaUBzDj7A7dEXwFODz/bH9yyLAAedUYEkVcAtj4YbkkAs87+bH9wT+QVABhuegDc+UEkrACwFjGALmd/9v/YYmoA3PpENBFXAGCaaAFw8YupogUATDUtAPb/iCjSCtBt+8MdIGwVKQBgOgKAtSkBsP9HVFFWAG5/YokoAQBLEACsEQCsEQCsDQ+AO0CILMIKwB0gLBMhAGAZAoA1AoA1AoC1kgG8vTysfglIomQAwFYEAGsEAGsEAGsEAGtlA+BOELYoGwCwBQHAGgHAWoQAhv1egOsA3DM8gOfXD573R1gRVgBgmfIBsA3CLeUDAG4hAFiLEsDQ/zmCbRC+MyUA7gQhqigrwHCsArjGJgDgmkgB8D/IYbppAUS4DmAbhK8irQDAdNECGL4NYhXApWgBTEEEaKYGEOE6ALgUcQWYcjeIVQBSzACAaaYHsHEbxCqAKexXACLwtiSAaBfDROAr8grAoxEYblkArAKIIPIKIE1eBYjAz9IAIt0RaojAS/QVYAki8LE8gIirgEQELpYHAKwUIgBWAawSIoAdlkRACHWFCWDH9wJLviAjgprCBJABEdQTKoDoq4BEBNWECkAiAsz14/fT05/VL+Kat5eHrQO+9Jmi59ePlf88Tgq3Ahyw9KlRVoNtdpzQpgobwM6nRYkgsLeXh8doT/82YbdATZatUMOW6J927KIOv5QgAClfBJJ3CJfHK/LwS4G3QAc9KsgvyVy3RVH3+t9JsQJIhz7YMGceh9Xg2vGJfvaXEgUg5Y6gqRTDreORYfilZAFINSKQcodw7xhkGX4pYQBSnQiaDDFs/cwzDb+UNADp8MVW+IMTKYa9n3G24ZcSByDVjeDSzCAu7lzt/lwzDr+UPADJI4JrzoRx5xatzfBLBQKQTt17TnvgBjj0GWYefqlIAA0hHGI5+E2pb4JPHJRU3152ZD38UrEApNMRuIRw+L1WGn6p2Bboqw7PpVQ62Kc+i2qD35RbAS51OGgVVoXT76Hq8EvFV4Cm8xOKGYah2/utPPySSQDNgEd1Iw1H1/dWffAbqwCagc+szxyaIe/BZfAbywCaiT/eODNUU16j2+A31gE02X7F1JPr4DcEcMEpBPfBbwjgisohMPifEcANlUJg8K8jgI0yxsDQ30cAB0UMgoHfjwA6WREEA38eAQzWIwwGfRwCgLXST4MC9xAArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArBEArP0FHT28/yVDStkAAAAASUVORK5CYII=", "sizes": "192x192", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,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", "sizes": "384x384", "type": "image/png", "purpose": "any maskable"},
    {"src": "data:image/png;base64,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", "sizes": "512x512", "type": "image/png", "purpose": "any maskable"}
    ]
  };
  const blob = new Blob([JSON.stringify(manifestData)], {type: 'application/json'});
  const manifestURL = URL.createObjectURL(blob);
  const link = document.createElement('link');
  link.rel = 'manifest'; link.href = manifestURL;
  document.head.appendChild(link);
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { font-family: Georgia, serif; background: #071e1e; color: #fdf6e3; overscroll-behavior: none; }
#app { min-height: 100vh; min-height: -webkit-fill-available; }

/* Safe area for notch phones */
.header { padding-top: max(22px, env(safe-area-inset-top)); }
.bottom-nav { padding-bottom: max(12px, env(safe-area-inset-bottom)); }

/* Install Banner */
#installBanner {
  display: none; position: fixed; top: 0; left: 0; right: 0; z-index: 9999;
  background: linear-gradient(135deg, #c9a84c, #a8722a);
  padding: max(14px, env(safe-area-inset-top)) 16px 14px;
  align-items: center; gap: 12px; flex-wrap: wrap;
}
#installBanner.show { display: flex; }
#installBanner p { flex: 1; font-family: sans-serif; font-size: 0.85rem; color: #1a1208; font-weight: 600; }
#installBtn { background: #1a1208; color: #c9a84c; border: none; border-radius: 8px; padding: 8px 16px; font-weight: 800; font-size: 0.82rem; cursor: pointer; font-family: sans-serif; white-space: nowrap; }
#dismissBtn { background: none; border: none; color: rgba(26,18,8,0.6); font-size: 1.2rem; cursor: pointer; padding: 4px; }

/* Offline Banner */
#offlineBanner {
  display: none; position: fixed; bottom: 72px; left: 16px; right: 16px; z-index: 500;
  background: rgba(180,50,50,0.9); border-radius: 10px; padding: 10px 16px;
  font-family: sans-serif; font-size: 0.82rem; color: white; text-align: center;
  backdrop-filter: blur(8px);
}
#offlineBanner.show { display: block; }

/* Update Banner */
#updateBanner {
  display: none; position: fixed; top: 0; left: 0; right: 0; z-index: 9998;
  background: #0d3535; border-bottom: 1px solid rgba(201,168,76,0.3);
  padding: 10px 16px; align-items: center; gap: 10px;
  font-family: sans-serif; font-size: 0.82rem; color: rgba(253,246,227,0.8);
}
#updateBanner.show { display: flex; }
#updateBtn { background: rgba(201,168,76,0.2); border: 1px solid rgba(201,168,76,0.4); color: #c9a84c; border-radius: 6px; padding: 4px 12px; cursor: pointer; font-size: 0.78rem; margin-left: auto; font-family: sans-serif; }

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes floatPulse { 0%,100%{transform:translateY(0) scale(1);box-shadow:0 4px 20px rgba(201,168,76,0.45)} 50%{transform:translateY(-5px) scale(1.06);box-shadow:0 8px 30px rgba(201,168,76,0.72)} }
@keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
@keyframes slideUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)} }
.fade-up { animation: fadeUp 0.45s ease both; }
input::placeholder, textarea::placeholder { color: rgba(253,246,227,0.26); }
::-webkit-scrollbar { width: 0px; }
button { -webkit-appearance: none; }
input, textarea { -webkit-appearance: none; border-radius: 12px; }
</style>
</head>
<body>

<div id="installBanner">
  <p>ğŸŒ™ Install Noor on your phone for the best experience!</p>
  <button id="installBtn">Install App</button>
  <button id="dismissBtn">âœ•</button>
</div>

<div id="offlineBanner">ğŸ“¡ You're offline â€” some features require internet</div>
<div id="updateBanner"><span>ğŸŒ™ New version of Noor available!</span><button id="updateBtn">Update Now</button></div>

<div id="app"></div>

<script>
// â”€â”€â”€ Service Worker Registration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if ('serviceWorker' in navigator) {
  const swCode = `
    const CACHE = 'noor-v1';
    const OFFLINE_ASSETS = ['./', './index.html'];

    self.addEventListener('install', e => {
      e.waitUntil(
        caches.open(CACHE).then(c => c.addAll(OFFLINE_ASSETS)).then(() => self.skipWaiting())
      );
    });

    self.addEventListener('activate', e => {
      e.waitUntil(
        caches.keys().then(keys => Promise.all(
          keys.filter(k => k !== CACHE).map(k => caches.delete(k))
        )).then(() => self.clients.claim())
      );
    });

    self.addEventListener('fetch', e => {
      if (e.request.url.includes('generativelanguage.googleapis.com') || e.request.url.includes('api.aladhan.com') || e.request.url.includes('islamic.network')) {
        e.respondWith(fetch(e.request).catch(() => new Response(JSON.stringify({error:{message:"You are offline"}}), {headers:{'Content-Type':'application/json'}})));
        return;
      }
      e.respondWith(
        caches.match(e.request).then(r => r || fetch(e.request).then(res => {
          const clone = res.clone();
          caches.open(CACHE).then(c => c.put(e.request, clone));
          return res;
        })).catch(() => caches.match('./'))
      );
    });

    self.addEventListener('message', e => {
      if (e.data === 'skipWaiting') self.skipWaiting();
    });
  `;
  const swBlob = new Blob([swCode], {type: 'application/javascript'});
  const swURL = URL.createObjectURL(swBlob);
  navigator.serviceWorker.register(swURL).then(reg => {
    reg.addEventListener('updatefound', () => {
      const newWorker = reg.installing;
      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          document.getElementById('updateBanner').classList.add('show');
        }
      });
    });
  }).catch(err => console.log('SW reg failed:', err));

  document.getElementById('updateBtn').onclick = () => {
    navigator.serviceWorker.ready.then(reg => {
      if (reg.waiting) reg.waiting.postMessage('skipWaiting');
    });
    window.location.reload();
  };
}

// â”€â”€â”€ Install Prompt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  if (!localStorage.getItem('noor_install_dismissed')) {
    setTimeout(() => document.getElementById('installBanner').classList.add('show'), 2000);
  }
});

document.getElementById('installBtn').onclick = async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') localStorage.setItem('noor_installed', '1');
    deferredPrompt = null;
  }
  document.getElementById('installBanner').classList.remove('show');
};

document.getElementById('dismissBtn').onclick = () => {
  document.getElementById('installBanner').classList.remove('show');
  localStorage.setItem('noor_install_dismissed', '1');
};

// â”€â”€â”€ Offline Detection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateOnlineStatus() {
  const banner = document.getElementById('offlineBanner');
  if (!navigator.onLine) banner.classList.add('show');
  else banner.classList.remove('show');
}
window.addEventListener('online', updateOnlineStatus);
window.addEventListener('offline', updateOnlineStatus);

// â”€â”€â”€ APP DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// â”€â”€â”€ Offline Ayat Database â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const AYAT_DB = {"sad": [{"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 286, "arabic": "Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§", "urdu": "Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§", "english": "Allah does not burden a soul beyond that it can bear.", "tafseer": "This verse is a mercy from Allah, assuring us that every hardship we face is within our capacity to endure. Allah knows our limits better than we know ourselves.", "relevance": "When sadness overwhelms you, remember Allah never gives you more than you can handle."}, {"surah_name": "Ash-Sharh", "surah_arabic": "Ø§Ù„Ø´ÙÙ‘Ø±Ù’Ø­", "surah_number": 94, "ayat_number": 6, "arabic": "Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§", "urdu": "Ø¨Û’ Ø´Ú© ØªÚ©Ù„ÛŒÙ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’", "english": "Indeed, with hardship will be ease.", "tafseer": "Allah repeats this promise twice in Surah Ash-Sharh, emphasizing that relief always accompanies difficulty. The ease is not after hardship â€” it is WITH it.", "relevance": "Your sadness carries within it the seed of relief. This is Allah's promise."}, {"surah_name": "Az-Zumar", "surah_arabic": "Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±", "surah_number": 39, "ayat_number": 53, "arabic": "Ù„ÙØ§ ØªÙÙ‚Ù’Ù†ÙØ·ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘Ø­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", "urdu": "Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù…Øª ÛÙˆ", "english": "Do not despair of the mercy of Allah.", "tafseer": "Allah directly addresses those in despair, commanding them not to lose hope. No matter how great your sins or sorrows, Allah's mercy is greater.", "relevance": "Your sadness does not separate you from Allah's mercy â€” it can bring you closer."}, {"surah_name": "Al-Imran", "surah_arabic": "Ø¢Ù„ Ø¹ÙÙ…Ù’Ø±ÙØ§Ù†", "surah_number": 3, "ayat_number": 139, "arabic": "ÙˆÙÙ„ÙØ§ ØªÙÙ‡ÙÙ†ÙÙˆØ§ ÙˆÙÙ„ÙØ§ ØªÙØ­Ù’Ø²ÙÙ†ÙÙˆØ§ ÙˆÙØ£ÙÙ†ØªÙÙ…Ù Ø§Ù„Ù’Ø£ÙØ¹Ù’Ù„ÙÙˆÙ’Ù†Ù", "urdu": "Ú©Ù…Ø²ÙˆØ±ÛŒ Ù…Øª Ø¯Ú©Ú¾Ø§Ø¤ Ø§ÙˆØ± ØºÙ… Ù†Û Ú©Ø±ÙˆØŒ ØªÙ… ÛÛŒ ØºØ§Ù„Ø¨ ÛÙˆ", "english": "Do not weaken and do not grieve, for you will be superior if you are believers.", "tafseer": "This verse was revealed to comfort the believers after a difficult battle. Grief is natural but should not lead to weakness or despair.", "relevance": "Your sadness is temporary â€” your strength as a believer is permanent."}], "anxious": [{"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 155, "arabic": "ÙˆÙØ¨ÙØ´ÙÙ‘Ø±Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù", "urdu": "Ø§ÙˆØ± ØµØ¨Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Ùˆ Ø®ÙˆØ´Ø®Ø¨Ø±ÛŒ Ø¯Û’ Ø¯Ùˆ", "english": "And give good tidings to the patient.", "tafseer": "Allah promises glad tidings specifically to those who endure with patience. Patience in anxiety is an act of worship that brings divine reward.", "relevance": "Your anxiety, when met with patience, is a path to Allah's special reward."}, {"surah_name": "Ar-Ra'd", "surah_arabic": "Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯", "surah_number": 13, "ayat_number": 28, "arabic": "Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù", "urdu": "Ø³Ù† Ù„ÙˆØŒ Ø§Ù„Ù„Û Ú©Û’ Ø°Ú©Ø± Ø³Û’ ÛÛŒ Ø¯Ù„ÙˆÚº Ú©Ùˆ Ø³Ú©ÙˆÙ† Ù…Ù„ØªØ§ ÛÛ’", "english": "Verily, in the remembrance of Allah do hearts find rest.", "tafseer": "This is one of the most powerful verses for anxiety. The prescription for a restless heart is dhikr â€” remembrance of Allah. No medicine or therapy can replace this.", "relevance": "The cure for your anxiety is already given: remember Allah."}, {"surah_name": "At-Talaq", "surah_arabic": "Ø§Ù„Ø·ÙÙ‘Ù„ÙØ§Ù‚", "surah_number": 65, "ayat_number": 3, "arabic": "ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ‡ÙÙˆÙ Ø­ÙØ³Ù’Ø¨ÙÙ‡Ù", "urdu": "Ø§ÙˆØ± Ø¬Ùˆ Ø§Ù„Ù„Û Ù¾Ø± Ø¨Ú¾Ø±ÙˆØ³Û Ú©Ø±Û’ ØªÙˆ ÙˆÛ Ø§Ø³ Ú©Û’ Ù„ÛŒÛ’ Ú©Ø§ÙÛŒ ÛÛ’", "english": "And whoever relies upon Allah â€” then He is sufficient for him.", "tafseer": "Tawakkul â€” complete trust in Allah â€” is the antidote to anxiety. When you truly hand your affairs to Allah, worry loses its power over you.", "relevance": "Place your anxiety in Allah's hands. He is sufficient for you."}, {"surah_name": "Al-Anfal", "surah_arabic": "Ø§Ù„Ù’Ø£ÙÙ†ÙÙØ§Ù„", "surah_number": 8, "ayat_number": 46, "arabic": "ÙˆÙØ§ØµÙ’Ø¨ÙØ±ÙÙˆØ§ Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙØ¹Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù", "urdu": "ØµØ¨Ø± Ú©Ø±ÙˆØŒ Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û ØµØ¨Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Û’ Ø³Ø§ØªÚ¾ ÛÛ’", "english": "Be patient. Indeed, Allah is with the patient.", "tafseer": "Patience in the face of anxiety is not passive â€” it is an active trust in Allah's plan. And with that patience comes Allah's company.", "relevance": "You are not alone in your anxiety â€” Allah is with those who are patient."}], "grateful": [{"surah_name": "Ibrahim", "surah_arabic": "Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…", "surah_number": 14, "ayat_number": 7, "arabic": "Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†ÙÙ‘ÙƒÙÙ…Ù’", "urdu": "Ø§Ú¯Ø± ØªÙ… Ø´Ú©Ø± Ú©Ø±Ùˆ Ú¯Û’ ØªÙˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº Ø§ÙˆØ± Ø²ÛŒØ§Ø¯Û Ø¯ÙˆÚº Ú¯Ø§", "english": "If you are grateful, I will surely increase you in favor.", "tafseer": "This is Allah's direct promise â€” gratitude is a key that unlocks more blessings. Shukr is not just words but a state of the heart that acknowledges Allah's gifts.", "relevance": "Your gratitude today plants the seeds of tomorrow's blessings."}, {"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 152, "arabic": "ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’ ÙˆÙØ§Ø´Ù’ÙƒÙØ±ÙÙˆØ§ Ù„ÙÙŠ ÙˆÙÙ„ÙØ§ ØªÙÙƒÙ’ÙÙØ±ÙÙˆÙ†Ù", "urdu": "Ù¾Ø³ Ù…Ø¬Ú¾Û’ ÛŒØ§Ø¯ Ú©Ø±Ùˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº ÛŒØ§Ø¯ Ú©Ø±ÙˆÚº Ú¯Ø§ Ø§ÙˆØ± Ù…ÛŒØ±Ø§ Ø´Ú©Ø± Ø§Ø¯Ø§ Ú©Ø±Ùˆ", "english": "Remember Me, and I will remember you. Be grateful to Me and do not deny Me.", "tafseer": "The relationship between the believer and Allah is beautifully reciprocal. When you remember Allah with gratitude, He remembers you in His divine presence.", "relevance": "Your gratitude is a conversation with Allah â€” and He responds."}, {"surah_name": "An-Naml", "surah_arabic": "Ø§Ù„Ù†ÙÙ‘Ù…Ù’Ù„", "surah_number": 27, "ayat_number": 40, "arabic": "Ù‡ÙÙ°Ø°ÙØ§ Ù…ÙÙ† ÙÙØ¶Ù’Ù„Ù Ø±ÙØ¨ÙÙ‘ÙŠ Ù„ÙÙŠÙØ¨Ù’Ù„ÙÙˆÙÙ†ÙÙŠ Ø£ÙØ£ÙØ´Ù’ÙƒÙØ±Ù Ø£ÙÙ…Ù’ Ø£ÙÙƒÙ’ÙÙØ±Ù", "urdu": "ÛŒÛ Ù…ÛŒØ±Û’ Ø±Ø¨ Ú©Ø§ ÙØ¶Ù„ ÛÛ’ ØªØ§Ú©Û ÙˆÛ Ù…Ø¬Ú¾Û’ Ø¢Ø²Ù…Ø§Ø¦Û’ Ú©Û Ù…ÛŒÚº Ø´Ú©Ø± Ú©Ø±ØªØ§ ÛÙˆÚº ÛŒØ§ Ù†Ø§Ø´Ú©Ø±ÛŒ", "english": "This is from the favor of my Lord to test me whether I will be grateful or ungrateful.", "tafseer": "Prophet Sulaiman (AS) recognized every blessing as a test of gratitude. The truly grateful see every gift as an opportunity to thank Allah.", "relevance": "Feeling grateful is itself a gift â€” thank Allah for the ability to be thankful."}], "lost": [{"surah_name": "Al-Fatihah", "surah_arabic": "Ø§Ù„Ù’ÙÙØ§ØªÙØ­ÙØ©", "surah_number": 1, "ayat_number": 6, "arabic": "Ø§Ù‡Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù…ÙØ³ØªÙÙ‚ÙÙŠÙ…Ù", "urdu": "ÛÙ…ÛŒÚº Ø³ÛŒØ¯Ú¾Û’ Ø±Ø§Ø³ØªÛ’ Ù¾Ø± Ú†Ù„Ø§", "english": "Guide us to the straight path.", "tafseer": "This is the most recited dua in Islam, repeated 17 times daily. Allah taught us to ask for guidance in every prayer because guidance is the greatest gift.", "relevance": "You recite this dua 17 times a day â€” Allah is already guiding you."}, {"surah_name": "Al-Kahf", "surah_arabic": "Ø§Ù„Ù’ÙƒÙÙ‡Ù’Ù", "surah_number": 18, "ayat_number": 10, "arabic": "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø¢ØªÙÙ†ÙØ§ Ù…ÙÙ† Ù„ÙÙ‘Ø¯ÙÙ†ÙƒÙ Ø±ÙØ­Ù’Ù…ÙØ©Ù‹ ÙˆÙÙ‡ÙÙŠÙÙ‘Ø¦Ù’ Ù„ÙÙ†ÙØ§ Ù…ÙÙ†Ù’ Ø£ÙÙ…Ù’Ø±ÙÙ†ÙØ§ Ø±ÙØ´ÙØ¯Ù‹Ø§", "urdu": "Ø§Û’ ÛÙ…Ø§Ø±Û’ Ø±Ø¨ ÛÙ…ÛŒÚº Ø§Ù¾Ù†Û’ Ù¾Ø§Ø³ Ø³Û’ Ø±Ø­Ù…Øª Ø¹Ø·Ø§ ÙØ±Ù…Ø§ Ø§ÙˆØ± ÛÙ…Ø§Ø±Û’ Ù„ÛŒÛ’ ÛÙ…Ø§Ø±Û’ Ù…Ø¹Ø§Ù…Ù„Û’ Ù…ÛŒÚº Ø¯Ø±Ø³ØªÛŒ Ú©Ø§ Ø³Ø§Ù…Ø§Ù† Ú©Ø±", "english": "Our Lord, grant us mercy and guide us rightly in our affairs.", "tafseer": "The companions of the Cave made this dua when they felt lost and alone. Allah not only guided them but made their story an eternal lesson for all believers.", "relevance": "When you feel lost, this is the dua of those Allah loved most."}, {"surah_name": "Ad-Duha", "surah_arabic": "Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰", "surah_number": 93, "ayat_number": 7, "arabic": "ÙˆÙÙˆÙØ¬ÙØ¯ÙÙƒÙ Ø¶ÙØ§Ù„Ù‹Ù‘Ø§ ÙÙÙ‡ÙØ¯ÙÙ‰Ù°", "urdu": "Ø§ÙˆØ± Ø§Ø³ Ù†Û’ ØªÙ…ÛÛŒÚº Ø¨Ú¾Ù¹Ú©Ø§ ÛÙˆØ§ Ù¾Ø§ÛŒØ§ ØªÙˆ Ø±Ø§Û Ø¯Ú©Ú¾Ø§Ø¦ÛŒ", "english": "And He found you lost and guided you.", "tafseer": "Allah reminded the Prophet (SAW) that He guided him from confusion. This shows that feeling lost is not a failure â€” it is the starting point of divine guidance.", "relevance": "Feeling lost means you are at the exact point where Allah's guidance begins."}, {"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 257, "arabic": "Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙÙ„ÙÙŠÙÙ‘ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙŠÙØ®Ù’Ø±ÙØ¬ÙÙ‡ÙÙ… Ù…ÙÙ‘Ù†Ù Ø§Ù„Ø¸ÙÙ‘Ù„ÙÙ…ÙØ§ØªÙ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù†ÙÙ‘ÙˆØ±Ù", "urdu": "Ø§Ù„Ù„Û Ø§ÛŒÙ…Ø§Ù† ÙˆØ§Ù„ÙˆÚº Ú©Ø§ Ø¯ÙˆØ³Øª ÛÛ’ Ø§Ù†ÛÛŒÚº Ø§Ù†Ø¯Ú¾ÛŒØ±ÙˆÚº Ø³Û’ Ù†Ú©Ø§Ù„ Ú©Ø± Ø±ÙˆØ´Ù†ÛŒ Ù…ÛŒÚº Ù„Ø§ØªØ§ ÛÛ’", "english": "Allah is the ally of those who believe. He brings them out from darknesses into the light.", "tafseer": "Allah personally takes charge of guiding the believers from darkness to light. You are not alone in your lostness â€” your guardian is Allah Himself.", "relevance": "Allah is your guide â€” He is already leading you from darkness to light."}], "hopeful": [{"surah_name": "Yusuf", "surah_arabic": "ÙŠÙÙˆØ³ÙÙ", "surah_number": 12, "ayat_number": 87, "arabic": "Ù„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", "urdu": "Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù†Û ÛÙˆ", "english": "Do not despair of relief from Allah.", "tafseer": "Prophet Yaqub (AS) said this after years of separation from his beloved son. His hope was ultimately rewarded â€” Yusuf was found and the family reunited.", "relevance": "Your hope is well-placed. Allah rewards those who never stop believing."}, {"surah_name": "Az-Zumar", "surah_arabic": "Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±", "surah_number": 39, "ayat_number": 10, "arabic": "Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ ÙŠÙÙˆÙÙÙÙ‘Ù‰ Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙˆÙ†Ù Ø£ÙØ¬Ù’Ø±ÙÙ‡ÙÙ… Ø¨ÙØºÙÙŠÙ’Ø±Ù Ø­ÙØ³ÙØ§Ø¨Ù", "urdu": "ØµØ¨Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Ùˆ Ø§Ù† Ú©Ø§ Ø§Ø¬Ø± Ø¨Û’ Ø­Ø³Ø§Ø¨ Ø¯ÛŒØ§ Ø¬Ø§Ø¦Û’ Ú¯Ø§", "english": "Indeed, the patient will be given their reward without account.", "tafseer": "The reward for patience and hope is so vast that it cannot even be measured. Allah will reward those who maintain hope without limit.", "relevance": "Your hope and patience are building a reward beyond calculation."}, {"surah_name": "Al-Imran", "surah_arabic": "Ø¢Ù„ Ø¹ÙÙ…Ù’Ø±ÙØ§Ù†", "surah_number": 3, "ayat_number": 200, "arabic": "ÙˆÙØ§ØµÙ’Ø¨ÙØ±ÙÙˆØ§ ÙˆÙØµÙØ§Ø¨ÙØ±ÙÙˆØ§ ÙˆÙØ±ÙØ§Ø¨ÙØ·ÙÙˆØ§ ÙˆÙØ§ØªÙÙ‘Ù‚ÙÙˆØ§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ¹ÙÙ„ÙÙ‘ÙƒÙÙ…Ù’ ØªÙÙÙ’Ù„ÙØ­ÙÙˆÙ†Ù", "urdu": "ØµØ¨Ø± Ú©Ø±Ùˆ Ø§ÙˆØ± Ø«Ø§Ø¨Øª Ù‚Ø¯Ù… Ø±ÛÙˆ Ø§ÙˆØ± Ø§Ù„Ù„Û Ø³Û’ ÚˆØ±ØªÛ’ Ø±ÛÙˆ ØªØ§Ú©Û ØªÙ… ÙÙ„Ø§Ø­ Ù¾Ø§Ø¤", "english": "Be patient and persevere. And fear Allah so you may succeed.", "tafseer": "This verse combines patience, perseverance and taqwa as the formula for success. Hope without action is a wish â€” hope with patience is a certainty.", "relevance": "Your hope combined with patience is the exact formula Allah prescribed for success."}], "afraid": [{"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 286, "arabic": "Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§", "urdu": "Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§", "english": "Allah does not burden a soul beyond that it can bear.", "tafseer": "Whatever you fear, know that Allah already measured your capacity. You are strong enough for whatever lies ahead â€” Allah guaranteed it.", "relevance": "The thing you fear is within your power to face â€” Allah made sure of it."}, {"surah_name": "Al-Anfal", "surah_arabic": "Ø§Ù„Ù’Ø£ÙÙ†ÙÙØ§Ù„", "surah_number": 8, "ayat_number": 40, "arabic": "ÙˆÙØ§Ø¹Ù’Ù„ÙÙ…ÙÙˆØ§ Ø£ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙˆÙ’Ù„ÙØ§ÙƒÙÙ…Ù’ Ù†ÙØ¹Ù’Ù…Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’Ù„ÙÙ‰Ù° ÙˆÙÙ†ÙØ¹Ù’Ù…Ù Ø§Ù„Ù†ÙÙ‘ØµÙÙŠØ±Ù", "urdu": "Ø§ÙˆØ± Ø¬Ø§Ù† Ù„Ùˆ Ú©Û Ø§Ù„Ù„Û ØªÙ…ÛØ§Ø±Ø§ Ù…Ø¯Ø¯Ú¯Ø§Ø± ÛÛ’ØŒ ÙˆÛ Ú©ÛŒØ§ Ø§Ú†Ú¾Ø§ Ù…ÙˆÙ„Ø§ Ø§ÙˆØ± Ú©ÛŒØ§ Ø§Ú†Ú¾Ø§ Ù…Ø¯Ø¯Ú¯Ø§Ø± ÛÛ’", "english": "Know that Allah is your protector. Excellent is the protector and excellent is the helper.", "tafseer": "Fear diminishes when we truly internalize that Allah is our protector. He is not just any guardian â€” He is the best guardian that exists.", "relevance": "You have the best protector in existence â€” what is there truly to fear?"}, {"surah_name": "At-Tawbah", "surah_arabic": "Ø§Ù„ØªÙÙ‘ÙˆÙ’Ø¨ÙØ©", "surah_number": 9, "ayat_number": 51, "arabic": "Ù„ÙÙ‘Ù† ÙŠÙØµÙÙŠØ¨ÙÙ†ÙØ§ Ø¥ÙÙ„ÙÙ‘Ø§ Ù…ÙØ§ ÙƒÙØªÙØ¨Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙ†ÙØ§", "urdu": "ÛÙ…ÛŒÚº ÙˆÛÛŒ Ù¾ÛÙ†Ú†Û’ Ú¯Ø§ Ø¬Ùˆ Ø§Ù„Ù„Û Ù†Û’ ÛÙ…Ø§Ø±Û’ Ù„ÛŒÛ’ Ù„Ú©Ú¾ Ø¯ÛŒØ§ ÛÛ’", "english": "Nothing will befall us except what Allah has decreed for us.", "tafseer": "Everything is in Allah's hands. What you fear cannot reach you unless Allah wills it â€” and if He wills it, it comes with a purpose and a reward.", "relevance": "Your fear loses power when you remember nothing happens outside Allah's decree."}], "peaceful": [{"surah_name": "Al-Fajr", "surah_arabic": "Ø§Ù„Ù’ÙÙØ¬Ù’Ø±", "surah_number": 89, "ayat_number": 27, "arabic": "ÙŠÙØ§ Ø£ÙÙŠÙÙ‘ØªÙÙ‡ÙØ§ Ø§Ù„Ù†ÙÙ‘ÙÙ’Ø³Ù Ø§Ù„Ù’Ù…ÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘Ø©Ù", "urdu": "Ø§Û’ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† ÙˆØ§Ù„ÛŒ Ø±ÙˆØ­", "english": "O tranquil soul.", "tafseer": "This is Allah calling out to the peaceful soul â€” it is the highest state a believer can reach in this life. True peace comes from complete surrender to Allah.", "relevance": "The peace you feel is Allah's gift â€” nurture it through dhikr and gratitude."}, {"surah_name": "Ar-Ra'd", "surah_arabic": "Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯", "surah_number": 13, "ayat_number": 28, "arabic": "Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù", "urdu": "Ø³Ù† Ù„Ùˆ Ø§Ù„Ù„Û Ú©Û’ Ø°Ú©Ø± Ø³Û’ Ø¯Ù„ÙˆÚº Ú©Ùˆ Ø³Ú©ÙˆÙ† Ù…Ù„ØªØ§ ÛÛ’", "english": "Verily, in the remembrance of Allah do hearts find rest.", "tafseer": "The secret to lasting peace is dhikr. Not just in moments of distress, but as a constant state of the heart. Peace is not the absence of problems â€” it is the presence of Allah.", "relevance": "Your peace is a sign of a heart that remembers Allah."}, {"surah_name": "Al-Fath", "surah_arabic": "Ø§Ù„Ù’ÙÙØªÙ’Ø­", "surah_number": 48, "ayat_number": 4, "arabic": "Ù‡ÙÙˆÙ Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙÙ†Ø²ÙÙ„Ù Ø§Ù„Ø³ÙÙ‘ÙƒÙÙŠÙ†ÙØ©Ù ÙÙÙŠ Ù‚ÙÙ„ÙÙˆØ¨Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù", "urdu": "ÙˆÛÛŒ ÛÛ’ Ø¬Ø³ Ù†Û’ Ù…ÙˆÙ…Ù†ÙˆÚº Ú©Û’ Ø¯Ù„ÙˆÚº Ù…ÛŒÚº Ø³Ú©ÙˆÙ† Ù†Ø§Ø²Ù„ ÙØ±Ù…Ø§ÛŒØ§", "english": "It is He who sent down tranquility into the hearts of the believers.", "tafseer": "Sakinah â€” divine tranquility â€” is a gift directly sent by Allah into the hearts of believers. It is not earned through effort alone but gifted through faith.", "relevance": "The peace in your heart right now is a direct gift from Allah."}], "angry": [{"surah_name": "Al-Imran", "surah_arabic": "Ø¢Ù„ Ø¹ÙÙ…Ù’Ø±ÙØ§Ù†", "surah_number": 3, "ayat_number": 134, "arabic": "ÙˆÙØ§Ù„Ù’ÙƒÙØ§Ø¸ÙÙ…ÙÙŠÙ†Ù Ø§Ù„Ù’ØºÙÙŠÙ’Ø¸Ù ÙˆÙØ§Ù„Ù’Ø¹ÙØ§ÙÙÙŠÙ†Ù Ø¹ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù", "urdu": "Ø§ÙˆØ± ØºØµÛ Ù¾ÛŒÙ†Û’ ÙˆØ§Ù„Û’ Ø§ÙˆØ± Ù„ÙˆÚ¯ÙˆÚº Ú©Ùˆ Ù…Ø¹Ø§Ù Ú©Ø±Ù†Û’ ÙˆØ§Ù„Û’", "english": "Those who suppress anger and pardon the people â€” Allah loves the doers of good.", "tafseer": "Suppressing anger is listed among the qualities of the people of Paradise. It is not weakness â€” it is the highest form of strength, beloved to Allah.", "relevance": "Controlling your anger right now is an act that Allah Himself loves."}, {"surah_name": "Ash-Shura", "surah_arabic": "Ø§Ù„Ø´ÙÙ‘ÙˆØ±ÙÙ‰", "surah_number": 42, "ayat_number": 37, "arabic": "ÙˆÙØ¥ÙØ°ÙØ§ Ù…ÙØ§ ØºÙØ¶ÙØ¨ÙÙˆØ§ Ù‡ÙÙ…Ù’ ÙŠÙØºÙ’ÙÙØ±ÙÙˆÙ†Ù", "urdu": "Ø§ÙˆØ± Ø¬Ø¨ Ø§Ù†ÛÛŒÚº ØºØµÛ Ø¢ØªØ§ ÛÛ’ ØªÙˆ ÙˆÛ Ù…Ø¹Ø§Ù Ú©Ø± Ø¯ÛŒØªÛ’ ÛÛŒÚº", "english": "When they are angry, they forgive.", "tafseer": "This describes the character of true believers. Forgiveness at the height of anger is one of the greatest spiritual achievements. It transforms anger into mercy.", "relevance": "The highest response to anger is forgiveness â€” and it begins right now."}, {"surah_name": "Al-A'raf", "surah_arabic": "Ø§Ù„Ù’Ø£ÙØ¹Ù’Ø±ÙØ§Ù", "surah_number": 7, "ayat_number": 199, "arabic": "Ø®ÙØ°Ù Ø§Ù„Ù’Ø¹ÙÙÙ’ÙˆÙ ÙˆÙØ£Ù’Ù…ÙØ±Ù’ Ø¨ÙØ§Ù„Ù’Ø¹ÙØ±Ù’ÙÙ ÙˆÙØ£ÙØ¹Ù’Ø±ÙØ¶ Ø¹ÙÙ†Ù Ø§Ù„Ù’Ø¬ÙØ§Ù‡ÙÙ„ÙÙŠÙ†Ù", "urdu": "Ù…Ø¹Ø§ÙÛŒ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±Ùˆ Ø§ÙˆØ± Ù†ÛŒÚ©ÛŒ Ú©Ø§ Ø­Ú©Ù… Ø¯Ùˆ Ø§ÙˆØ± Ø¬Ø§ÛÙ„ÙˆÚº Ø³Û’ Ù…Ù†Û Ù¾Ú¾ÛŒØ± Ù„Ùˆ", "english": "Show forgiveness, enjoin good, and turn away from the ignorant.", "tafseer": "This verse was revealed to guide the Prophet (SAW) in dealing with anger. The divine formula: forgive, promote good, and disengage from those who provoke.", "relevance": "Turn away from what angers you â€” not as weakness, but as divine wisdom."}], "heartbroken": [{"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 216, "arabic": "ÙˆÙØ¹ÙØ³ÙÙ‰Ù° Ø£ÙÙ† ØªÙÙƒÙ’Ø±ÙÙ‡ÙÙˆØ§ Ø´ÙÙŠÙ’Ø¦Ù‹Ø§ ÙˆÙÙ‡ÙÙˆÙ Ø®ÙÙŠÙ’Ø±ÙŒ Ù„ÙÙ‘ÙƒÙÙ…Ù’", "urdu": "Ù…Ù…Ú©Ù† ÛÛ’ Ú©Û ØªÙ… Ú©Ø³ÛŒ Ú†ÛŒØ² Ú©Ùˆ Ù†Ø§Ù¾Ø³Ù†Ø¯ Ú©Ø±Ùˆ Ø§ÙˆØ± ÙˆÛ ØªÙ…ÛØ§Ø±Û’ Ù„ÛŒÛ’ Ø¨ÛØªØ± ÛÙˆ", "english": "Perhaps you dislike a thing and it is good for you.", "tafseer": "Allah sees what we cannot see. What breaks our heart may be the very thing that saves our soul. Trust in Allah's wisdom when your heart cannot understand.", "relevance": "The heartbreak you feel may be Allah redirecting you to something better."}, {"surah_name": "Ad-Duha", "surah_arabic": "Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰", "surah_number": 93, "ayat_number": 5, "arabic": "ÙˆÙÙ„ÙØ³ÙÙˆÙ’ÙÙ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙ Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØªÙØ±Ù’Ø¶ÙÙ‰Ù°", "urdu": "Ø§ÙˆØ± Ø¨Û’ Ø´Ú© ØªÙ…ÛØ§Ø±Ø§ Ø±Ø¨ ØªÙ…ÛÛŒÚº Ø§ØªÙ†Ø§ Ø¯Û’ Ú¯Ø§ Ú©Û ØªÙ… Ø±Ø§Ø¶ÛŒ ÛÙˆ Ø¬Ø§Ø¤ Ú¯Û’", "english": "And your Lord is going to give you, and you will be satisfied.", "tafseer": "This promise was given to the Prophet (SAW) during his darkest moments. Allah does not just heal the pain â€” He replaces it with something so great that you become fully content.", "relevance": "Allah has something prepared for you that will make you forget this pain."}, {"surah_name": "Al-Inshirah", "surah_arabic": "Ø§Ù„Ø´ÙÙ‘Ø±Ù’Ø­", "surah_number": 94, "ayat_number": 5, "arabic": "ÙÙØ¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§", "urdu": "ØªÙˆ Ø¨Û’ Ø´Ú© Ù…Ø´Ú©Ù„ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’", "english": "For indeed, with hardship will be ease.", "tafseer": "The heartbreak is not the end of the story. Ease is already traveling alongside your pain. Allah promised this not once but twice in this Surah.", "relevance": "Ease is already on its way to your broken heart â€” it has not forgotten you."}], "seeking guidance": [{"surah_name": "Al-Fatihah", "surah_arabic": "Ø§Ù„Ù’ÙÙØ§ØªÙØ­ÙØ©", "surah_number": 1, "ayat_number": 6, "arabic": "Ø§Ù‡Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù…ÙØ³ØªÙÙ‚ÙÙŠÙ…Ù", "urdu": "ÛÙ…ÛŒÚº Ø³ÛŒØ¯Ú¾Û’ Ø±Ø§Ø³ØªÛ’ Ù¾Ø± Ú†Ù„Ø§", "english": "Guide us to the straight path.", "tafseer": "This is the master dua for guidance, taught by Allah Himself. Reciting it in salah 17 times daily is a constant renewal of your request for divine guidance.", "relevance": "Seeking guidance is already the first step on the straight path."}, {"surah_name": "Al-Baqarah", "surah_arabic": "Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©", "surah_number": 2, "ayat_number": 2, "arabic": "Ø°ÙÙ°Ù„ÙÙƒÙ Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù Ù„ÙØ§ Ø±ÙÙŠÙ’Ø¨Ù ÙÙÙŠÙ‡Ù Ù‡ÙØ¯Ù‹Ù‰ Ù„ÙÙ‘Ù„Ù’Ù…ÙØªÙÙ‘Ù‚ÙÙŠÙ†Ù", "urdu": "ÛŒÛ ÙˆÛ Ú©ØªØ§Ø¨ ÛÛ’ Ø¬Ø³ Ù…ÛŒÚº Ú©ÙˆØ¦ÛŒ Ø´Ú© Ù†ÛÛŒÚº Ù…ØªÙ‚ÛŒÙ† Ú©Û’ Ù„ÛŒÛ’ ÛØ¯Ø§ÛŒØª ÛÛ’", "english": "This is the Book in which there is no doubt, a guidance for those who are mindful of Allah.", "tafseer": "The Quran is described as guidance from its very second verse. Every answer you seek is within these pages. Turning to the Quran is turning directly to Allah's guidance.", "relevance": "The guidance you seek is in the very Book you are searching right now."}, {"surah_name": "An-Nahl", "surah_arabic": "Ø§Ù„Ù†ÙÙ‘Ø­Ù’Ù„", "surah_number": 16, "ayat_number": 125, "arabic": "Ø§Ø¯Ù’Ø¹Ù Ø¥ÙÙ„ÙÙ‰Ù° Ø³ÙØ¨ÙÙŠÙ„Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø¨ÙØ§Ù„Ù’Ø­ÙÙƒÙ’Ù…ÙØ©Ù ÙˆÙØ§Ù„Ù’Ù…ÙÙˆÙ’Ø¹ÙØ¸ÙØ©Ù Ø§Ù„Ù’Ø­ÙØ³ÙÙ†ÙØ©Ù", "urdu": "Ø§Ù¾Ù†Û’ Ø±Ø¨ Ú©ÛŒ Ø±Ø§Û Ú©ÛŒ Ø·Ø±Ù Ø­Ú©Ù…Øª Ø§ÙˆØ± Ø§Ú†Ú¾ÛŒ Ù†ØµÛŒØ­Øª Ø³Û’ Ø¨Ù„Ø§Ø¤", "english": "Invite to the way of your Lord with wisdom and good instruction.", "tafseer": "Guidance comes through wisdom, beautiful words, and good examples. Seeking guidance with a sincere heart opens doors that nothing else can.", "relevance": "Your sincere search for guidance is itself guidance from Allah."}]};

const KEYWORD_MAP = {
  sad:['sad','cry','crying','tears','depressed','grief','sorrow','unhappy','heartache','loss','alone','lonely','miserable'],
  anxious:['anxious','anxiety','worry','worried','stress','stressed','nervous','panic','scared','tension','uncertain','overwhelmed'],
  grateful:['grateful','gratitude','thankful','thanks','blessing','blessed','happy','joy','alhamdulillah','appreciate','content'],
  lost:['lost','confused','direction','purpose','meaning','path','guide','guidance','decision','unsure','searching','empty'],
  hopeful:['hope','hopeful','future','dream','better','success','opportunity','positive','waiting','patience','trust'],
  afraid:['afraid','fear','scared','terrified','danger','unsafe','death','sick','illness','nightmare','dread'],
  peaceful:['peace','peaceful','calm','serene','tranquil','quiet','content','relax','rest','harmony','mindful'],
  angry:['angry','anger','rage','furious','mad','frustrated','irritated','betrayed','injustice','unfair','wrong'],
  heartbroken:['heartbroken','heartbreak','breakup','rejection','abandoned','unloved','betrayal','separation','devastated','crushed'],
  'seeking guidance':['guidance','guide','help','lost','confused','direction','purpose','decision','right','wrong','halal','haram','faith']
};

function findEmotionFromKeywords(text) {
  const lower = text.toLowerCase();
  let best = null, bestCount = 0;
  for (const [emotion, keywords] of Object.entries(KEYWORD_MAP)) {
    const count = keywords.filter(k => lower.includes(k)).length;
    if (count > bestCount) { bestCount = count; best = emotion; }
  }
  return best;
}

function getOfflineAyat(emotion, query) {
  let key = emotion;
  if (!key && query) key = findEmotionFromKeywords(query);
  if (key && AYAT_DB[key]) {
    return [...AYAT_DB[key]].sort(()=>Math.random()-0.5).slice(0,2);
  }
  return Object.values(AYAT_DB).flat().sort(()=>Math.random()-0.5).slice(0,2);
}

const EMOTIONS = [
  {emoji:"ğŸ˜¢",label:"Sad",key:"sad"},{emoji:"ğŸ˜°",label:"Anxious",key:"anxious"},
  {emoji:"ğŸ¤²",label:"Grateful",key:"grateful"},{emoji:"ğŸŒ«ï¸",label:"Lost",key:"lost"},
  {emoji:"ğŸŒ…",label:"Hopeful",key:"hopeful"},{emoji:"ğŸ˜Ÿ",label:"Afraid",key:"afraid"},
  {emoji:"â˜®ï¸",label:"Peaceful",key:"peaceful"},{emoji:"ğŸ˜ ",label:"Angry",key:"angry"},
  {emoji:"ğŸ’”",label:"Heartbroken",key:"heartbroken"},{emoji:"ğŸ”",label:"Seeking Guidance",key:"seeking guidance"}
];

const DHIKR_LIST = [
  {arabic:"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",tr:"SubhanAllah",meaning:"Glory be to Allah",count:33,reward:"Plants a tree in Jannah"},
  {arabic:"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù",tr:"Alhamdulillah",meaning:"All praise be to Allah",count:33,reward:"Fills the scales of good deeds"},
  {arabic:"Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù",tr:"Allahu Akbar",meaning:"Allah is the Greatest",count:33,reward:"Beloved to Allah"},
  {arabic:"Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù",tr:"La ilaha illallah",meaning:"No god but Allah",count:100,reward:"Best of all dhikr"},
  {arabic:"Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",tr:"Astaghfirullah",meaning:"I seek forgiveness",count:100,reward:"Opens doors of mercy"},
  {arabic:"Ù„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù",tr:"La hawla wala quwwata",meaning:"No power except Allah",count:100,reward:"Treasure of Jannah"},
];

const NAMES = [
  {n:1,ar:"Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù",tr:"Ar-Rahman",en:"The Most Gracious",b:"Recite for mercy and compassion in life."},
  {n:2,ar:"Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù",tr:"Ar-Raheem",en:"The Most Merciful",b:"Recite for forgiveness and endless mercy."},
  {n:3,ar:"Ø§Ù„Ù’Ù…ÙÙ„ÙÙƒÙ",tr:"Al-Malik",en:"The King",b:"Recite for authority and leadership."},
  {n:4,ar:"Ø§Ù„Ù’Ù‚ÙØ¯ÙÙ‘ÙˆØ³Ù",tr:"Al-Quddus",en:"The Most Holy",b:"Recite to purify your heart and soul."},
  {n:5,ar:"Ø§Ù„Ø³ÙÙ‘Ù„Ø§ÙÙ…Ù",tr:"As-Salam",en:"The Source of Peace",b:"Recite for inner peace and safety."},
  {n:6,ar:"Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†Ù",tr:"Al-Mu'min",en:"The Guardian of Faith",b:"Recite for protection and security."},
  {n:7,ar:"Ø§Ù„Ù’Ù…ÙÙ‡ÙÙŠÙ’Ù…ÙÙ†Ù",tr:"Al-Muhaymin",en:"The Protector",b:"Recite for divine protection."},
  {n:8,ar:"Ø§Ù„Ù’Ø¹ÙØ²ÙÙŠØ²Ù",tr:"Al-Aziz",en:"The Almighty",b:"Recite for strength and dignity."},
  {n:9,ar:"Ø§Ù„Ù’Ø¬ÙØ¨ÙÙ‘Ø§Ø±Ù",tr:"Al-Jabbar",en:"The Compeller",b:"Recite to mend what is broken."},
  {n:10,ar:"Ø§Ù„Ù’Ù…ÙØªÙÙƒÙØ¨ÙÙ‘Ø±Ù",tr:"Al-Mutakabbir",en:"The Supreme",b:"Recite for greatness and honor."},
  {n:11,ar:"Ø§Ù„Ù’Ø®ÙØ§Ù„ÙÙ‚Ù",tr:"Al-Khaliq",en:"The Creator",b:"Recite when seeking new beginnings."},
  {n:12,ar:"Ø§Ù„Ù’Ø¨ÙØ§Ø±ÙØ¦Ù",tr:"Al-Bari",en:"The Originator",b:"Recite for relief from illness."},
  {n:13,ar:"Ø§Ù„Ù’Ù…ÙØµÙÙˆÙÙ‘Ø±Ù",tr:"Al-Musawwir",en:"The Fashioner",b:"Recite for beauty and creativity."},
  {n:14,ar:"Ø§Ù„Ù’ØºÙÙÙÙ‘Ø§Ø±Ù",tr:"Al-Ghaffar",en:"The Forgiving",b:"Recite abundantly for forgiveness."},
  {n:15,ar:"Ø§Ù„Ù’Ù‚ÙÙ‡ÙÙ‘Ø§Ø±Ù",tr:"Al-Qahhar",en:"The Subduer",b:"Recite to overcome difficulties."},
  {n:16,ar:"Ø§Ù„Ù’ÙˆÙÙ‡ÙÙ‘Ø§Ø¨Ù",tr:"Al-Wahhab",en:"The Bestower",b:"Recite for gifts and blessings."},
  {n:17,ar:"Ø§Ù„Ø±ÙÙ‘Ø²ÙÙ‘Ø§Ù‚Ù",tr:"Ar-Razzaq",en:"The Provider",b:"Recite for sustenance and rizq."},
  {n:18,ar:"Ø§Ù„Ù’ÙÙØªÙÙ‘Ø§Ø­Ù",tr:"Al-Fattah",en:"The Opener",b:"Recite when doors seem closed."},
  {n:19,ar:"Ø§ÙÙ„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù",tr:"Al-Alim",en:"The All-Knowing",b:"Recite for knowledge and wisdom."},
  {n:20,ar:"Ø§Ù„Ù„ÙÙ‘Ø·ÙÙŠÙÙ",tr:"Al-Latif",en:"The Subtle",b:"Recite for hidden blessings."},
  {n:21,ar:"Ø§Ù„Ù’Ø­ÙÙƒÙÙŠÙ…Ù",tr:"Al-Hakim",en:"The Wise",b:"Recite for wisdom in decisions."},
  {n:22,ar:"Ø§Ù„Ù’ÙˆÙØ¯ÙÙˆØ¯Ù",tr:"Al-Wadud",en:"The Loving",b:"Recite for love and harmony."},
  {n:23,ar:"Ø§Ù„Ø´ÙÙ‘ÙƒÙÙˆØ±Ù",tr:"Ash-Shakur",en:"The Appreciative",b:"Recite to increase blessings."},
  {n:24,ar:"Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù",tr:"As-Samad",en:"The Eternal",b:"Recite when only Allah can help."},
  {n:25,ar:"Ø§Ù„Ù†ÙÙ‘ÙˆØ±Ù",tr:"An-Nur",en:"The Light",b:"Recite for guidance and enlightenment."},
  {n:26,ar:"Ø§Ù„Ù’Ù‡ÙØ§Ø¯ÙÙŠ",tr:"Al-Hadi",en:"The Guide",b:"Recite when you feel lost."},
  {n:27,ar:"Ø§Ù„ØªÙÙ‘ÙˆÙÙ‘Ø§Ø¨Ù",tr:"At-Tawwab",en:"The Acceptor of Repentance",b:"Recite abundantly when making tawbah."},
  {n:28,ar:"Ø§Ù„Ø¹ÙÙÙÙˆÙÙ‘",tr:"Al-Afuww",en:"The Pardoner",b:"Recite in Laylatul Qadr for pardon."},
  {n:29,ar:"Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘",tr:"Al-Hayy",en:"The Ever-Living",b:"Recite for life, energy and health."},
  {n:30,ar:"Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù",tr:"Al-Qayyum",en:"The Self-Subsisting",b:"Recite for complete reliance on Allah."},
  {n:31,ar:"Ø§Ù„Ù’ØºÙÙ†ÙÙŠÙÙ‘",tr:"Al-Ghani",en:"The Self-Sufficient",b:"Recite to remove dependency on others."},
  {n:32,ar:"Ø§Ù„Ù’Ù…ÙØºÙ’Ù†ÙÙŠ",tr:"Al-Mughni",en:"The Enricher",b:"Recite for wealth and freedom from poverty."},
  {n:33,ar:"Ø§Ù„ØµÙÙ‘Ø¨ÙÙˆØ±Ù",tr:"As-Sabur",en:"The Patient",b:"Recite for patience during hardship."},
];

// â”€â”€â”€ Storage Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const store = {
  get: k => { try { return JSON.parse(localStorage.getItem(k)); } catch { return null; } },
  set: (k,v) => localStorage.setItem(k, JSON.stringify(v)),
  getBookmarks: () => JSON.parse(localStorage.getItem('noor_bm') || '[]'),
  addBookmark: a => {
    const bm = store.getBookmarks();
    if (bm.find(b => b.surah_number===a.surah_number && b.ayat_number===a.ayat_number)) return false;
    bm.unshift({...a, saved_at: new Date().toISOString()});
    localStorage.setItem('noor_bm', JSON.stringify(bm)); return true;
  },
  removeBookmark: (s,a) => localStorage.setItem('noor_bm', JSON.stringify(store.getBookmarks().filter(b => !(b.surah_number===s && b.ayat_number===a)))),
  isBM: (s,a) => store.getBookmarks().some(b => b.surah_number===s && b.ayat_number===a),
  getHistory: () => JSON.parse(localStorage.getItem('noor_hist') || '[]'),
  addHistory: q => {
    const h = store.getHistory().filter(x=>x!==q).slice(0,7);
    localStorage.setItem('noor_hist', JSON.stringify([q,...h]));
  }
};

// â”€â”€â”€ API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// â”€â”€ Gemini API (Free) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getGeminiKey() {
  return localStorage.getItem('noor_gemini_key') || '';
}

// â”€â”€ Gemini API with auto-retry â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let lastRequestTime = 0;
// Try multiple free models in order - if one fails, try next
const GEMINI_MODELS = [
  'gemini-2.0-flash-lite',
  'gemini-1.5-flash-8b',
  'gemini-1.5-flash',
  'gemini-2.0-flash',
];

function getGeminiKey() {
  return localStorage.getItem('noor_gemini_key') || '';
}

async function callGemini(key, model, prompt, retryCount = 0) {
  const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`;
  const r = await fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      contents: [{ parts: [{ text: prompt }] }],
      generationConfig: { temperature: 0.7, maxOutputTokens: 2000 }
    })
  });

  if (r.status === 429) {
    // Rate limited - wait and retry with exponential backoff
    if (retryCount < 3) {
      const waitMs = (retryCount + 1) * 8000; // 8s, 16s, 24s
      await new Promise(res => setTimeout(res, waitMs));
      return callGemini(key, model, prompt, retryCount + 1);
    }
    throw new Error('RATE_LIMIT');
  }

  if (r.status === 404 || r.status === 400) {
    throw new Error('MODEL_NOT_FOUND');
  }

  if (r.status === 401 || r.status === 403) {
    throw new Error('INVALID_KEY');
  }

  if (!r.ok) {
    throw new Error('API_ERROR_' + r.status);
  }

  const d = await r.json();
  const text = d.candidates?.[0]?.content?.parts?.[0]?.text;
  if (!text) throw new Error('NO_RESPONSE');
  return text;
}

async function claude(system, msg) {
  if (!navigator.onLine) throw new Error('You are offline. Please connect to internet.');

  // Minimum gap between requests
  const now = Date.now();
  const gap = now - lastRequestTime;
  if (gap < 3000) await new Promise(r => setTimeout(r, 3000 - gap));
  lastRequestTime = Date.now();

  let key = getGeminiKey();
  if (!key) {
    const k = prompt('ğŸ”‘ Enter your FREE Gemini API key:\n\nGet it FREE at aistudio.google.com\n1. Sign in with Google\n2. Click Get API Key\n3. Copy and paste here');
    if (k && k.length > 10) {
      localStorage.setItem('noor_gemini_key', k.trim());
      key = k.trim();
    } else {
      throw new Error('API key needed. Get free key at aistudio.google.com');
    }
  }

  const fullPrompt = system + '\n\nRequest: ' + msg;

  // Try each model until one works
  let lastError = '';
  for (const model of GEMINI_MODELS) {
    try {
      const text = await callGemini(key, model, fullPrompt);
      return text;
    } catch (err) {
      lastError = err.message;
      if (err.message === 'INVALID_KEY') {
        throw new Error('Invalid API key. Get a free key at aistudio.google.com');
      }
      if (err.message === 'RATE_LIMIT') {
        // Try next model immediately
        continue;
      }
      if (err.message === 'MODEL_NOT_FOUND') {
        // Try next model
        continue;
      }
      // Other errors - try next model
      continue;
    }
  }

  // All models failed
  if (lastError === 'RATE_LIMIT') {
    throw new Error('You have reached the free daily limit. Please come back in a few minutes or tomorrow. The limit resets daily.');
  }
  throw new Error('Could not connect to AI. Please check your internet and try again.');
}

function parseJ(raw, type='array') {
  if (!raw) throw new Error('Empty response from AI');
  // Remove markdown code blocks
  let t = raw.replace(/```json\s*/gi,'').replace(/```\s*/g,'').trim();
  // Remove any leading text before JSON
  const [o,c] = type==='array' ? ['[',']'] : ['{','}'];
  const s = t.indexOf(o);
  const e = t.lastIndexOf(c);
  if (s === -1 || e === -1 || e <= s) {
    // Try to find JSON anywhere in the text
    const jsonMatch = t.match(type==='array' ? /\[.*\]/s : /\{.*\}/s);
    if (jsonMatch) return JSON.parse(jsonMatch[0]);
    throw new Error('Could not find valid response. Please try again.');
  }
  try {
    return JSON.parse(t.slice(s, e+1));
  } catch(err) {
    // Try cleaning common issues
    const cleaned = t.slice(s, e+1)
      .replace(/,\s*}/g, '}')
      .replace(/,\s*]/g, ']')
      .replace(/([{,]\s*)(\w+):/g, '$1"$2":');
    return JSON.parse(cleaned);
  }
}

// â”€â”€â”€ Share Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function shareCard(ayat) {
  const cv = document.createElement('canvas');
  cv.width=1080; cv.height=1080;
  const ctx = cv.getContext('2d');
  const bg = ctx.createLinearGradient(0,0,1080,1080);
  bg.addColorStop(0,'#0a2020'); bg.addColorStop(1,'#0d3535');
  ctx.fillStyle=bg; ctx.fillRect(0,0,1080,1080);
  ctx.strokeStyle='rgba(201,168,76,0.4)'; ctx.lineWidth=8; ctx.strokeRect(30,30,1020,1020);
  ctx.font='72px serif'; ctx.textAlign='center'; ctx.fillText('ğŸŒ™',540,150);
  ctx.fillStyle='#e8c97a'; ctx.font='italic 50px Georgia'; ctx.fillText('Noor â€” Ù†ÙˆØ±',540,220);
  ctx.strokeStyle='rgba(201,168,76,0.3)'; ctx.lineWidth=1;
  ctx.beginPath(); ctx.moveTo(150,250); ctx.lineTo(930,250); ctx.stroke();
  ctx.fillStyle='rgba(201,168,76,0.65)'; ctx.font='26px sans-serif';
  ctx.fillText(`${ayat.surah_name} ${ayat.surah_number}:${ayat.ayat_number}`,540,300);
  ctx.fillStyle='#fdf6e3'; ctx.font='38px serif';
  const words=ayat.arabic.split(' '); let ln='',y=400,lines=[];
  for(let w of words){const t=ln+w+' ';if(ctx.measureText(t).width>900&&ln){lines.push(ln.trim());ln=w+' ';}else ln=t;}
  lines.push(ln.trim()); lines.forEach(l=>{ctx.fillText(l,540,y);y+=56;});
  ctx.strokeStyle='rgba(201,168,76,0.2)'; ctx.beginPath(); ctx.moveTo(150,y+20); ctx.lineTo(930,y+20); ctx.stroke();
  ctx.fillStyle='rgba(253,246,227,0.7)'; ctx.font='27px sans-serif';
  const ew=ayat.english.split(' '); let el='',ey=y+72,els=[];
  for(let w of ew){const t=el+w+' ';if(ctx.measureText(t).width>880&&el){els.push(el.trim());el=w+' ';}else el=t;}
  els.push(el.trim()); els.forEach(l=>{ctx.fillText(l,540,ey);ey+=40;});
  ctx.fillStyle='rgba(201,168,76,0.35)'; ctx.font='20px sans-serif';
  ctx.fillText('Noor App â€” AI Quranic Guidance',540,980);
  return cv.toDataURL('image/png');
}

// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const state = {
  tab: 'home', onboarded: !!localStorage.getItem('noor_onboarded'),
  home: { query:'', emotion:'', loading:false, results:null, error:'', showDaily:false, daily:null, dailyLoading:true, showHistory:false },
  hadith: { query:'', loading:false, results:null, error:'' },
  names: { search:'', selected:null },
  prayer: { input:'', loading:false, times:null, city:'', error:'', now:new Date() },
  dhikr: { selectedIdx:0, count:0, sessions: JSON.parse(localStorage.getItem('noor_dhikr')||'{}') },
  bookmarks: { list: store.getBookmarks() }
};

// â”€â”€â”€ Render Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function render() {
  const app = document.getElementById('app');
  if (!state.onboarded) { app.innerHTML = renderOnboarding(); bindOnboarding(); return; }
  app.innerHTML = `
    <div style="background:linear-gradient(160deg,#0a2020,#0d3535 60%,#0a2828);min-height:100vh;padding-bottom:70px;">
      ${renderHeader()}
      <div style="max-width:800px;margin:0 auto;padding:16px 14px 0;">
        ${renderTab()}
      </div>
      ${renderNav()}
      ${renderDailyModal()}
    </div>
  `;
  bindEvents();
}

function renderOnboarding() {
  const slides = [
    {icon:'ğŸŒ™',title:'Welcome to Noor',arabic:'Ù†ÙˆØ±',desc:'Your personal AI-powered Islamic companion. Guidance from the Quran and Sunnah, tailored to your heart.'},
    {icon:'ğŸ”',title:'Search by Emotion',arabic:'Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù…Ø´Ø§Ø¹Ø±',desc:'Feeling sad, anxious, or lost? Select your emotion and Noor finds the perfect Ayat for your soul.'},
    {icon:'ğŸ“œ',title:'Hadith & 99 Names',arabic:'Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰',desc:'Search authentic Hadith, explore the 99 Beautiful Names of Allah, and track your daily Dhikr.'},
    {icon:'ğŸ•Œ',title:'Complete Islamic App',arabic:'ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø³Ù„Ø§Ù…ÙŠ Ù…ØªÙƒØ§Ù…Ù„',desc:'Prayer times, Dhikr counter, bookmarks, audio recitation & beautiful shareable Ayat cards.'},
  ];
  const s = state.onboardStep || 0;
  const sl = slides[s];
  return `<div style="background:linear-gradient(160deg,#071818,#0d3535);min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;">
    <div style="text-align:center;max-width:360px;animation:slideUp 0.4s ease both;">
      <div style="font-size:4.5rem;margin-bottom:14px;filter:drop-shadow(0 0 24px rgba(201,168,76,0.7));">${sl.icon}</div>
      <div style="font-family:Georgia,serif;font-size:1.7rem;color:#e8c97a;font-style:italic;margin-bottom:4px;">${sl.title}</div>
      <div style="font-family:serif;font-size:1.2rem;color:rgba(201,168,76,0.45);margin-bottom:22px;">${sl.arabic}</div>
      <div style="font-family:sans-serif;font-size:0.97rem;color:rgba(253,246,227,0.65);line-height:1.75;margin-bottom:36px;">${sl.desc}</div>
      <div style="display:flex;justify-content:center;gap:8px;margin-bottom:32px;">
        ${slides.map((_,i)=>`<div style="width:${i===s?24:8}px;height:8px;border-radius:4px;background:${i===s?'#c9a84c':'rgba(201,168,76,0.25)'};transition:all 0.3s;"></div>`).join('')}
      </div>
      ${s < slides.length-1
        ? `<button onclick="nextOnboard()" style="width:100%;background:linear-gradient(135deg,#c9a84c,#a8722a);border:none;border-radius:14px;padding:15px;color:#1a1208;font-family:sans-serif;font-weight:800;font-size:1rem;cursor:pointer;">Next â†’</button>
           ${s>0?`<button onclick="prevOnboard()" style="background:none;border:none;color:rgba(201,168,76,0.4);font-family:sans-serif;font-size:0.85rem;cursor:pointer;margin-top:12px;">â† Back</button>`:''}
           <div><button onclick="finishOnboard()" style="background:none;border:none;color:rgba(253,246,227,0.2);font-family:sans-serif;font-size:0.78rem;cursor:pointer;margin-top:8px;">Skip</button></div>`
        : `<button onclick="finishOnboard()" style="width:100%;background:linear-gradient(135deg,#c9a84c,#a8722a);border:none;border-radius:14px;padding:15px;color:#1a1208;font-family:sans-serif;font-weight:800;font-size:1rem;cursor:pointer;">ğŸŒ™ Begin Your Journey</button>
           <button onclick="prevOnboard()" style="background:none;border:none;color:rgba(201,168,76,0.4);font-family:sans-serif;font-size:0.85rem;cursor:pointer;margin-top:12px;">â† Back</button>`
      }
    </div>
  </div>`;
}

function bindOnboarding() {
  window.nextOnboard = () => { state.onboardStep = (state.onboardStep||0)+1; render(); };
  window.prevOnboard = () => { state.onboardStep = Math.max(0,(state.onboardStep||0)-1); render(); };
  window.finishOnboard = () => { localStorage.setItem('noor_onboarded','1'); state.onboarded=true; render(); };
}

function renderHeader() {
  return `<div class="header" style="text-align:center;padding:22px 18px 14px;border-bottom:1px solid rgba(201,168,76,0.1);background:rgba(10,24,24,0.7);backdrop-filter:blur(10px);position:sticky;top:0;z-index:100;position-anchor:relative;">
    <div style="display:flex;align-items:center;justify-content:center;gap:10px;">
      <span style="font-size:1.6rem;filter:drop-shadow(0 0 12px rgba(201,168,76,0.7));">ğŸŒ™</span>
      <span style="font-size:1.8rem;color:#e8c97a;letter-spacing:4px;font-style:italic;">Noor</span>
      <span style="font-family:serif;font-size:1.3rem;color:rgba(201,168,76,0.45);">Ù†ÙˆØ±</span>
    </div>
    <div style="font-size:0.6rem;color:rgba(253,246,227,0.25);letter-spacing:3px;text-transform:uppercase;font-family:sans-serif;margin-top:2px;">AI-Powered Quranic Guidance</div>
  </div>
  <button onclick="changeKey()" style="position:absolute;right:14px;top:50%;transform:translateY(-50%);background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:8px;padding:4px 10px;color:rgba(201,168,76,0.5);cursor:pointer;font-family:sans-serif;font-size:0.68rem;" title="API Settings">ğŸ”‘</button>`;
}

function renderNav() {
  const tabs = [{id:'home',icon:'ğŸ ',label:'Home'},{id:'hadith',icon:'ğŸ“œ',label:'Hadith'},{id:'names',icon:'âœ¨',label:'Names'},{id:'prayer',icon:'ğŸ•Œ',label:'Prayer'},{id:'dhikr',icon:'ğŸ“¿',label:'Dhikr'},{id:'bookmarks',icon:'ğŸ”–',label:'Saved'}];
  return `<div class="bottom-nav" style="position:fixed;bottom:0;left:0;right:0;background:rgba(7,24,24,0.97);border-top:1px solid rgba(201,168,76,0.18);backdrop-filter:blur(14px);display:flex;justify-content:space-around;padding:8px 0;z-index:100;">
    ${tabs.map(t=>`<button onclick="switchTab('${t.id}')" style="background:none;border:none;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:2px;padding:3px 6px;min-width:46px;">
      <span style="font-size:1.2rem;filter:${state.tab===t.id?'drop-shadow(0 0 8px rgba(201,168,76,0.8))':'none'};transition:all 0.2s;">${t.icon}</span>
      <span style="font-size:0.58rem;font-family:sans-serif;color:${state.tab===t.id?'#e8c97a':'rgba(253,246,227,0.28)'};font-weight:${state.tab===t.id?700:400};">${t.label}</span>
      ${state.tab===t.id?'<div style="width:4px;height:4px;border-radius:50%;background:#c9a84c;"></div>':'<div style="width:4px;height:4px;"></div>'}
    </button>`).join('')}
  </div>`;
}

function renderTab() {
  switch(state.tab) {
    case 'home': return renderHome();
    case 'hadith': return renderHadith();
    case 'names': return renderNames();
    case 'prayer': return renderPrayer();
    case 'dhikr': return renderDhikr();
    case 'bookmarks': return renderBookmarks();
    default: return renderHome();
  }
}

// â”€â”€â”€ HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHome() {
  const h = state.home;
  return `
    <!-- Floating Daily Button -->
    <div style="position:fixed;bottom:80px;right:16px;z-index:200;display:flex;flex-direction:column;align-items:center;">
      <button onclick="openDaily()" style="width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,#c9a84c,#a8722a);border:2px solid rgba(201,168,76,0.5);box-shadow:0 4px 20px rgba(201,168,76,0.55);cursor:pointer;font-size:1.3rem;display:flex;align-items:center;justify-content:center;animation:floatPulse 2.5s ease-in-out infinite;">ğŸŒ…</button>
      <div style="font-size:0.5rem;color:rgba(201,168,76,0.6);font-family:sans-serif;margin-top:3px;">Daily</div>
    </div>

    <!-- Search Card -->
    <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.22);border-radius:18px;padding:20px;margin-bottom:18px;">
      <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:14px;">ğŸ” Find Ayat by Emotion or Topic</div>
      <div style="display:flex;flex-wrap:wrap;gap:7px;margin-bottom:16px;justify-content:center;">
        ${EMOTIONS.map(e=>`<button onclick="toggleEmotion('${e.key}')" style="background:${h.emotion===e.key?'rgba(201,168,76,0.22)':'rgba(201,168,76,0.07)'};border:1.5px solid ${h.emotion===e.key?'#c9a84c':'rgba(201,168,76,0.18)'};color:${h.emotion===e.key?'#e8c97a':'rgba(253,246,227,0.7)'};padding:6px 12px;border-radius:50px;cursor:pointer;font-size:0.78rem;font-family:sans-serif;transition:all 0.2s;">${e.emoji} ${e.label}</button>`).join('')}
      </div>
      <textarea id="searchInput" rows="2" placeholder="Type what you are going throughâ€¦" style="width:100%;background:rgba(255,255,255,0.06);border:1.5px solid rgba(201,168,76,0.28);border-radius:12px;padding:11px 14px;color:#fdf6e3;font-family:sans-serif;font-size:0.93rem;resize:none;outline:none;display:block;box-sizing:border-box;">${h.query}</textarea>
      ${h.showHistory && store.getHistory().length>0 ? `
      <div style="background:#0d2828;border:1px solid rgba(201,168,76,0.22);border-radius:10px;margin-top:4px;overflow:hidden;">
        <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.4);padding:7px 13px 3px;font-family:sans-serif;">Recent</div>
        ${store.getHistory().map((item,idx)=>`<div onclick="useHistoryIdx(${idx})" style="padding:9px 13px;font-size:0.85rem;color:rgba(253,246,227,0.65);font-family:sans-serif;cursor:pointer;border-top:1px solid rgba(201,168,76,0.08);">ğŸ• ${item}</div>`).join('')}
      </div>` : ''}
      <button onclick="doSearch()" ${(!h.query.trim()&&!h.emotion)||h.loading?'disabled':''} style="margin-top:10px;width:100%;background:${(!h.query.trim()&&!h.emotion)||h.loading?'rgba(201,168,76,0.22)':'linear-gradient(135deg,#c9a84c,#a8722a)'};border:none;border-radius:12px;padding:13px;color:#1a1208;font-family:sans-serif;font-size:0.9rem;font-weight:800;cursor:pointer;opacity:${(!h.query.trim()&&!h.emotion)||h.loading?0.55:1};">
        ${h.loading?'â³ Searching the Quranâ€¦':'âœ¨ Find Ayat'}
      </button>
    </div>

    ${h.loading?`<div style="text-align:center;padding:44px 20px;">
      <div style="width:46px;height:46px;border:3px solid rgba(201,168,76,0.15);border-top:3px solid #c9a84c;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 14px;"></div>
      <div style="color:rgba(253,246,227,0.4);font-family:sans-serif;font-size:0.85rem;">Searching the Holy Quranâ€¦</div>
      <div style="font-family:serif;font-size:1.3rem;color:rgba(201,168,76,0.35);margin-top:6px;">Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù</div>
    </div>`:''}

    ${h.error?`<div style="background:rgba(180,50,50,0.12);border:1px solid rgba(180,50,50,0.3);border-radius:12px;padding:14px 18px;color:rgba(255,180,180,0.85);font-size:0.88rem;text-align:center;font-family:sans-serif;">âš ï¸ ${h.error}</div>`:''}

    ${!h.loading&&h.results?`
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:14px;font-size:0.66rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.48);font-family:sans-serif;">
        <div style="flex:1;height:1px;background:rgba(201,168,76,0.15);"></div>
        ${h.emotion&&h.query?`Feeling ${h.emotion} Â· "${h.query}"`:h.emotion?`Feeling ${h.emotion}`:`"${h.query}"`}
        <div style="flex:1;height:1px;background:rgba(201,168,76,0.15);"></div>
      </div>
      ${renderAdBanner()}
      ${h.results.map(a=>renderAyatCard(a)).join('')}
    `:''}

    ${!h.loading&&!h.results&&!h.error?`<div style="text-align:center;padding:40px 20px;color:rgba(253,246,227,0.25);font-family:sans-serif;">
      <div style="font-size:2.8rem;margin-bottom:12px;">ğŸ“–</div>
      <div style="font-size:0.92rem;">Select an emotion or type a topic above</div>
      <div style="font-family:serif;font-size:1.4rem;color:rgba(201,168,76,0.22);margin-top:10px;">Ø§ÙÙ‚Ù’Ø±ÙØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ</div>
    </div>`:''}
  `;
}

function renderDailyModal() {
  if (!state.home.showDaily) return '';
  const h = state.home;
  return `<div onclick="closeDaily()" style="position:fixed;inset:0;background:rgba(5,18,18,0.9);z-index:300;display:flex;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(8px);">
    <div onclick="event.stopPropagation()" style="background:linear-gradient(160deg,#0d2828,#0a3535);border:1px solid rgba(201,168,76,0.38);border-radius:22px;padding:20px;max-width:580px;width:100%;max-height:85vh;overflow-y:auto;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
        <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;">ğŸŒ… Today's Ayat</div>
        <button onclick="closeDaily()" style="background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:8px;padding:4px 12px;color:rgba(201,168,76,0.6);cursor:pointer;font-family:sans-serif;font-size:0.78rem;">âœ• Close</button>
      </div>
      ${h.dailyLoading?`<div style="text-align:center;padding:30px;font-family:sans-serif;color:rgba(253,246,227,0.38);">
        <div style="width:36px;height:36px;border:3px solid rgba(201,168,76,0.15);border-top:3px solid #c9a84c;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px;"></div>Loadingâ€¦</div>`
        :h.daily?renderAyatCard(h.daily):`<div style="color:rgba(253,246,227,0.3);text-align:center;padding:20px;font-family:sans-serif;">Could not load daily ayat.</div>`}
    </div>
  </div>`;
}

function renderAyatCard(a) {
  const bm = store.isBM(a.surah_number, a.ayat_number);
  return `<div class="fade-up" style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.2);border-radius:18px;overflow:hidden;margin-bottom:16px;">
    <div style="background:linear-gradient(135deg,rgba(201,168,76,0.14),rgba(201,168,76,0.04));border-bottom:1px solid rgba(201,168,76,0.15);padding:12px 18px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px;">
      <div style="font-size:0.83rem;color:#e8c97a;font-weight:600;font-family:sans-serif;">
        <span style="font-family:serif;font-size:1rem;">${a.surah_arabic||''}</span> Â· ${a.surah_name} ${a.surah_number}:${a.ayat_number}
      </div>
      <div style="display:flex;gap:5px;">
        <button onclick="playAudio(${a.surah_number},${a.ayat_number},this)" style="background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.25);border-radius:7px;padding:4px 10px;color:rgba(201,168,76,0.7);cursor:pointer;font-size:0.74rem;font-family:sans-serif;">â–¶ Play</button>
        <button onclick="toggleBM(${JSON.stringify(a).replace(/"/g,'&quot;')})" id="bm_${a.surah_number}_${a.ayat_number}" style="background:${bm?'rgba(201,168,76,0.25)':'rgba(201,168,76,0.08)'};border:1px solid rgba(201,168,76,0.25);border-radius:7px;padding:4px 10px;color:${bm?'#e8c97a':'rgba(201,168,76,0.6)'};cursor:pointer;font-size:0.74rem;font-family:sans-serif;">${bm?'ğŸ”– Saved':'ğŸ”– Save'}</button>
        <button onclick="shareAyat(${JSON.stringify(a).replace(/"/g,'&quot;')})" style="background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.25);border-radius:7px;padding:4px 10px;color:rgba(201,168,76,0.6);cursor:pointer;font-size:0.74rem;font-family:sans-serif;">ğŸ“¤</button>
      </div>
    </div>
    <div style="font-family:serif;font-size:1.7rem;line-height:2;text-align:right;direction:rtl;color:#fdf6e3;padding:20px 18px 12px;border-bottom:1px solid rgba(201,168,76,0.13);background:rgba(201,168,76,0.02);">
      ${a.arabic}
      <div style="font-size:0.7rem;direction:ltr;text-align:left;margin-top:6px;color:rgba(201,168,76,0.38);font-family:sans-serif;">[${a.surah_name} ${a.surah_number}:${a.ayat_number}]</div>
    </div>
    <div style="padding:16px 18px;display:grid;gap:13px;">
      <div style="display:flex;gap:10px;align-items:flex-start;">
        <div style="min-width:32px;height:32px;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:0.6rem;font-weight:800;color:#c9a84c;font-family:sans-serif;">UR</div>
        <div style="flex:1;">
          <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.48);margin-bottom:3px;font-weight:700;font-family:sans-serif;">Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û</div>
          <div style="direction:rtl;text-align:right;font-family:serif;font-size:1rem;line-height:2;color:rgba(253,246,227,0.82);">${a.urdu}</div>
        </div>
      </div>
      <div style="display:flex;gap:10px;align-items:flex-start;">
        <div style="min-width:32px;height:32px;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:0.6rem;font-weight:800;color:#c9a84c;font-family:sans-serif;">EN</div>
        <div style="flex:1;">
          <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.48);margin-bottom:3px;font-weight:700;font-family:sans-serif;">English</div>
          <div style="font-family:sans-serif;font-size:0.93rem;line-height:1.7;color:rgba(253,246,227,0.82);">${a.english}</div>
        </div>
      </div>
    </div>
    ${a.tafseer?`<div style="background:rgba(10,32,32,0.45);border-top:1px solid rgba(201,168,76,0.13);padding:16px 18px;">
      <div style="font-size:0.62rem;text-transform:uppercase;letter-spacing:2px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:8px;">Tafseer & Reflection</div>
      <div style="font-size:0.88rem;line-height:1.78;color:rgba(253,246,227,0.6);font-family:sans-serif;">${a.tafseer}</div>
      ${a.relevance?`<div style="margin-top:10px;padding:9px 13px;background:rgba(201,168,76,0.07);border-radius:8px;border-left:3px solid #c9a84c;font-size:0.82rem;color:rgba(201,168,76,0.78);font-style:italic;font-family:sans-serif;">${a.relevance}</div>`:''}
    </div>`:''}
  </div>`;
}

function renderAdBanner() {
  const ads = [
    {title:'ğŸ“š Islamic Books Store',desc:'Authentic books. 10% off with code NOOR',cta:'Shop Now',bg:'#1a3a2a'},
    {title:'âœˆï¸ Umrah 2025',desc:'All-inclusive packages from Pakistan',cta:'Get Quote',bg:'#1a2a4a'},
    {title:'ğŸ“ Learn Quran Online',desc:'1-on-1 certified teachers. First class FREE!',cta:'Start Free',bg:'#2a1a3a'},
  ];
  const ad = ads[Math.floor(Math.random()*ads.length)];
  return `<div style="background:${ad.bg};border:1px solid rgba(201,168,76,0.18);border-radius:13px;padding:12px 15px;margin-bottom:16px;display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;">
    <div style="flex:1;">
      <div style="font-size:0.58rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.42);font-family:sans-serif;margin-bottom:2px;">Sponsored Â· Halal Ad</div>
      <div style="font-size:0.88rem;font-weight:700;color:#e8c97a;font-family:sans-serif;margin-bottom:2px;">${ad.title}</div>
      <div style="font-size:0.74rem;color:rgba(253,246,227,0.5);font-family:sans-serif;">${ad.desc}</div>
    </div>
    <button style="background:linear-gradient(135deg,#c9a84c,#a8722a);border:none;border-radius:8px;padding:8px 14px;color:#1a1208;font-weight:800;font-size:0.78rem;cursor:pointer;font-family:sans-serif;white-space:nowrap;">${ad.cta} â†’</button>
  </div>`;
}

// â”€â”€â”€ HADITH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHadith() {
  const h = state.hadith;
  return `<div>
    <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.22);border-radius:18px;padding:20px;margin-bottom:18px;">
      <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:14px;">ğŸ“œ Hadith Search</div>
      <div style="display:flex;gap:10px;">
        <input id="hadithInput" value="${h.query}" placeholder="e.g. patience, prayer, kindness, anger" style="flex:1;background:rgba(255,255,255,0.06);border:1.5px solid rgba(201,168,76,0.28);border-radius:12px;padding:11px 14px;color:#fdf6e3;font-family:sans-serif;font-size:0.92rem;outline:none;">
        <button onclick="doHadith()" style="background:linear-gradient(135deg,#c9a84c,#a8722a);border:none;border-radius:12px;padding:11px 16px;color:#1a1208;font-family:sans-serif;font-weight:800;font-size:0.86rem;cursor:pointer;">${h.loading?'â³':'ğŸ”'}</button>
      </div>
      <div style="display:flex;flex-wrap:wrap;gap:6px;margin-top:10px;">
        ${['patience','prayer','kindness','anger','honesty','parents','charity','knowledge','forgiveness','brotherhood'].map(t=>`<button onclick="quickHadith('${t}')" style="background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.2);border-radius:50px;padding:5px 12px;color:rgba(201,168,76,0.7);cursor:pointer;font-family:sans-serif;font-size:0.72rem;">${t}</button>`).join('')}
      </div>
    </div>
    ${h.loading?`<div style="text-align:center;padding:40px;color:rgba(253,246,227,0.38);font-family:sans-serif;">Searching hadith collectionsâ€¦</div>`:''}
    ${h.error?`<div style="background:rgba(180,50,50,0.1);border:1px solid rgba(180,50,50,0.3);border-radius:12px;padding:14px;color:rgba(255,180,180,0.8);text-align:center;font-family:sans-serif;">âš ï¸ ${h.error}</div>`:''}
    ${!h.loading&&h.results?h.results.map(r=>`
      <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.2);border-radius:18px;overflow:hidden;margin-bottom:16px;">
        <div style="background:linear-gradient(135deg,rgba(201,168,76,0.14),rgba(201,168,76,0.04));border-bottom:1px solid rgba(201,168,76,0.15);padding:12px 18px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px;">
          <div style="font-family:sans-serif;font-size:0.83rem;color:#e8c97a;font-weight:600;"><span style="font-family:serif;">${r.book_arabic||''}</span> Â· ${r.book} #${r.hadith_number}</div>
          <div style="background:rgba(50,180,80,0.14);border:1px solid rgba(50,180,80,0.28);border-radius:50px;padding:3px 10px;font-size:0.65rem;color:#6fdf8f;font-family:sans-serif;font-weight:700;">${r.grade}</div>
        </div>
        <div style="font-family:serif;font-size:1.5rem;line-height:1.9;text-align:right;direction:rtl;color:#fdf6e3;padding:18px 18px 12px;border-bottom:1px solid rgba(201,168,76,0.12);background:rgba(201,168,76,0.02);">${r.arabic}</div>
        <div style="padding:15px 18px;display:grid;gap:12px;">
          <div><div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.48);margin-bottom:3px;font-family:sans-serif;font-weight:700;">Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û</div><div style="direction:rtl;text-align:right;font-family:serif;font-size:0.97rem;line-height:2;color:rgba(253,246,227,0.82);">${r.urdu}</div></div>
          <div><div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.48);margin-bottom:3px;font-family:sans-serif;font-weight:700;">English</div><div style="font-family:sans-serif;font-size:0.92rem;line-height:1.7;color:rgba(253,246,227,0.82);">${r.english}</div></div>
        </div>
        <div style="background:rgba(10,32,32,0.45);border-top:1px solid rgba(201,168,76,0.12);padding:14px 18px;">
          <div style="font-size:0.6rem;text-transform:uppercase;letter-spacing:2px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:6px;">Explanation</div>
          <div style="font-size:0.86rem;line-height:1.75;color:rgba(253,246,227,0.6);font-family:sans-serif;">${r.explanation}</div>
        </div>
      </div>`).join(''):''}
    ${!h.loading&&!h.results&&!h.error?`<div style="text-align:center;padding:40px 20px;color:rgba(253,246,227,0.25);font-family:sans-serif;"><div style="font-size:2.5rem;margin-bottom:12px;">ğŸ“œ</div><div>Search Hadith from Bukhari, Muslim & more</div></div>`:''}
    ${renderAdBanner()}
  </div>`;
}

// â”€â”€â”€ 99 NAMES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderNames() {
  const n = state.names;
  const filtered = NAMES.filter(x=>x.tr.toLowerCase().includes(n.search.toLowerCase())||x.en.toLowerCase().includes(n.search.toLowerCase())||x.ar.includes(n.search));
  return `<div>
    <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.22);border-radius:18px;padding:20px;margin-bottom:16px;">
      <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:14px;">âœ¨ 99 Names of Allah</div>
      <input id="namesSearch" value="${n.search}" placeholder="Search by name or meaningâ€¦" style="width:100%;background:rgba(255,255,255,0.06);border:1.5px solid rgba(201,168,76,0.28);border-radius:12px;padding:11px 14px;color:#fdf6e3;font-family:sans-serif;font-size:0.92rem;outline:none;box-sizing:border-box;">
    </div>
    ${n.selected?`<div style="background:rgba(201,168,76,0.07);border:1px solid #c9a84c;border-radius:18px;padding:24px;margin-bottom:16px;text-align:center;">
      <div style="font-family:serif;font-size:3.2rem;color:#e8c97a;margin-bottom:8px;">${n.selected.ar}</div>
      <div style="font-size:1.25rem;color:#e8c97a;font-family:sans-serif;font-weight:700;">${n.selected.tr}</div>
      <div style="font-size:0.9rem;color:rgba(253,246,227,0.6);font-family:sans-serif;margin-top:4px;">${n.selected.en}</div>
      <div style="font-size:0.83rem;color:rgba(201,168,76,0.72);font-family:sans-serif;margin-top:14px;font-style:italic;line-height:1.65;padding:0 8px;">${n.selected.b}</div>
      <button onclick="clearName()" style="margin-top:14px;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:8px;padding:6px 16px;color:#c9a84c;cursor:pointer;font-family:sans-serif;font-size:0.8rem;">âœ• Close</button>
    </div>`:''}
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:8px;margin-bottom:20px;">
      ${filtered.map(x=>`<div onclick="selectName(${x.n})" style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:13px;padding:12px 10px;text-align:center;cursor:pointer;">
        <div style="font-size:0.58rem;color:rgba(201,168,76,0.38);font-family:sans-serif;margin-bottom:2px;">${x.n}</div>
        <div style="font-family:serif;font-size:1.3rem;color:#e8c97a;margin-bottom:4px;">${x.ar}</div>
        <div style="font-size:0.67rem;color:#c9a84c;font-family:sans-serif;font-weight:600;">${x.tr}</div>
        <div style="font-size:0.61rem;color:rgba(253,246,227,0.42);font-family:sans-serif;margin-top:2px;">${x.en}</div>
      </div>`).join('')}
    </div>
  </div>`;
}

// â”€â”€â”€ PRAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderPrayer() {
  const p = state.prayer;
  const icons = {Fajr:'ğŸŒ„',Sunrise:'ğŸŒ…',Dhuhr:'â˜€ï¸',Asr:'ğŸŒ¤ï¸',Maghrib:'ğŸŒ‡',Isha:'ğŸŒ™'};
  const nowMins = p.now.getHours()*60+p.now.getMinutes();
  const next = p.times ? Object.entries(p.times).find(([,t])=>{const[h,m]=t.split(':').map(Number);return h*60+m>nowMins;})?.[0]||'Fajr' : null;
  return `<div>
    <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.22);border-radius:18px;padding:20px;margin-bottom:16px;">
      <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:14px;">ğŸ•Œ Prayer Times</div>
      <div style="text-align:center;margin-bottom:16px;">
        <div style="font-family:sans-serif;font-size:1.9rem;font-weight:700;color:#e8c97a;">${p.now.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit'})}</div>
        <div style="color:rgba(253,246,227,0.38);font-size:0.78rem;font-family:sans-serif;margin-top:2px;">${p.now.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})}</div>
      </div>
      <div style="display:flex;gap:10px;">
        <input id="cityInput" value="${p.input}" placeholder="Enter cityâ€¦ e.g. Karachi, Lahore" style="flex:1;background:rgba(255,255,255,0.06);border:1.5px solid rgba(201,168,76,0.28);border-radius:12px;padding:11px 14px;color:#fdf6e3;font-family:sans-serif;font-size:0.92rem;outline:none;">
        <button onclick="fetchPrayer()" ${p.loading||!p.input.trim()?'disabled':''} style="background:${!p.loading&&p.input.trim()?'linear-gradient(135deg,#c9a84c,#a8722a)':'rgba(201,168,76,0.22)'};border:none;border-radius:12px;padding:11px 14px;color:#1a1208;font-family:sans-serif;font-weight:800;font-size:0.82rem;cursor:pointer;opacity:${!p.loading&&p.input.trim()?1:0.55};white-space:nowrap;">${p.loading?'â³':'Get Times'}</button>
      </div>
      ${p.error?`<div style="color:rgba(255,180,180,0.75);font-size:0.8rem;font-family:sans-serif;margin-top:8px;">âš ï¸ ${p.error}</div>`:''}
    </div>
    ${p.times?`<div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.2);border-radius:18px;padding:18px;margin-bottom:16px;">
      <div style="text-align:center;margin-bottom:14px;color:#e8c97a;font-family:sans-serif;font-weight:600;">ğŸ“ ${p.city}</div>
      ${next?`<div style="text-align:center;margin-bottom:14px;background:rgba(201,168,76,0.08);border-radius:11px;padding:11px;border:1px solid rgba(201,168,76,0.18);">
        <div style="font-size:0.6rem;color:rgba(201,168,76,0.5);font-family:sans-serif;margin-bottom:3px;text-transform:uppercase;letter-spacing:2px;">Next Prayer</div>
        <div style="font-size:1.1rem;color:#e8c97a;font-family:sans-serif;font-weight:700;">${icons[next]} ${next} â€” ${p.times[next]}</div>
      </div>`:''}
      <div style="display:grid;gap:7px;">
        ${Object.entries(p.times).map(([name,time])=>`<div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:${next===name?'rgba(201,168,76,0.12)':'rgba(255,255,255,0.03)'};border-radius:10px;border:1px solid ${next===name?'#c9a84c':'rgba(201,168,76,0.1)'};">
          <div style="font-family:sans-serif;font-size:0.92rem;color:${next===name?'#e8c97a':'rgba(253,246,227,0.7)'};">${icons[name]} ${name}</div>
          <div style="font-family:sans-serif;font-weight:700;font-size:0.95rem;color:${next===name?'#e8c97a':'rgba(253,246,227,0.75)'};">${time}</div>
        </div>`).join('')}
      </div>
    </div>`:`<div style="text-align:center;padding:40px 20px;color:rgba(253,246,227,0.25);font-family:sans-serif;"><div style="font-size:2.5rem;margin-bottom:12px;">ğŸ•Œ</div><div>Enter your city for prayer times</div></div>`}
  </div>`;
}

// â”€â”€â”€ DHIKR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderDhikr() {
  const d = state.dhikr;
  const sel = DHIKR_LIST[d.selectedIdx];
  const pct = Math.min((d.count/sel.count)*100,100);
  const r = 62, circ = 2*Math.PI*r;
  const today = new Date().toDateString();
  return `<div>
    <div style="background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.22);border-radius:18px;padding:18px;margin-bottom:16px;">
      <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:14px;">ğŸ“¿ Choose Dhikr</div>
      <div style="display:grid;gap:7px;">
        ${DHIKR_LIST.map((dk,i)=>`<button onclick="selectDhikr(${i})" style="background:${d.selectedIdx===i?'rgba(201,168,76,0.18)':'rgba(255,255,255,0.03)'};border:1.5px solid ${d.selectedIdx===i?'#c9a84c':'rgba(201,168,76,0.13)'};border-radius:11px;padding:9px 13px;cursor:pointer;text-align:left;display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="font-family:serif;font-size:1.05rem;color:${d.selectedIdx===i?'#e8c97a':'rgba(253,246,227,0.78)'};">${dk.arabic}</div>
            <div style="font-size:0.7rem;color:rgba(201,168,76,0.55);font-family:sans-serif;margin-top:2px;">${dk.tr}</div>
          </div>
          <div style="font-size:0.68rem;color:rgba(201,168,76,0.45);font-family:sans-serif;">Ã—${dk.count}</div>
        </button>`).join('')}
      </div>
    </div>
    <div style="background:rgba(201,168,76,0.05);border:1px solid rgba(201,168,76,0.32);border-radius:18px;padding:22px;text-align:center;">
      <div style="font-family:serif;font-size:1.9rem;color:#e8c97a;margin-bottom:4px;">${sel.arabic}</div>
      <div style="font-size:0.82rem;color:rgba(201,168,76,0.6);font-family:sans-serif;margin-bottom:20px;">${sel.meaning}</div>
      <div style="position:relative;width:150px;height:150px;margin:0 auto 20px;">
        <svg width="150" height="150" style="transform:rotate(-90deg);">
          <circle cx="75" cy="75" r="${r}" fill="none" stroke="rgba(201,168,76,0.12)" stroke-width="9"/>
          <circle cx="75" cy="75" r="${r}" fill="none" stroke="#c9a84c" stroke-width="9" stroke-linecap="round"
            stroke-dasharray="${circ}" stroke-dashoffset="${circ*(1-pct/100)}" style="transition:stroke-dashoffset 0.3s ease;"/>
        </svg>
        <div style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;">
          <div style="font-size:2.6rem;font-weight:800;color:#e8c97a;font-family:sans-serif;line-height:1;">${d.count}</div>
          <div style="font-size:0.68rem;color:rgba(201,168,76,0.45);font-family:sans-serif;margin-top:3px;">of ${sel.count}</div>
        </div>
      </div>
      <button onclick="tapDhikr()" style="width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#c9a84c,#8a5e20);border:4px solid rgba(201,168,76,0.4);box-shadow:0 8px 28px rgba(201,168,76,0.35);cursor:pointer;font-size:1.9rem;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;" onmousedown="this.style.transform='scale(0.93)'" onmouseup="this.style.transform='scale(1)'" ontouchstart="this.style.transform='scale(0.93)'" ontouchend="this.style.transform='scale(1)'">ğŸ“¿</button>
      <div style="font-size:0.78rem;color:rgba(201,168,76,0.58);font-family:sans-serif;font-style:italic;margin-bottom:14px;">${sel.reward}</div>
      <button onclick="resetDhikr()" style="background:rgba(255,255,255,0.05);border:1px solid rgba(201,168,76,0.18);border-radius:8px;padding:6px 18px;color:rgba(253,246,227,0.4);cursor:pointer;font-family:sans-serif;font-size:0.8rem;">â†º Reset</button>
      <div style="margin-top:18px;border-top:1px solid rgba(201,168,76,0.13);padding-top:14px;">
        <div style="font-size:0.62rem;text-transform:uppercase;letter-spacing:2px;color:rgba(201,168,76,0.4);font-family:sans-serif;margin-bottom:8px;">Today's Total</div>
        <div style="display:flex;justify-content:center;gap:14px;flex-wrap:wrap;">
          ${DHIKR_LIST.map(dk=>{const n=d.sessions[`${today}_${dk.tr}`]||0;return n>0?`<div style="text-align:center;"><div style="font-size:0.72rem;color:#c9a84c;font-family:sans-serif;font-weight:700;">${n}</div><div style="font-size:0.58rem;color:rgba(253,246,227,0.35);font-family:sans-serif;">${dk.tr}</div></div>`:''}).join('')}
        </div>
      </div>
    </div>
  </div>`;
}

// â”€â”€â”€ BOOKMARKS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderBookmarks() {
  const bm = store.getBookmarks();
  if (!bm.length) return `<div style="text-align:center;padding:60px 20px;color:rgba(253,246,227,0.25);font-family:sans-serif;">
    <div style="font-size:3rem;margin-bottom:14px;">ğŸ”–</div>
    <div>No saved Ayat yet</div>
    <div style="font-size:0.8rem;margin-top:8px;color:rgba(253,246,227,0.16);">Tap ğŸ”– Save on any Ayat</div>
  </div>`;
  return `<div>
    <div style="font-size:0.68rem;text-transform:uppercase;letter-spacing:2.5px;color:#c9a84c;font-weight:700;font-family:sans-serif;margin-bottom:16px;">ğŸ”– Saved Ayat (${bm.length})</div>
    ${bm.map(a=>`${renderAyatCard(a)}<button onclick="removeBM(${a.surah_number},${a.ayat_number})" style="display:block;margin:-8px auto 16px;background:rgba(180,50,50,0.13);border:1px solid rgba(180,50,50,0.25);border-radius:8px;padding:5px 13px;color:rgba(255,140,140,0.65);cursor:pointer;font-family:sans-serif;font-size:0.76rem;">ğŸ—‘ Remove</button>`).join('')}
  </div>`;
}

// â”€â”€â”€ Event Handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function bindEvents() {
  // Search input live
  const si = document.getElementById('searchInput');
  if (si) {
    // DON'T re-render on input - just update state silently
    si.addEventListener('input', e => {
      state.home.query = e.target.value;
      // Only re-render if history visibility changes
      const shouldShow = e.target.value.length === 0 && store.getHistory().length > 0;
      if (shouldShow !== state.home.showHistory) {
        state.home.showHistory = shouldShow;
        const cursor = si.selectionStart;
        render();
        const newSi = document.getElementById('searchInput');
        if (newSi) { newSi.focus(); newSi.setSelectionRange(cursor, cursor); }
      }
    });
    si.addEventListener('focus', () => {
      if (!state.home.query && store.getHistory().length > 0 && !state.home.showHistory) {
        state.home.showHistory = true;
        render();
        document.getElementById('searchInput')?.focus();
      }
    });
    si.addEventListener('blur', () => {
      setTimeout(() => { state.home.showHistory = false; }, 200);
    });
    si.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); doSearch(); }
    });
    si.focus();
  }
  const hi = document.getElementById('hadithInput');
  if (hi) {
    hi.addEventListener('input', e => { state.hadith.query = e.target.value; });
    hi.addEventListener('keydown', e => { if(e.key==='Enter') doHadith(); });
  }
  const ci = document.getElementById('cityInput');
  if (ci) { ci.addEventListener('input',e=>{state.prayer.input=e.target.value;}); ci.addEventListener('keydown',e=>{if(e.key==='Enter')fetchPrayer();}); }
  const ns = document.getElementById('namesSearch');
  if (ns) { ns.addEventListener('input',e=>{state.names.search=e.target.value;render();setTimeout(()=>{document.getElementById('namesSearch')?.focus();},10);}); }
}

// â”€â”€â”€ Actions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.useHistoryIdx = i => { const h=store.getHistory()[i]; if(h){state.home.query=h;state.home.showHistory=false;doSearch();} };
window.changeKey = () => {
  const current = localStorage.getItem('noor_gemini_key');
  const k = prompt('ğŸ”‘ Gemini API Key Settings\n\nGet FREE key at: aistudio.google.com\n\nCurrent: ' + (current ? '****' + current.slice(-4) : 'Not set') + '\n\nPaste new key below (or cancel to keep current):');
  if (k && k.length > 10) {
    localStorage.setItem('noor_gemini_key', k);
    alert('âœ… Gemini API key saved! Noor is ready.');
    location.reload();
  } else if (k === '') {
    if (confirm('Remove API key?')) { localStorage.removeItem('noor_gemini_key'); location.reload(); }
  }
};
window.quickHadith = topic => {
  state.hadith.query = topic;
  render();
  doHadith();
};
window.switchTab = t => { state.tab=t; render(); window.scrollTo(0,0); };
window.toggleEmotion = k => { state.home.emotion=state.home.emotion===k?'':k; render(); };
window.openDaily = () => { state.home.showDaily=true; render(); loadDaily(); };
window.closeDaily = () => { state.home.showDaily=false; render(); };
window.useHistory = q => { state.home.query=q; state.home.showHistory=false; doSearch(); };
window.selectName = n => { state.names.selected=NAMES.find(x=>x.n===n); render(); window.scrollTo(0,0); };
window.clearName = () => { state.names.selected=null; render(); };
window.selectDhikr = i => { state.dhikr.selectedIdx=i; state.dhikr.count=0; render(); };
window.resetDhikr = () => { state.dhikr.count=0; render(); };
window.removeBM = (s,a) => { store.removeBookmark(s,a); render(); };

window.tapDhikr = () => {
  const d = state.dhikr;
  const sel = DHIKR_LIST[d.selectedIdx];
  d.count++;
  if (d.count===sel.count) setTimeout(()=>alert(`MashaAllah! ğŸ‰ ${sel.count} ${sel.tr} completed!

${sel.reward}`),100);
  const today=new Date().toDateString();
  const key=`${today}_${sel.tr}`;
  d.sessions[key]=(d.sessions[key]||0)+1;
  localStorage.setItem('noor_dhikr',JSON.stringify(d.sessions));
  render();
};

window.toggleBM = a => {
  if (store.isBM(a.surah_number,a.ayat_number)) { store.removeBookmark(a.surah_number,a.ayat_number); }
  else { store.addBookmark(a); }
  render();
};

window.shareAyat = a => {
  const url = shareCard(a);
  const link = document.createElement('a');
  link.href=url; link.download=`noor-${a.surah_number}-${a.ayat_number}.png`; link.click();
};

let currentAudio = null;
window.playAudio = (surah,ayat,btn) => {
  if (currentAudio) { currentAudio.pause(); currentAudio=null; document.querySelectorAll('.audio-btn').forEach(b=>b.textContent='â–¶ Play'); }
  const url=`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${String(surah).padStart(3,'0')}${String(ayat).padStart(3,'0')}.mp3`;
  currentAudio=new Audio(url);
  btn.textContent='â¹ Stop'; btn.classList.add('audio-btn');
  currentAudio.onended=()=>{btn.textContent='â–¶ Play';currentAudio=null;};
  currentAudio.onerror=()=>{btn.textContent='â–¶ Play';currentAudio=null;};
  currentAudio.play();
};

async function doSearch() {
  const h = state.home;
  if (!h.query.trim()&&!h.emotion) return;
  h.loading=true; h.error=''; h.results=null; h.showHistory=false;
  if (h.query.trim()) store.addHistory(h.query.trim());
  render();

  // Step 1: Show offline results INSTANTLY - no API needed
  const offlineResults = getOfflineAyat(h.emotion, h.query);
  h.results = offlineResults;
  h.loading = false;
  h.error = '';
  render();

  // Step 2: Try to enhance with Gemini in background (silent - no error shown to user)
  const key = getGeminiKey();
  if (key) {
    try {
      const prompt = h.emotion&&h.query.trim()
        ?`Find Quranic Ayat for someone feeling ${h.emotion} and asking: "${h.query}"`
        :h.emotion?`Find comforting Quranic Ayat for someone feeling ${h.emotion}`
        :`Find Quranic Ayat about: "${h.query}"`;
      const raw = await claude(`You are Noor, an Islamic app. IMPORTANT: Respond with ONLY a JSON array, no other text, no markdown. Return exactly 2 objects each with these exact keys: surah_name (string), surah_arabic (string), surah_number (integer), ayat_number (integer), arabic (Arabic text), urdu (Urdu translation), english (English translation), tafseer (2 sentence explanation), relevance (1 sentence). No extra text before or after the JSON array.`, prompt);
      const parsed = parseJ(raw, 'array');
      if (parsed && parsed.length > 0) {
        h.results = parsed;
        render();
      }
    } catch(err) {
      // Silently fail - offline results already showing
      console.log('AI enhancement failed, using offline results:', err.message);
    }
  }
}

// Offline Hadith database
const HADITH_DB = [
  // Kindness & Mercy
  {narrator:"Abu Hurairah (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"6018",topic:"kindness mercy compassion love good character",arabic:"Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø¨ÙØ¹ÙØ«Ù’ØªÙ Ù„ÙØ£ÙØªÙÙ…ÙÙ‘Ù…Ù ØµÙØ§Ù„ÙØ­Ù Ø§Ù„Ø£ÙØ®Ù’Ù„ÙØ§Ù‚Ù",english:"I was sent only to perfect good character and noble morals.",urdu:"Ù…Ø¬Ú¾Û’ ØµØ±Ù Ø§Ú†Ú¾Û’ Ø§Ø®Ù„Ø§Ù‚ Ú©Ùˆ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ú¾ÛŒØ¬Ø§ Ú¯ÛŒØ§ ÛÛ’",explanation:"The Prophet's (SAW) entire mission was to perfect moral character. This shows that good character is the heart of Islam â€” not just rituals but how we treat others.",grade:"Sahih"},
  {narrator:"Abu Hurairah (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"2319",topic:"kindness mercy compassion gentle soft",arabic:"Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø±ÙÙÙÙŠÙ‚ÙŒ ÙŠÙØ­ÙØ¨ÙÙ‘ Ø§Ù„Ø±ÙÙ‘ÙÙ’Ù‚Ù ÙÙÙŠ Ø§Ù„Ø£ÙÙ…Ù’Ø±Ù ÙƒÙÙ„ÙÙ‘Ù‡Ù",english:"Allah is gentle and loves gentleness in all matters.",urdu:"Ø§Ù„Ù„Û Ù†Ø±Ù… ÛÛ’ Ø§ÙˆØ± ÛØ± Ù…Ø¹Ø§Ù…Ù„Û’ Ù…ÛŒÚº Ù†Ø±Ù…ÛŒ Ú©Ùˆ Ù¾Ø³Ù†Ø¯ Ú©Ø±ØªØ§ ÛÛ’",explanation:"Gentleness is a divine attribute that Allah loves to see in His servants. Harshness drives people away while gentleness draws them to goodness and to Islam.",grade:"Sahih"},
  // Prayer & Salah
  {narrator:"Abu Hurairah (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"527",topic:"prayer salah namaz fajr dhuhr asr maghrib isha worship",arabic:"Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù Ø¹ÙÙ„ÙÙ‰ ÙˆÙÙ‚Ù’ØªÙÙ‡ÙØ§ Ø£ÙÙÙ’Ø¶ÙÙ„Ù Ø§Ù„Ù’Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù",english:"Prayer at its proper time is the best of deeds.",urdu:"ÙˆÙ‚Øª Ù¾Ø± Ù†Ù…Ø§Ø² Ù¾Ú‘Ú¾Ù†Ø§ Ø³Ø¨ Ø³Û’ Ø§ÙØ¶Ù„ Ø¹Ù…Ù„ ÛÛ’",explanation:"Among all good deeds, praying on time holds the highest rank. It is a declaration that Allah's call takes priority over all worldly affairs.",grade:"Sahih"},
  {narrator:"Jabir (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"232",topic:"prayer salah ablution wudu purification worship",arabic:"Ø¨ÙÙŠÙ’Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙ„Ù ÙˆÙØ¨ÙÙŠÙ’Ù†Ù Ø§Ù„Ø´ÙÙ‘Ø±Ù’ÙƒÙ ÙˆÙØ§Ù„Ù’ÙƒÙÙÙ’Ø±Ù ØªÙØ±Ù’ÙƒÙ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù",english:"Between a man and disbelief and paganism is the abandonment of prayer.",urdu:"Ø¢Ø¯Ù…ÛŒ Ø§ÙˆØ± Ø´Ø±Ú© Ùˆ Ú©ÙØ± Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† Ù†Ù…Ø§Ø² Ú†Ú¾ÙˆÚ‘Ù†Ø§ ÛÛ’",explanation:"Salah is the most important pillar of Islam after the declaration of faith. Abandoning prayer completely is a serious matter that distances one from faith.",grade:"Sahih"},
  // Intentions & Actions
  {narrator:"Umar ibn al-Khattab (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"1",topic:"intention niyyah action deed reward sincerity",arabic:"Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø§Ù„Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù Ø¨ÙØ§Ù„Ù†ÙÙ‘ÙŠÙÙ‘Ø§ØªÙ",english:"Actions are judged by intentions. Every person will get the reward according to what he has intended.",urdu:"Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§ Ø¯Ø§Ø±ÙˆÙ…Ø¯Ø§Ø± Ù†ÛŒØªÙˆÚº Ù¾Ø± ÛÛ’",explanation:"This foundational hadith teaches that the value of any deed depends entirely on the intention behind it. A small deed done sincerely outweighs a large deed done for show.",grade:"Sahih"},
  // Brotherhood & Community
  {narrator:"Anas ibn Malik (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"13",topic:"brotherhood love faith believe Muslim community",arabic:"Ù„ÙØ§ ÙŠÙØ¤Ù’Ù…ÙÙ†Ù Ø£ÙØ­ÙØ¯ÙÙƒÙÙ…Ù’ Ø­ÙØªÙÙ‘Ù‰ ÙŠÙØ­ÙØ¨ÙÙ‘ Ù„ÙØ£ÙØ®ÙÙŠÙ‡Ù Ù…ÙØ§ ÙŠÙØ­ÙØ¨ÙÙ‘ Ù„ÙÙ†ÙÙÙ’Ø³ÙÙ‡Ù",english:"None of you truly believes until he loves for his brother what he loves for himself.",urdu:"ØªÙ… Ù…ÛŒÚº Ø³Û’ Ú©ÙˆØ¦ÛŒ Ù…ÙˆÙ…Ù† Ù†ÛÛŒÚº Ø¬Ø¨ ØªÚ© Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ù„ÛŒÛ’ ÙˆÛÛŒ Ù†Û Ú†Ø§ÛÛ’ Ø¬Ùˆ Ø§Ù¾Ù†Û’ Ù„ÛŒÛ’ Ú†Ø§ÛØªØ§ ÛÛ’",explanation:"True faith requires transcending selfishness. Genuine concern for others is not optional â€” it is a condition of complete faith.",grade:"Sahih"},
  {narrator:"Abu Hurairah (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"2564",topic:"brotherhood community Muslim rights envy hate",arabic:"Ø§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…Ù Ø£ÙØ®ÙÙˆ Ø§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…Ù Ù„ÙØ§ ÙŠÙØ¸Ù’Ù„ÙÙ…ÙÙ‡Ù ÙˆÙÙ„ÙØ§ ÙŠÙØ³Ù’Ù„ÙÙ…ÙÙ‡Ù",english:"A Muslim is the brother of a Muslim. He does not oppress him, nor does he hand him over to the enemy.",urdu:"Ù…Ø³Ù„Ù…Ø§Ù† Ù…Ø³Ù„Ù…Ø§Ù† Ú©Ø§ Ø¨Ú¾Ø§Ø¦ÛŒ ÛÛ’ØŒ Ù†Û Ø§Ø³ Ù¾Ø± Ø¸Ù„Ù… Ú©Ø±Û’ Ù†Û Ø§Ø³Û’ Ø¯Ø´Ù…Ù† Ú©Û’ Ø­ÙˆØ§Ù„Û’ Ú©Ø±Û’",explanation:"Brotherhood in Islam is not just a feeling but an active responsibility to protect and stand up for fellow Muslims in all circumstances.",grade:"Sahih"},
  // Knowledge & Learning
  {narrator:"Abu Hurairah (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"2699",topic:"knowledge learn study seek ilm education wisdom quran",arabic:"Ù…ÙÙ†Ù’ Ø³ÙÙ„ÙÙƒÙ Ø·ÙØ±ÙÙŠÙ‚Ù‹Ø§ ÙŠÙÙ„Ù’ØªÙÙ…ÙØ³Ù ÙÙÙŠÙ‡Ù Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ø³ÙÙ‡ÙÙ‘Ù„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙ‡Ù Ø·ÙØ±ÙÙŠÙ‚Ù‹Ø§ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù",english:"Whoever travels a path seeking knowledge, Allah will make easy for him a path to Paradise.",urdu:"Ø¬Ùˆ Ø´Ø®Øµ Ø¹Ù„Ù… Ø­Ø§ØµÙ„ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø±Ø§Ø³ØªÛ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±Û’ØŒ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ù„ÛŒÛ’ Ø¬Ù†Øª Ú©Ø§ Ø±Ø§Ø³ØªÛ Ø¢Ø³Ø§Ù† Ú©Ø± Ø¯ÛŒØªØ§ ÛÛ’",explanation:"Seeking Islamic knowledge is an act of worship that directly paves the path to Paradise. Every step toward learning is a step toward Allah.",grade:"Sahih"},
  // Quran
  {narrator:"Uthman ibn Affan (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"5027",topic:"quran recite read learn teach best",arabic:"Ø®ÙÙŠÙ’Ø±ÙÙƒÙÙ…Ù’ Ù…ÙÙ†Ù’ ØªÙØ¹ÙÙ„ÙÙ‘Ù…Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙˆÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙ‡Ù",english:"The best of you are those who learn the Quran and teach it.",urdu:"ØªÙ… Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ Ù‚Ø±Ø¢Ù† Ø³ÛŒÚ©Ú¾Û’ Ø§ÙˆØ± Ø³Ú©Ú¾Ø§Ø¦Û’",explanation:"The Quran holds the highest status in Islam. Those who dedicate themselves to it and share it with others occupy the highest rank among believers.",grade:"Sahih"},
  // Anger
  {narrator:"Abu Hurairah (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"6114",topic:"anger angry control self strong patience",arabic:"Ù„ÙÙŠÙ’Ø³Ù Ø§Ù„Ø´ÙÙ‘Ø¯ÙÙŠØ¯Ù Ø¨ÙØ§Ù„ØµÙÙ‘Ø±ÙØ¹ÙØ©Ù Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø§Ù„Ø´ÙÙ‘Ø¯ÙÙŠØ¯Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙÙ…Ù’Ù„ÙÙƒÙ Ù†ÙÙÙ’Ø³ÙÙ‡Ù Ø¹ÙÙ†Ù’Ø¯Ù Ø§Ù„Ù’ØºÙØ¶ÙØ¨Ù",english:"The strong person is not the one who can wrestle someone down. The strong person is the one who controls himself when angry.",urdu:"Ø·Ø§Ù‚ØªÙˆØ± ÙˆÛ Ù†ÛÛŒÚº Ø¬Ùˆ Ù¾ÛÙ„ÙˆØ§Ù†ÛŒ Ù…ÛŒÚº ØºØ§Ù„Ø¨ Ø¢Ø¦Û’ Ø¨Ù„Ú©Û Ø·Ø§Ù‚ØªÙˆØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ ØºØµÛ’ Ù…ÛŒÚº Ø§Ù¾Ù†Û’ Ø¢Ù¾ Ú©Ùˆ Ù‚Ø§Ø¨Ùˆ Ù…ÛŒÚº Ø±Ú©Ú¾Û’",explanation:"True strength in Islam is internal mastery, not physical dominance. Self-control during anger is the highest form of strength and is beloved to Allah.",grade:"Sahih"},
  // Patience & Hardship
  {narrator:"Abu Said al-Khudri (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"5641",topic:"patience hardship trial test difficulty suffering pain sad",arabic:"Ù…ÙØ§ ÙŠÙØµÙÙŠØ¨Ù Ø§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…Ù Ù…ÙÙ†Ù’ Ù†ÙØµÙØ¨Ù ÙˆÙÙ„ÙØ§ ÙˆÙØµÙØ¨Ù ÙˆÙÙ„ÙØ§ Ù‡ÙÙ…ÙÙ‘ ÙˆÙÙ„ÙØ§ Ø­ÙØ²ÙÙ†Ù Ø¥ÙÙ„ÙÙ‘Ø§ ÙƒÙÙÙÙ‘Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø¨ÙÙ‡Ù",english:"No fatigue, illness, anxiety, sorrow, harm or sadness afflicts a Muslim, even a thorn that pricks him, except that Allah expiates his sins through it.",urdu:"Ù…Ø³Ù„Ù…Ø§Ù† Ú©Ùˆ Ø¬Ùˆ Ø¨Ú¾ÛŒ ØªÚ©Ù„ÛŒÙØŒ Ø¨ÛŒÙ…Ø§Ø±ÛŒØŒ Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒØŒ ØºÙ… ÛŒØ§ ØªÚ©Ù„ÛŒÙ Ù¾ÛÙ†Ú†ØªÛŒ ÛÛ’ØŒ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø§Ø³ Ú©Û’ Ú¯Ù†Ø§Û Ù…Ø¹Ø§Ù ÙØ±Ù…Ø§ØªØ§ ÛÛ’",explanation:"Every hardship a Muslim faces becomes a means of purification and reward. Nothing is wasted in Allah's plan â€” even pain becomes mercy.",grade:"Sahih"},
  {narrator:"Abu Hurairah (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"2999",topic:"patience sabr hardship trial test reward",arabic:"Ø¹ÙØ¬ÙØ¨Ù‹Ø§ Ù„ÙØ£ÙÙ…Ù’Ø±Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†Ù Ø¥ÙÙ†ÙÙ‘ Ø£ÙÙ…Ù’Ø±ÙÙ‡Ù ÙƒÙÙ„ÙÙ‘Ù‡Ù Ø®ÙÙŠÙ’Ø±ÙŒ",english:"Amazing is the affair of the believer â€” all of his affair is good. If good times come he is thankful, and if hardship comes he is patient â€” and both are good for him.",urdu:"Ù…ÙˆÙ…Ù† Ú©Ø§ Ù…Ø¹Ø§Ù…Ù„Û Ø¹Ø¬ÛŒØ¨ ÛÛ’ØŒ Ø§Ø³ Ú©Ø§ Ø³Ø§Ø±Ø§ Ù…Ø¹Ø§Ù…Ù„Û Ø®ÛŒØ± ÛÛŒ Ø®ÛŒØ± ÛÛ’",explanation:"The believer has a win-win situation. Joy leads to gratitude which is rewarded, and hardship leads to patience which is also rewarded. There is no losing for the true believer.",grade:"Sahih"},
  // Honesty & Truthfulness
  {narrator:"Abdullah ibn Masud (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"6094",topic:"honesty truth truthful lies lying trust trustworthy",arabic:"Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ Ø¨ÙØ§Ù„ØµÙÙ‘Ø¯Ù’Ù‚Ù ÙÙØ¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘Ø¯Ù’Ù‚Ù ÙŠÙÙ‡Ù’Ø¯ÙÙŠ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¨ÙØ±ÙÙ‘ ÙˆÙØ§Ù„Ù’Ø¨ÙØ±ÙÙ‘ ÙŠÙÙ‡Ù’Ø¯ÙÙŠ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù",english:"Hold fast to truthfulness, for truthfulness leads to righteousness and righteousness leads to Paradise.",urdu:"Ø³Ú†Ø§Ø¦ÛŒ Ú©Ùˆ Ù„Ø§Ø²Ù… Ù¾Ú©Ú‘Ùˆ Ú©ÛŒÙˆÙ†Ú©Û Ø³Ú†Ø§Ø¦ÛŒ Ù†ÛŒÚ©ÛŒ Ú©ÛŒ Ø·Ø±Ù Ù„Û’ Ø¬Ø§ØªÛŒ ÛÛ’ Ø§ÙˆØ± Ù†ÛŒÚ©ÛŒ Ø¬Ù†Øª Ú©ÛŒ Ø·Ø±Ù",explanation:"Truthfulness is a chain of goodness: truth leads to righteousness which leads to Paradise. Conversely, lying leads to wickedness which leads to punishment.",grade:"Sahih"},
  // Charity & Giving
  {narrator:"Abu Hurairah (RA)",book:"Sahih Muslim",book_arabic:"ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù…",hadith_number:"2588",topic:"charity sadaqah give spend money poor helping others",arabic:"Ù…ÙØ§ Ù†ÙÙ‚ÙØµÙØªÙ’ ØµÙØ¯ÙÙ‚ÙØ©ÙŒ Ù…ÙÙ†Ù’ Ù…ÙØ§Ù„Ù",english:"Charity does not decrease wealth.",urdu:"ØµØ¯Ù‚Û Ù…Ø§Ù„ Ú©Ùˆ Ú©Ù… Ù†ÛÛŒÚº Ú©Ø±ØªØ§",explanation:"This hadith destroys the fear of financial loss through giving. Charity actually increases blessings in mysterious ways â€” through barakah, protection and divine compensation.",grade:"Sahih"},
  // Parents & Family
  {narrator:"Abu Hurairah (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"5971",topic:"parents mother father family respect obey love",arabic:"Ø±ÙØºÙÙ…Ù Ø£ÙÙ†Ù’ÙÙÙ‡Ù Ø«ÙÙ…ÙÙ‘ Ø±ÙØºÙÙ…Ù Ø£ÙÙ†Ù’ÙÙÙ‡Ù Ø«ÙÙ…ÙÙ‘ Ø±ÙØºÙÙ…Ù Ø£ÙÙ†Ù’ÙÙÙ‡Ù Ù‚ÙÙŠÙ„Ù Ù…ÙÙ†Ù’ ÙŠÙØ§ Ø±ÙØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù‚ÙØ§Ù„Ù Ù…ÙÙ†Ù’ Ø£ÙØ¯Ù’Ø±ÙÙƒÙ ÙˆÙØ§Ù„ÙØ¯ÙÙŠÙ’Ù‡Ù Ø¹ÙÙ†Ù’Ø¯Ù Ø§Ù„Ù’ÙƒÙØ¨ÙØ±Ù",english:"Humiliated is the one who finds his parents in old age â€” one or both â€” yet does not enter Paradise through serving them.",urdu:"ÙˆÛ Ø´Ø®Øµ Ø°Ù„ÛŒÙ„ ÛÙˆ Ø¬Ø³ Ù†Û’ ÙˆØ§Ù„Ø¯ÛŒÙ† Ú©Ùˆ Ø¨Ú‘Ú¾Ø§Ù¾Û’ Ù…ÛŒÚº Ù¾Ø§ÛŒØ§ Ø§ÙˆØ± Ù¾Ú¾Ø± Ø¨Ú¾ÛŒ Ø¬Ù†Øª Ù…ÛŒÚº Ø¯Ø§Ø®Ù„ Ù†Û ÛÙˆØ§",explanation:"Parents in old age are the greatest opportunity for Paradise. Serving them patiently at this stage is a direct path to Allah's pleasure and eternal reward.",grade:"Sahih"},
  // Forgiveness & Repentance
  {narrator:"Anas ibn Malik (RA)",book:"Sunan Tirmidhi",book_arabic:"Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ",hadith_number:"3540",topic:"forgiveness repentance tawbah sin mercy Allah",arabic:"ÙƒÙÙ„ÙÙ‘ Ø¨ÙÙ†ÙÙŠ Ø¢Ø¯ÙÙ…Ù Ø®ÙØ·ÙÙ‘Ø§Ø¡ÙŒ ÙˆÙØ®ÙÙŠÙ’Ø±Ù Ø§Ù„Ù’Ø®ÙØ·ÙÙ‘Ø§Ø¦ÙÙŠÙ†Ù Ø§Ù„ØªÙÙ‘ÙˆÙÙ‘Ø§Ø¨ÙÙˆÙ†Ù",english:"Every son of Adam sins, and the best of those who sin are those who repent.",urdu:"ÛØ± Ø§Ù†Ø³Ø§Ù† Ú¯Ù†Ø§ÛÚ¯Ø§Ø± ÛÛ’ Ø§ÙˆØ± Ú¯Ù†Ø§ÛÚ¯Ø§Ø±ÙˆÚº Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ± ÙˆÛ ÛÛŒÚº Ø¬Ùˆ ØªÙˆØ¨Û Ú©Ø±ÛŒÚº",explanation:"Sinning is human but repentance is divine. This hadith removes shame and guilt by reminding us that turning back to Allah after a sin is itself a noble act.",grade:"Hasan"},
  // Dhikr & Remembrance
  {narrator:"Abu Musa al-Ashari (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"6407",topic:"dhikr remembrance zikr subhanallah alhamdulillah prayer worship",arabic:"Ù…ÙØ«ÙÙ„Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙØ°Ù’ÙƒÙØ±Ù Ø±ÙØ¨ÙÙ‘Ù‡Ù ÙˆÙØ§Ù„ÙÙ‘Ø°ÙÙŠ Ù„ÙØ§ ÙŠÙØ°Ù’ÙƒÙØ±ÙÙ‡Ù Ù…ÙØ«ÙÙ„Ù Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ ÙˆÙØ§Ù„Ù’Ù…ÙÙŠÙÙ‘ØªÙ",english:"The example of the one who remembers Allah versus the one who does not is like the living and the dead.",urdu:"Ø§Ù„Ù„Û Ú©Ø§ Ø°Ú©Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„Û’ Ø§ÙˆØ± Ù†Û Ú©Ø±Ù†Û’ ÙˆØ§Ù„Û’ Ú©ÛŒ Ù…Ø«Ø§Ù„ Ø²Ù†Ø¯Û Ø§ÙˆØ± Ù…Ø±Ø¯Û Ú©ÛŒ Ø·Ø±Ø­ ÛÛ’",explanation:"Dhikr is the spiritual heartbeat. A heart that remembers Allah is spiritually alive â€” vibrant and connected. A heart that forgets Allah is spiritually dead.",grade:"Sahih"},
  // Death & Hereafter
  {narrator:"Ibn Umar (RA)",book:"Sunan Tirmidhi",book_arabic:"Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ",hadith_number:"2459",topic:"death hereafter akhirah dunya world life prepare",arabic:"ÙƒÙÙ†Ù’ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ ÙƒÙØ£ÙÙ†ÙÙ‘ÙƒÙ ØºÙØ±ÙÙŠØ¨ÙŒ Ø£ÙÙˆÙ’ Ø¹ÙØ§Ø¨ÙØ±Ù Ø³ÙØ¨ÙÙŠÙ„Ù",english:"Be in this world as if you are a stranger or a traveler passing through.",urdu:"Ø¯Ù†ÛŒØ§ Ù…ÛŒÚº Ø§ÛŒØ³Û’ Ø±ÛÙˆ Ø¬ÛŒØ³Û’ ØªÙ… Ø§Ø¬Ù†Ø¨ÛŒ ÛÙˆ ÛŒØ§ Ø±Ø§ÛÚ¯ÛŒØ± ÛÙˆ",explanation:"The Prophet (SAW) gave a profound perspective on worldly life. We are travelers passing through â€” our real home is the akhirah. This mindset frees us from worldly attachment.",grade:"Sahih"},
  // Smile & Happiness
  {narrator:"Abu Dhar (RA)",book:"Sunan Tirmidhi",book_arabic:"Ø³Ù†Ù† Ø§Ù„ØªØ±Ù…Ø°ÙŠ",hadith_number:"1956",topic:"smile happy joy face brother charity",arabic:"ØªÙØ¨ÙØ³ÙÙ‘Ù…ÙÙƒÙ ÙÙÙŠ ÙˆÙØ¬Ù’Ù‡Ù Ø£ÙØ®ÙÙŠÙƒÙ Ù„ÙÙƒÙ ØµÙØ¯ÙÙ‚ÙØ©ÙŒ",english:"Your smile in the face of your brother is an act of charity.",urdu:"Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ú†ÛØ±Û’ Ú©ÛŒ Ø·Ø±Ù ØªÙ…ÛØ§Ø±Ø§ Ù…Ø³Ú©Ø±Ø§Ù†Ø§ ØµØ¯Ù‚Û ÛÛ’",explanation:"Islam makes even a smile an act of worship. This hadith shows that spreading joy and positivity to others is a form of charity that earns divine reward.",grade:"Sahih"},
  // Health & Body
  {narrator:"Ibn Abbas (RA)",book:"Sahih Bukhari",book_arabic:"ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",hadith_number:"6412",topic:"health body blessing time youth free",arabic:"Ù†ÙØ¹Ù’Ù…ÙØªÙØ§Ù†Ù Ù…ÙØºÙ’Ø¨ÙÙˆÙ†ÙŒ ÙÙÙŠÙ‡ÙÙ…ÙØ§ ÙƒÙØ«ÙÙŠØ±ÙŒ Ù…ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Ø§Ù„ØµÙÙ‘Ø­ÙÙ‘Ø©Ù ÙˆÙØ§Ù„Ù’ÙÙØ±ÙØ§ØºÙ",english:"Two blessings are taken for granted by many people â€” good health and free time.",urdu:"Ø¯Ùˆ Ù†Ø¹Ù…ØªÛŒÚº ÛÛŒÚº Ø¬Ù† Ù…ÛŒÚº Ø¨ÛØª Ø³Û’ Ù„ÙˆÚ¯ Ø®Ø³Ø§Ø±Û’ Ù…ÛŒÚº ÛÛŒÚº: ØµØ­Øª Ø§ÙˆØ± ÙØ±Ø§ØºØª",explanation:"We often value health and time only when we lose them. This hadith urges us to use these blessings actively in worship and good deeds before they are taken away.",grade:"Sahih"},
];

(query) {
  const lower = query.toLowerCase();
  const keywords = lower.split(' ').filter(w => w.length > 3);
  const scored = HADITH_DB.map(h => {
    const text = (h.english + h.explanation + h.narrator).toLowerCase();
    const score = keywords.filter(k => text.includes(k)).length;
    return { ...h, score };
  }).filter(h => h.score > 0).sort((a,b) => b.score - a.score);
  return scored.length >= 2 ? scored.slice(0,2) : HADITH_DB.sort(()=>Math.random()-0.5).slice(0,2);
}

function searchHadith(query) {
  if (!query || !query.trim()) return [...HADITH_DB].sort(()=>Math.random()-0.5).slice(0,2);
  const lower = query.toLowerCase().trim();
  const words = lower.split(/\s+/).filter(w => w.length > 2);
  const scored = HADITH_DB.map(h => {
    const text = (h.english + ' ' + h.explanation + ' ' + (h.topic||'') + ' ' + h.narrator).toLowerCase();
    let score = 0;
    if (text.includes(lower)) score += 10;
    words.forEach(w => { if (text.includes(w)) score += 3; });
    return { ...h, score };
  }).filter(h => h.score > 0).sort((a,b) => b.score - a.score);
  if (scored.length >= 1) return scored.slice(0,2);
  return [...HADITH_DB].sort(()=>Math.random()-0.5).slice(0,2);
}

async function doHadith() {
  const h = state.hadith;
  h.loading=true; h.error=''; h.results=null; render();

  // Show offline results instantly
  h.results = searchHadith(h.query);
  h.loading = false;
  render();

  // Try Gemini enhancement silently
  const key = getGeminiKey();
  if (key) {
    try {
      const raw = await claude(`You are an Islamic scholar. IMPORTANT: Respond with ONLY a JSON array, no other text, no markdown. Return exactly 2 hadith objects each with these exact keys: narrator (string), book (string), book_arabic (string), hadith_number (string), arabic (Arabic text), english (English translation), urdu (Urdu translation), explanation (2 sentences), grade (Sahih/Hasan/etc). No extra text before or after the JSON array.`, `Find Hadith about: "${h.query}"`);
      const parsed = parseJ(raw, 'array');
      if (parsed && parsed.length > 0) { h.results = parsed; render(); }
    } catch(err) { console.log('Hadith AI failed, using offline:', err.message); }
  }
}

async function fetchPrayer() {
  const p = state.prayer;
  if (!p.input.trim()) return;
  p.loading=true; p.error=''; render();
  try {
    const d=new Date();
    const res=await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(p.input)}&country=PK&method=1&date=${d.getDate()}-${d.getMonth()+1}-${d.getFullYear()}`);
    const data=await res.json();
    if(data.code!==200) throw new Error('City not found');
    const t=data.data.timings;
    p.times={Fajr:t.Fajr,Sunrise:t.Sunrise,Dhuhr:t.Dhuhr,Asr:t.Asr,Maghrib:t.Maghrib,Isha:t.Isha};
    p.city=p.input;
  } catch { p.error='City not found. Try another name.'; }
  p.loading=false; render();
}

// Daily ayat pool - picked by day of year
const DAILY_POOL = [
  {surah_name:"Al-Baqarah",surah_arabic:"Ø§Ù„Ù’Ø¨ÙÙ‚ÙØ±ÙØ©",surah_number:2,ayat_number:286,arabic:"Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§",urdu:"Ø§Ù„Ù„Û Ú©Ø³ÛŒ Ø¬Ø§Ù† Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø·Ø§Ù‚Øª Ø³Û’ Ø²ÛŒØ§Ø¯Û ØªÚ©Ù„ÛŒÙ Ù†ÛÛŒÚº Ø¯ÛŒØªØ§",english:"Allah does not burden a soul beyond that it can bear.",tafseer:"This beautiful verse assures us that every challenge is within our capacity. Allah knows our limits and never exceeds them."},
  {surah_name:"Ash-Sharh",surah_arabic:"Ø§Ù„Ø´ÙÙ‘Ø±Ù’Ø­",surah_number:94,ayat_number:6,arabic:"Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§",urdu:"Ø¨Û’ Ø´Ú© Ù…Ø´Ú©Ù„ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’",english:"Indeed, with hardship will be ease.",tafseer:"Allah promises that ease travels alongside every hardship. This is not a future promise â€” ease is WITH the difficulty, right now."},
  {surah_name:"Ar-Ra'd",surah_arabic:"Ø§Ù„Ø±ÙÙ‘Ø¹Ù’Ø¯",surah_number:13,ayat_number:28,arabic:"Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù",urdu:"Ø³Ù† Ù„Ùˆ Ø§Ù„Ù„Û Ú©Û’ Ø°Ú©Ø± Ø³Û’ Ø¯Ù„ÙˆÚº Ú©Ùˆ Ø³Ú©ÙˆÙ† Ù…Ù„ØªØ§ ÛÛ’",english:"Verily, in the remembrance of Allah do hearts find rest.",tafseer:"The prescription for every restless heart is dhikr. No anxiety can survive in a heart that truly remembers Allah."},
  {surah_name:"Az-Zumar",surah_arabic:"Ø§Ù„Ø²ÙÙ‘Ù…ÙØ±",surah_number:39,ayat_number:53,arabic:"Ù„ÙØ§ ØªÙÙ‚Ù’Ù†ÙØ·ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘Ø­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",urdu:"Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù…Øª ÛÙˆ",english:"Do not despair of the mercy of Allah.",tafseer:"Allah directly commands us never to lose hope in His mercy. No matter how far we feel, His mercy is always greater and always closer."},
  {surah_name:"Ad-Duha",surah_arabic:"Ø§Ù„Ø¶ÙÙ‘Ø­ÙÙ‰",surah_number:93,ayat_number:5,arabic:"ÙˆÙÙ„ÙØ³ÙÙˆÙ’ÙÙ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙ Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØªÙØ±Ù’Ø¶ÙÙ‰Ù°",urdu:"Ø¨Û’ Ø´Ú© ØªÙ…ÛØ§Ø±Ø§ Ø±Ø¨ ØªÙ…ÛÛŒÚº Ø§ØªÙ†Ø§ Ø¯Û’ Ú¯Ø§ Ú©Û ØªÙ… Ø±Ø§Ø¶ÛŒ ÛÙˆ Ø¬Ø§Ø¤ Ú¯Û’",english:"And your Lord is going to give you, and you will be satisfied.",tafseer:"This divine promise was given to the Prophet in his darkest hour. Allah will give so much that complete satisfaction will fill your heart."},
  {surah_name:"Ibrahim",surah_arabic:"Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…",surah_number:14,ayat_number:7,arabic:"Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†ÙÙ‘ÙƒÙÙ…Ù’",urdu:"Ø§Ú¯Ø± ØªÙ… Ø´Ú©Ø± Ú©Ø±Ùˆ Ú¯Û’ ØªÙˆ Ù…ÛŒÚº ØªÙ…ÛÛŒÚº Ø§ÙˆØ± Ø²ÛŒØ§Ø¯Û Ø¯ÙˆÚº Ú¯Ø§",english:"If you are grateful, I will surely increase you in favor.",tafseer:"Gratitude is a key that unlocks more blessings. This is Allah's direct promise â€” be thankful and receive more."},
  {surah_name:"Yusuf",surah_arabic:"ÙŠÙÙˆØ³ÙÙ",surah_number:12,ayat_number:87,arabic:"Ù„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù",urdu:"Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù†Û ÛÙˆ",english:"Do not despair of relief from Allah.",tafseer:"Prophet Yaqub said this after years of separation. His hope was rewarded â€” and so will yours. Never stop expecting relief from Allah."},
];

async function loadDaily() {
  const h = state.home;
  const today = new Date().toDateString();
  const cached = store.get('noor_daily');
  if (cached && cached.date === today) { h.daily=cached.ayat; h.dailyLoading=false; render(); return; }

  // Pick offline ayat by day of year - different ayat every day
  const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(),0,0)) / 86400000);
  const offlineAyat = DAILY_POOL[dayOfYear % DAILY_POOL.length];
  h.daily = offlineAyat;
  h.dailyLoading = false;
  store.set('noor_daily', {date: today, ayat: offlineAyat});
  render();

  // Try to get a fresh AI ayat silently
  const key = getGeminiKey();
  if (key) {
    try {
      const raw = await claude(`You are Noor. IMPORTANT: Respond with ONLY a JSON object, no other text, no markdown. Return one uplifting Quran verse with these exact keys: surah_name (string), surah_arabic (string), surah_number (integer), ayat_number (integer), arabic (Arabic text), urdu (Urdu translation), english (English translation), tafseer (2 sentence explanation). No extra text before or after the JSON.`,"Give me an uplifting Quran verse for today.");
      const parsed = parseJ(raw, 'object');
      if (parsed && parsed.arabic) {
        store.set('noor_daily', {date: today, ayat: parsed});
        h.daily = parsed;
        render();
      }
    } catch(err) { console.log('Daily AI failed, using offline pool'); }
  }
}

// Clock update
setInterval(()=>{state.prayer.now=new Date();if(state.tab==='prayer')render();},1000);

// Init
render();
</script>
</body>
</html>
